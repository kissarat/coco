<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>api.models package &mdash; mypinnings 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="mypinnings 1.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">mypinnings 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="api-models-package">
<h1>api.models package<a class="headerlink" href="#api-models-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-api.models.album">
<span id="api-models-album-module"></span><h2>api.models.album module<a class="headerlink" href="#module-api.models.album" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.models.album.Album">
<em class="property">class </em><tt class="descclassname">api.models.album.</tt><tt class="descname">Album</tt><big>(</big><em>user_id</em>, <em>slug</em>, <em>title=''</em>, <em>description=''</em><big>)</big><a class="reference internal" href="_modules/api/models/album.html#Album"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.album.Album" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></tt>, <a class="reference internal" href="#api.models.basemodel.Serializer" title="api.models.basemodel.Serializer"><tt class="xref py py-class docutils literal"><span class="pre">api.models.basemodel.Serializer</span></tt></a></p>
<dl class="attribute">
<dt id="api.models.album.Album.cover">
<tt class="descname">cover</tt><a class="headerlink" href="#api.models.album.Album.cover" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.album.Album.cover_id">
<tt class="descname">cover_id</tt><a class="headerlink" href="#api.models.album.Album.cover_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.album.Album.description">
<tt class="descname">description</tt><a class="headerlink" href="#api.models.album.Album.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.album.Album.id">
<tt class="descname">id</tt><a class="headerlink" href="#api.models.album.Album.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.album.Album.pictures">
<tt class="descname">pictures</tt><a class="headerlink" href="#api.models.album.Album.pictures" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.album.Album.slug">
<tt class="descname">slug</tt><a class="headerlink" href="#api.models.album.Album.slug" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.album.Album.title">
<tt class="descname">title</tt><a class="headerlink" href="#api.models.album.Album.title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.album.Album.user_id">
<tt class="descname">user_id</tt><a class="headerlink" href="#api.models.album.Album.user_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="api.models.album.relationship">
<tt class="descclassname">api.models.album.</tt><tt class="descname">relationship</tt><big>(</big><em>argument</em>, <em>secondary=None</em>, <em>primaryjoin=None</em>, <em>secondaryjoin=None</em>, <em>foreign_keys=None</em>, <em>uselist=None</em>, <em>order_by=False</em>, <em>backref=None</em>, <em>back_populates=None</em>, <em>post_update=False</em>, <em>cascade=False</em>, <em>extension=None</em>, <em>viewonly=False</em>, <em>lazy=True</em>, <em>collection_class=None</em>, <em>passive_deletes=False</em>, <em>passive_updates=True</em>, <em>remote_side=None</em>, <em>enable_typechecks=True</em>, <em>join_depth=None</em>, <em>comparator_factory=None</em>, <em>single_parent=False</em>, <em>innerjoin=False</em>, <em>distinct_target_key=None</em>, <em>doc=None</em>, <em>active_history=False</em>, <em>cascade_backrefs=True</em>, <em>load_on_pending=False</em>, <em>strategy_class=None</em>, <em>_local_remote_pairs=None</em>, <em>query_class=None</em>, <em>info=None</em><big>)</big><a class="headerlink" href="#api.models.album.relationship" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a relationship between two mapped classes.</p>
<p>This corresponds to a parent-child or associative table relationship.  The
constructed class is an instance of <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty</span></tt>.</p>
<p>A typical <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>, used in a classical mapping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
  <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Child</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Some arguments accepted by <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> optionally accept a
callable function, which when called produces the desired value.
The callable is invoked by the parent <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> at &#8220;mapper
initialization&#8221; time, which happens only when mappers are first used, and
is assumed to be after all mappings have been constructed.  This can be
used to resolve order-of-declaration and other dependency issues, such as
if <tt class="docutils literal"><span class="pre">Child</span></tt> is declared below <tt class="docutils literal"><span class="pre">Parent</span></tt> in the same file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&quot;children&quot;</span><span class="p">:</span><span class="n">relationship</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="p">,</span>
                        <span class="n">order_by</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>When using the <em class="xref std std-ref">declarative_toplevel</em> extension, the Declarative
initializer allows string arguments to be passed to <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.
These string arguments are converted into callables that evaluate
the string as Python code, using the Declarative
class-registry as a namespace.  This allows the lookup of related
classes to be automatic via their string name, and removes the need to
import related classes at all into the local module space:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;parent&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Child&quot;</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&quot;Child.id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_config_toplevel</em> - Full introductory and reference
documentation for <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.</p>
<p class="last"><em class="xref std std-ref">orm_tutorial_relationship</em> - ORM tutorial introduction.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>argument</strong> &#8211; <p>a mapped class, or actual <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> instance, representing the
target of the relationship.</p>
<p><a href="#id1"><span class="problematic" id="id2">:paramref:`~.relationship.argument`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">declarative_configuring_relationships</em> - further detail
on relationship configuration when using Declarative.</p>
</div>
</li>
<li><strong>secondary</strong> &#8211; <p>for a many-to-many relationship, specifies the intermediary
table, and is typically an instance of <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.
In less common circumstances, the argument may also be specified
as an <tt class="xref py py-class docutils literal"><span class="pre">Alias</span></tt> construct, or even a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> construct.</p>
<p><a href="#id3"><span class="problematic" id="id4">:paramref:`~.relationship.secondary`</span></a> may
also be passed as a callable function which is evaluated at
mapper initialization time.  When using Declarative, it may also
be a string argument noting the name of a <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> that is
present in the <tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt> collection associated with the
parent-mapped <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
<p>The <a href="#id5"><span class="problematic" id="id6">:paramref:`~.relationship.secondary`</span></a> keyword argument is typically
applied in the case where the intermediary <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> is not
otherwise exprssed in any direct class mapping. If the &#8220;secondary&#8221; table
is also explicitly mapped elsewhere
(e.g. as in <em class="xref std std-ref">association_pattern</em>), one should consider applying
the <a href="#id7"><span class="problematic" id="id8">:paramref:`~.relationship.viewonly`</span></a> flag so that this <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
is not used for persistence operations which may conflict with those
of the association object pattern.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_many_to_many</em> - Reference example of &#8220;many to many&#8221;.</p>
<p><em class="xref std std-ref">orm_tutorial_many_to_many</em> - ORM tutorial introduction to
many-to-many relationships.</p>
<p><em class="xref std std-ref">self_referential_many_to_many</em> - Specifics on using many-to-many
in a self-referential case.</p>
<p><em class="xref std std-ref">declarative_many_to_many</em> - Additional options when using
Declarative.</p>
<p><em class="xref std std-ref">association_pattern</em> - an alternative to <a href="#id9"><span class="problematic" id="id10">:paramref:`~.relationship.secondary`</span></a>
when composing association table relationships, allowing additional
attributes to be specified on the association table.</p>
<p class="last"><em class="xref std std-ref">composite_secondary_join</em> - a lesser-used pattern which in some
cases can enable complex <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> SQL conditions
to be used.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.2: </span><a href="#id11"><span class="problematic" id="id12">:paramref:`~.relationship.secondary`</span></a> works
more effectively when referring to a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> instance.</p>
</div>
</li>
<li><strong>active_history=False</strong> &#8211; When <tt class="docutils literal"><span class="pre">True</span></tt>, indicates that the &#8220;previous&#8221; value for a
many-to-one reference should be loaded when replaced, if
not already loaded. Normally, history tracking logic for
simple many-to-ones only needs to be aware of the &#8220;new&#8221;
value in order to perform a flush. This flag is available
for applications that make use of
<tt class="xref py py-func docutils literal"><span class="pre">attributes.get_history()</span></tt> which also need to know
the &#8220;previous&#8221; value of the attribute.</li>
<li><strong>backref</strong> &#8211; <p>indicates the string name of a property to be placed on the related
mapper&#8217;s class that will handle this relationship in the other
direction. The other property will be created automatically
when the mappers are configured.  Can also be passed as a
<tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> object to control the configuration of the
new relationship.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p><a href="#id13"><span class="problematic" id="id14">:paramref:`~.relationship.back_populates`</span></a> - alternative form
of backref specification.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> - allows control over <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
configuration when using <a href="#id15"><span class="problematic" id="id16">:paramref:`~.relationship.backref`</span></a>.</p>
</div>
</li>
<li><strong>back_populates</strong> &#8211; <p>Takes a string name and has the same meaning as <a href="#id17"><span class="problematic" id="id18">:paramref:`~.relationship.backref`</span></a>,
except the complementing property is <strong>not</strong> created automatically,
and instead must be configured explicitly on the other mapper.  The
complementing property should also indicate <a href="#id19"><span class="problematic" id="id20">:paramref:`~.relationship.back_populates`</span></a>
to this relationship to ensure proper functioning.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id21"><span class="problematic" id="id22">:paramref:`~.relationship.backref`</span></a> - alternative form
of backref specification.</p>
</div>
</li>
<li><strong>cascade</strong> &#8211; <p>a comma-separated list of cascade rules which determines how
Session operations should be &#8220;cascaded&#8221; from parent to child.
This defaults to <tt class="docutils literal"><span class="pre">False</span></tt>, which means the default cascade
should be used - this default cascade is <tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge&quot;</span></tt>.</p>
<p>The available cascades are <tt class="docutils literal"><span class="pre">save-update</span></tt>, <tt class="docutils literal"><span class="pre">merge</span></tt>,
<tt class="docutils literal"><span class="pre">expunge</span></tt>, <tt class="docutils literal"><span class="pre">delete</span></tt>, <tt class="docutils literal"><span class="pre">delete-orphan</span></tt>, and <tt class="docutils literal"><span class="pre">refresh-expire</span></tt>.
An additional option, <tt class="docutils literal"><span class="pre">all</span></tt> indicates shorthand for
<tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge,</span> <span class="pre">refresh-expire,</span>
<span class="pre">expunge,</span> <span class="pre">delete&quot;</span></tt>, and is often used as in <tt class="docutils literal"><span class="pre">&quot;all,</span> <span class="pre">delete-orphan&quot;</span></tt>
to indicate that related objects should follow along with the
parent object in all cases, and be deleted when de-associated.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">unitofwork_cascades</em> - Full detail on each of the available
cascade options.</p>
<p class="last"><em class="xref std std-ref">tutorial_delete_cascade</em> - Tutorial example describing
a delete cascade.</p>
</div>
</li>
<li><strong>cascade_backrefs=True</strong> &#8211; <p>a boolean value indicating if the <tt class="docutils literal"><span class="pre">save-update</span></tt> cascade should
operate along an assignment event intercepted by a backref.
When set to <tt class="docutils literal"><span class="pre">False</span></tt>, the attribute managed by this relationship
will not cascade an incoming transient object into the session of a
persistent parent, if the event is received via backref.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">backref_cascade</em> - Full discussion and examples on how
the <a href="#id23"><span class="problematic" id="id24">:paramref:`~.relationship.cascade_backrefs`</span></a> option is used.</p>
</div>
</li>
<li><strong>collection_class</strong> &#8211; <p>a class or callable that returns a new list-holding object. will
be used in place of a plain list for storing elements.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">custom_collections</em> - Introductory documentation and
examples.</p>
</div>
</li>
<li><strong>comparator_factory</strong> &#8211; <p>a class which extends <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty.Comparator</span></tt> which
provides custom SQL clause generation for comparison operations.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">PropComparator</span></tt> - some detail on redefining comparators
at this level.</p>
<p class="last"><em class="xref std std-ref">custom_comparators</em> - Brief intro to this feature.</p>
</div>
</li>
<li><strong>distinct_target_key=None</strong> &#8211; <p>Indicate if a &#8220;subquery&#8221; eager load should apply the DISTINCT
keyword to the innermost SELECT statement.  When left as <tt class="docutils literal"><span class="pre">None</span></tt>,
the DISTINCT keyword will be applied in those cases when the target
columns do not comprise the full primary key of the target table.
When set to <tt class="docutils literal"><span class="pre">True</span></tt>, the DISTINCT keyword is applied to the innermost
SELECT unconditionally.</p>
<p>It may be desirable to set this flag to False when the DISTINCT is
reducing performance of the innermost subquery beyond that of what
duplicate innermost rows may be causing.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.3: </span>- <a href="#id25"><span class="problematic" id="id26">:paramref:`~.relationship.distinct_target_key`</span></a>
allows the
subquery eager loader to apply a DISTINCT modifier to the
innermost SELECT.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span>- <a href="#id27"><span class="problematic" id="id28">:paramref:`~.relationship.distinct_target_key`</span></a>
now defaults to <tt class="docutils literal"><span class="pre">None</span></tt>, so that the feature enables itself automatically for
those cases where the innermost query targets a non-unique
key.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">loading_toplevel</em> - includes an introduction to subquery
eager loading.</p>
</div>
</li>
<li><strong>doc</strong> &#8211; docstring which will be applied to the resulting descriptor.</li>
<li><strong>extension</strong> &#8211; <p>an <tt class="xref py py-class docutils literal"><span class="pre">AttributeExtension</span></tt> instance, or list of extensions,
which will be prepended to the list of attribute listeners for
the resulting descriptor placed on the class.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.7: </span>Please see <tt class="xref py py-class docutils literal"><span class="pre">AttributeEvents</span></tt>.</p>
</div>
</li>
<li><strong>foreign_keys</strong> &#8211; <p>a list of columns which are to be used as &#8220;foreign key&#8221;
columns, or columns which refer to the value in a remote
column, within the context of this <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
object&#8217;s <a href="#id29"><span class="problematic" id="id30">:paramref:`~.relationship.primaryjoin`</span></a> condition.
That is, if the <a href="#id31"><span class="problematic" id="id32">:paramref:`~.relationship.primaryjoin`</span></a>
condition of this <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">a.id</span> <span class="pre">==</span>
<span class="pre">b.a_id</span></tt>, and the values in <tt class="docutils literal"><span class="pre">b.a_id</span></tt> are required to be
present in <tt class="docutils literal"><span class="pre">a.id</span></tt>, then the &#8220;foreign key&#8221; column of this
<a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">b.a_id</span></tt>.</p>
<p>In normal cases, the <a href="#id33"><span class="problematic" id="id34">:paramref:`~.relationship.foreign_keys`</span></a>
parameter is <strong>not required.</strong> <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> will
automatically determine which columns in the
<a href="#id35"><span class="problematic" id="id36">:paramref:`~.relationship.primaryjoin`</span></a> conditition are to be
considered &#8220;foreign key&#8221; columns based on those
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects that specify <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt>,
or are otherwise listed as referencing columns in a
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt> construct.
<a href="#id37"><span class="problematic" id="id38">:paramref:`~.relationship.foreign_keys`</span></a> is only needed when:</p>
<blockquote>
<div><ol class="arabic">
<li>There is more than one way to construct a join from the local
table to the remote table, as there are multiple foreign key
references present.  Setting <tt class="docutils literal"><span class="pre">foreign_keys</span></tt> will limit the
<a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> to consider just those columns specified
here as &#8220;foreign&#8221;.<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>A multiple-foreign key join ambiguity can be resolved by
setting the <a href="#id39"><span class="problematic" id="id40">:paramref:`~.relationship.foreign_keys`</span></a> parameter alone, without the
need to explicitly set <a href="#id41"><span class="problematic" id="id42">:paramref:`~.relationship.primaryjoin`</span></a> as well.</p>
</div>
</li>
<li>The <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> being mapped does not actually have
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt>
constructs present, often because the table
was reflected from a database that does not support foreign key
reflection (MySQL MyISAM).</li>
<li>The <a href="#id43"><span class="problematic" id="id44">:paramref:`~.relationship.primaryjoin`</span></a> argument is used to construct a non-standard
join condition, which makes use of columns or expressions that do
not normally refer to their &#8220;parent&#8221; column, such as a join condition
expressed by a complex comparison using a SQL function.</li>
</ol>
</div></blockquote>
<p>The <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct will raise informative
error messages that suggest the use of the
<a href="#id45"><span class="problematic" id="id46">:paramref:`~.relationship.foreign_keys`</span></a> parameter when
presented with an ambiguous condition.   In typical cases,
if <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> doesn&#8217;t raise any exceptions, the
<a href="#id47"><span class="problematic" id="id48">:paramref:`~.relationship.foreign_keys`</span></a> parameter is usually
not needed.</p>
<p><a href="#id49"><span class="problematic" id="id50">:paramref:`~.relationship.foreign_keys`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_foreign_keys</em></p>
<p><em class="xref std std-ref">relationship_custom_foreign</em></p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> - allows direct annotation of the &#8220;foreign&#8221; columns
within a <a href="#id51"><span class="problematic" id="id52">:paramref:`~.relationship.primaryjoin`</span></a> condition.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> annotation can also be applied
directly to the <a href="#id53"><span class="problematic" id="id54">:paramref:`~.relationship.primaryjoin`</span></a> expression, which is an alternate,
more specific system of describing which columns in a particular
<a href="#id55"><span class="problematic" id="id56">:paramref:`~.relationship.primaryjoin`</span></a> should be considered &#8220;foreign&#8221;.</p>
</div>
</li>
<li><strong>info</strong> &#8211; <p>Optional data dictionary which will be populated into the
<tt class="xref py py-attr docutils literal"><span class="pre">MapperProperty.info</span></tt> attribute of this object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</li>
<li><strong>innerjoin=False</strong> &#8211; <p>when <tt class="docutils literal"><span class="pre">True</span></tt>, joined eager loads will use an inner join to join
against related tables instead of an outer join.  The purpose
of this option is generally one of performance, as inner joins
generally perform better than outer joins.</p>
<p>This flag can be set to <tt class="docutils literal"><span class="pre">True</span></tt> when the relationship references an
object via many-to-one using local foreign keys that are not nullable,
or when the reference is one-to-one or a collection that is guaranteed
to have one or at least one entry.</p>
<p>If the joined-eager load is chained onto an existing LEFT OUTER JOIN,
<tt class="docutils literal"><span class="pre">innerjoin=True</span></tt> will be bypassed and the join will continue to
chain as LEFT OUTER JOIN so that the results don&#8217;t change.  As an alternative,
specify the value <tt class="docutils literal"><span class="pre">&quot;nested&quot;</span></tt>.  This will instead nest the join
on the right side, e.g. using the form &#8220;a LEFT OUTER JOIN (b JOIN c)&#8221;.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.4: </span>Added <tt class="docutils literal"><span class="pre">innerjoin=&quot;nested&quot;</span></tt> option to support
nesting of eager &#8220;inner&#8221; joins.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">what_kind_of_loading</em> - Discussion of some details of
various loader options.</p>
<p class="last"><a href="#id57"><span class="problematic" id="id58">:paramref:`.joinedload.innerjoin`</span></a> - loader option version</p>
</div>
</li>
<li><strong>join_depth</strong> &#8211; <p>when non-<tt class="docutils literal"><span class="pre">None</span></tt>, an integer value indicating how many levels
deep &#8220;eager&#8221; loaders should join on a self-referring or cyclical
relationship.  The number counts how many times the same Mapper
shall be present in the loading condition along a particular join
branch.  When left at its default of <tt class="docutils literal"><span class="pre">None</span></tt>, eager loaders
will stop chaining when they encounter a the same target mapper
which is already higher up in the chain.  This option applies
both to joined- and subquery- eager loaders.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">self_referential_eager_loading</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>lazy=&#8217;select&#8217;</strong> &#8211; <p>specifies
how the related items should be loaded.  Default value is
<tt class="docutils literal"><span class="pre">select</span></tt>.  Values include:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">select</span></tt> - items should be loaded lazily when the property is first
accessed, using a separate SELECT statement, or identity map
fetch for simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">immediate</span></tt> - items should be loaded as the parents are loaded,
using a separate SELECT statement, or identity map fetch for
simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">joined</span></tt> - items should be loaded &#8220;eagerly&#8221; in the same query as
that of the parent, using a JOIN or LEFT OUTER JOIN.  Whether
the join is &#8220;outer&#8221; or not is determined by the
<a href="#id59"><span class="problematic" id="id60">:paramref:`~.relationship.innerjoin`</span></a> parameter.</li>
<li><tt class="docutils literal"><span class="pre">subquery</span></tt> - items should be loaded &#8220;eagerly&#8221; as the parents are
loaded, using one additional SQL statement, which issues a JOIN to a
subquery of the original statement, for each collection requested.</li>
<li><tt class="docutils literal"><span class="pre">noload</span></tt> - no loading should occur at any time.  This is to
support &#8220;write-only&#8221; attributes, or attributes which are
populated in some manner specific to the application.</li>
<li><tt class="docutils literal"><span class="pre">dynamic</span></tt> - the attribute will return a pre-configured
<a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object for all read
operations, onto which further filtering operations can be
applied before iterating the results.  See
the section <em class="xref std std-ref">dynamic_relationship</em> for more details.</li>
<li>True - a synonym for &#8216;select&#8217;</li>
<li>False - a synonym for &#8216;joined&#8217;</li>
<li>None - a synonym for &#8216;noload&#8217;</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref doc docutils literal"><span class="pre">/orm/loading</span></tt> - Full documentation on relationship loader
configuration.</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - detail on the <tt class="docutils literal"><span class="pre">dynamic</span></tt> option.</p>
</div>
</li>
<li><strong>load_on_pending=False</strong> &#8211; <p>Indicates loading behavior for transient or pending parent objects.</p>
<p>When set to <tt class="docutils literal"><span class="pre">True</span></tt>, causes the lazy-loader to
issue a query for a parent object that is not persistent, meaning it has
never been flushed.  This may take effect for a pending object when
autoflush is disabled, or for a transient object that has been
&#8220;attached&#8221; to a <tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt> but is not part of its pending
collection.</p>
<p>The <a href="#id61"><span class="problematic" id="id62">:paramref:`~.relationship.load_on_pending`</span></a> flag does not improve behavior
when the ORM is used normally - object references should be constructed
at the object level, not at the foreign key level, so that they
are present in an ordinary way before a flush proceeds.  This flag
is not not intended for general use.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">Session.enable_relationship_loading()</span></tt> - this method establishes
&#8220;load on pending&#8221; behavior for the whole object, and also allows
loading on objects that remain transient or detached.</p>
</div>
</li>
<li><strong>order_by</strong> &#8211; <p>indicates the ordering that should be applied when loading these
items.  <a href="#id63"><span class="problematic" id="id64">:paramref:`~.relationship.order_by`</span></a> is expected to refer to one
of the <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects to which the target class is mapped, or
the attribute itself bound to the target class which refers
to the column.</p>
<p><a href="#id65"><span class="problematic" id="id66">:paramref:`~.relationship.order_by`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
</li>
<li><strong>passive_deletes=False</strong> &#8211; <p>Indicates loading behavior during delete operations.</p>
<p>A value of True indicates that unloaded child items should not
be loaded during a delete operation on the parent.  Normally,
when a parent item is deleted, all child items are loaded so
that they can either be marked as deleted, or have their
foreign key to the parent set to NULL.  Marking this flag as
True usually implies an ON DELETE &lt;CASCADE|SET NULL&gt; rule is in
place which will handle updating/deleting child rows on the
database side.</p>
<p>Additionally, setting the flag to the string value &#8216;all&#8217; will
disable the &#8220;nulling out&#8221; of the child foreign keys, when there
is no delete or delete-orphan cascade enabled.  This is
typically used when a triggering or error raise scenario is in
place on the database side.  Note that the foreign key
attributes on in-session child objects will not be changed
after a flush occurs so this is a very special use-case
setting.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">passive_deletes</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>passive_updates=True</strong> &#8211; <p>Indicates loading and INSERT/UPDATE/DELETE behavior when the
source of a foreign key value changes (i.e. an &#8220;on update&#8221;
cascade), which are typically the primary key columns of the
source row.</p>
<p>When True, it is assumed that ON UPDATE CASCADE is configured on
the foreign key in the database, and that the database will
handle propagation of an UPDATE from a source column to
dependent rows.  Note that with databases which enforce
referential integrity (i.e. PostgreSQL, MySQL with InnoDB tables),
ON UPDATE CASCADE is required for this operation.  The
relationship() will update the value of the attribute on related
items which are locally present in the session during a flush.</p>
<p>When False, it is assumed that the database does not enforce
referential integrity and will not be issuing its own CASCADE
operation for an update.  The relationship() will issue the
appropriate UPDATE statements to the database in response to the
change of a referenced key, and items locally present in the
session during a flush will also be refreshed.</p>
<p>This flag should probably be set to False if primary key changes
are expected and the database in use doesn&#8217;t support CASCADE
(i.e. SQLite, MySQL MyISAM tables).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">passive_updates</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id67"><span class="problematic" id="id68">:paramref:`.mapper.passive_updates`</span></a> - a similar flag which
takes effect for joined-table inheritance mappings.</p>
</div>
</li>
<li><strong>post_update</strong> &#8211; <p>this indicates that the relationship should be handled by a
second UPDATE statement after an INSERT or before a
DELETE. Currently, it also will issue an UPDATE after the
instance was UPDATEd as well, although this technically should
be improved. This flag is used to handle saving bi-directional
dependencies between two individual rows (i.e. each row
references the other), where it would otherwise be impossible to
INSERT or DELETE both rows fully since one row exists before the
other. Use this flag when a particular mapping arrangement will
incur two rows that are dependent on each other, such as a table
that has a one-to-many relationship to a set of child rows, and
also has a column that references a single child row within that
list (i.e. both tables contain a foreign key to each other). If
a flush operation returns an error that a &#8220;cyclical
dependency&#8221; was detected, this is a cue that you might want to
use <a href="#id69"><span class="problematic" id="id70">:paramref:`~.relationship.post_update`</span></a> to &#8220;break&#8221; the cycle.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">post_update</em> - Introductory documentation and examples.</p>
</div>
</li>
<li><strong>primaryjoin</strong> &#8211; <p>a SQL expression that will be used as the primary
join of this child object against the parent object, or in a
many-to-many relationship the join of the primary object to the
association table. By default, this value is computed based on the
foreign key relationships of the parent and child tables (or association
table).</p>
<p><a href="#id71"><span class="problematic" id="id72">:paramref:`~.relationship.primaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>remote_side</strong> &#8211; <p>used for self-referential relationships, indicates the column or
list of columns that form the &#8220;remote side&#8221; of the relationship.</p>
<p><a href="#id73"><span class="problematic" id="id74">:paramref:`.relationship.remote_side`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> annotation can also be applied
directly to the <tt class="docutils literal"><span class="pre">primaryjoin</span></tt> expression, which is an alternate,
more specific system of describing which columns in a particular
<tt class="docutils literal"><span class="pre">primaryjoin</span></tt> should be considered &#8220;remote&#8221;.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">self_referential</em> - in-depth explanation of how
<a href="#id75"><span class="problematic" id="id76">:paramref:`~.relationship.remote_side`</span></a>
is used to configure self-referential relationships.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> - an annotation function that accomplishes the same
purpose as <a href="#id77"><span class="problematic" id="id78">:paramref:`~.relationship.remote_side`</span></a>, typically
when a custom <a href="#id79"><span class="problematic" id="id80">:paramref:`~.relationship.primaryjoin`</span></a> condition
is used.</p>
</div>
</li>
<li><strong>query_class</strong> &#8211; <p>a <a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> subclass that will be used as the base of the
&#8220;appender query&#8221; returned by a &#8220;dynamic&#8221; relationship, that
is, a relationship that specifies <tt class="docutils literal"><span class="pre">lazy=&quot;dynamic&quot;</span></tt> or was
otherwise constructed using the <tt class="xref py py-func docutils literal"><span class="pre">orm.dynamic_loader()</span></tt>
function.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - Introduction to &#8220;dynamic&#8221; relationship
loaders.</p>
</div>
</li>
<li><strong>secondaryjoin</strong> &#8211; <p>a SQL expression that will be used as the join of
an association table to the child object. By default, this value is
computed based on the foreign key relationships of the association and
child tables.</p>
<p><a href="#id81"><span class="problematic" id="id82">:paramref:`~.relationship.secondaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>single_parent</strong> &#8211; <p>when True, installs a validator which will prevent objects
from being associated with more than one parent at a time.
This is used for many-to-one or many-to-many relationships that
should be treated either as one-to-one or one-to-many.  Its usage
is optional, except for <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> constructs which
are many-to-one or many-to-many and also
specify the <tt class="docutils literal"><span class="pre">delete-orphan</span></tt> cascade option.  The <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
construct itself will raise an error instructing when this option
is required.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">unitofwork_cascades</em> - includes detail on when the
<a href="#id83"><span class="problematic" id="id84">:paramref:`~.relationship.single_parent`</span></a> flag may be appropriate.</p>
</div>
</li>
<li><strong>uselist</strong> &#8211; <p>a boolean that indicates if this property should be loaded as a
list or a scalar. In most cases, this value is determined
automatically by <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> at mapper configuration
time, based on the type and direction
of the relationship - one to many forms a list, many to one
forms a scalar, many to many is a list. If a scalar is desired
where normally a list would be present, such as a bi-directional
one-to-one relationship, set <a href="#id85"><span class="problematic" id="id86">:paramref:`~.relationship.uselist`</span></a> to False.</p>
<p>The <a href="#id87"><span class="problematic" id="id88">:paramref:`~.relationship.uselist`</span></a> flag is also available on an
existing <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct as a read-only attribute, which
can be used to determine if this <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> deals with
collections or scalar attributes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">uselist</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationships_one_to_one</em> - Introduction to the &#8220;one to one&#8221;
relationship pattern, which is typically when the
<a href="#id89"><span class="problematic" id="id90">:paramref:`~.relationship.uselist`</span></a> flag is needed.</p>
</div>
</li>
<li><strong>viewonly=False</strong> &#8211; when set to True, the relationship is used only for loading objects,
and not for any persistence operation.  A <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
which specifies <a href="#id91"><span class="problematic" id="id92">:paramref:`~.relationship.viewonly`</span></a> can work
with a wider range of SQL operations within the <a href="#id93"><span class="problematic" id="id94">:paramref:`~.relationship.primaryjoin`</span></a>
condition, including operations that feature the use of
a variety of comparison operators as well as SQL functions such
as <tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt>.  The <a href="#id95"><span class="problematic" id="id96">:paramref:`~.relationship.viewonly`</span></a>
flag is also of general use when defining any kind of <a class="reference internal" href="#api.models.album.relationship" title="api.models.album.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
that doesn&#8217;t represent the full set of related objects, to prevent
modifications of the collection from resulting in persistence operations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-api.models.basemodel">
<span id="api-models-basemodel-module"></span><h2>api.models.basemodel module<a class="headerlink" href="#module-api.models.basemodel" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.models.basemodel.Serializer">
<em class="property">class </em><tt class="descclassname">api.models.basemodel.</tt><tt class="descname">Serializer</tt><a class="reference internal" href="_modules/api/models/basemodel.html#Serializer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.basemodel.Serializer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="api.models.basemodel.Serializer.to_serializable_dict">
<tt class="descname">to_serializable_dict</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/api/models/basemodel.html#Serializer.to_serializable_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.basemodel.Serializer.to_serializable_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-api.models.picture">
<span id="api-models-picture-module"></span><h2>api.models.picture module<a class="headerlink" href="#module-api.models.picture" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.models.picture.Picture">
<em class="property">class </em><tt class="descclassname">api.models.picture.</tt><tt class="descname">Picture</tt><big>(</big><em>album_id</em>, <em>original_url</em>, <em>resized_url</em><big>)</big><a class="reference internal" href="_modules/api/models/picture.html#Picture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.picture.Picture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></tt>, <a class="reference internal" href="#api.models.basemodel.Serializer" title="api.models.basemodel.Serializer"><tt class="xref py py-class docutils literal"><span class="pre">api.models.basemodel.Serializer</span></tt></a></p>
<dl class="attribute">
<dt id="api.models.picture.Picture.album">
<tt class="descname">album</tt><a class="headerlink" href="#api.models.picture.Picture.album" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture.Picture.album_id">
<tt class="descname">album_id</tt><a class="headerlink" href="#api.models.picture.Picture.album_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture.Picture.comments">
<tt class="descname">comments</tt><a class="headerlink" href="#api.models.picture.Picture.comments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture.Picture.id">
<tt class="descname">id</tt><a class="headerlink" href="#api.models.picture.Picture.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture.Picture.likes">
<tt class="descname">likes</tt><a class="headerlink" href="#api.models.picture.Picture.likes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture.Picture.original_url">
<tt class="descname">original_url</tt><a class="headerlink" href="#api.models.picture.Picture.original_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture.Picture.resized_url">
<tt class="descname">resized_url</tt><a class="headerlink" href="#api.models.picture.Picture.resized_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="api.models.picture.Picture.to_serializable_dict">
<tt class="descname">to_serializable_dict</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/api/models/picture.html#Picture.to_serializable_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.picture.Picture.to_serializable_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="api.models.picture.relationship">
<tt class="descclassname">api.models.picture.</tt><tt class="descname">relationship</tt><big>(</big><em>argument</em>, <em>secondary=None</em>, <em>primaryjoin=None</em>, <em>secondaryjoin=None</em>, <em>foreign_keys=None</em>, <em>uselist=None</em>, <em>order_by=False</em>, <em>backref=None</em>, <em>back_populates=None</em>, <em>post_update=False</em>, <em>cascade=False</em>, <em>extension=None</em>, <em>viewonly=False</em>, <em>lazy=True</em>, <em>collection_class=None</em>, <em>passive_deletes=False</em>, <em>passive_updates=True</em>, <em>remote_side=None</em>, <em>enable_typechecks=True</em>, <em>join_depth=None</em>, <em>comparator_factory=None</em>, <em>single_parent=False</em>, <em>innerjoin=False</em>, <em>distinct_target_key=None</em>, <em>doc=None</em>, <em>active_history=False</em>, <em>cascade_backrefs=True</em>, <em>load_on_pending=False</em>, <em>strategy_class=None</em>, <em>_local_remote_pairs=None</em>, <em>query_class=None</em>, <em>info=None</em><big>)</big><a class="headerlink" href="#api.models.picture.relationship" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a relationship between two mapped classes.</p>
<p>This corresponds to a parent-child or associative table relationship.  The
constructed class is an instance of <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty</span></tt>.</p>
<p>A typical <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>, used in a classical mapping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
  <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Child</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Some arguments accepted by <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> optionally accept a
callable function, which when called produces the desired value.
The callable is invoked by the parent <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> at &#8220;mapper
initialization&#8221; time, which happens only when mappers are first used, and
is assumed to be after all mappings have been constructed.  This can be
used to resolve order-of-declaration and other dependency issues, such as
if <tt class="docutils literal"><span class="pre">Child</span></tt> is declared below <tt class="docutils literal"><span class="pre">Parent</span></tt> in the same file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&quot;children&quot;</span><span class="p">:</span><span class="n">relationship</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="p">,</span>
                        <span class="n">order_by</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>When using the <em class="xref std std-ref">declarative_toplevel</em> extension, the Declarative
initializer allows string arguments to be passed to <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.
These string arguments are converted into callables that evaluate
the string as Python code, using the Declarative
class-registry as a namespace.  This allows the lookup of related
classes to be automatic via their string name, and removes the need to
import related classes at all into the local module space:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;parent&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Child&quot;</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&quot;Child.id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_config_toplevel</em> - Full introductory and reference
documentation for <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.</p>
<p class="last"><em class="xref std std-ref">orm_tutorial_relationship</em> - ORM tutorial introduction.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>argument</strong> &#8211; <p>a mapped class, or actual <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> instance, representing the
target of the relationship.</p>
<p><a href="#id97"><span class="problematic" id="id98">:paramref:`~.relationship.argument`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">declarative_configuring_relationships</em> - further detail
on relationship configuration when using Declarative.</p>
</div>
</li>
<li><strong>secondary</strong> &#8211; <p>for a many-to-many relationship, specifies the intermediary
table, and is typically an instance of <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.
In less common circumstances, the argument may also be specified
as an <tt class="xref py py-class docutils literal"><span class="pre">Alias</span></tt> construct, or even a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> construct.</p>
<p><a href="#id99"><span class="problematic" id="id100">:paramref:`~.relationship.secondary`</span></a> may
also be passed as a callable function which is evaluated at
mapper initialization time.  When using Declarative, it may also
be a string argument noting the name of a <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> that is
present in the <tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt> collection associated with the
parent-mapped <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
<p>The <a href="#id101"><span class="problematic" id="id102">:paramref:`~.relationship.secondary`</span></a> keyword argument is typically
applied in the case where the intermediary <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> is not
otherwise exprssed in any direct class mapping. If the &#8220;secondary&#8221; table
is also explicitly mapped elsewhere
(e.g. as in <em class="xref std std-ref">association_pattern</em>), one should consider applying
the <a href="#id103"><span class="problematic" id="id104">:paramref:`~.relationship.viewonly`</span></a> flag so that this <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
is not used for persistence operations which may conflict with those
of the association object pattern.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_many_to_many</em> - Reference example of &#8220;many to many&#8221;.</p>
<p><em class="xref std std-ref">orm_tutorial_many_to_many</em> - ORM tutorial introduction to
many-to-many relationships.</p>
<p><em class="xref std std-ref">self_referential_many_to_many</em> - Specifics on using many-to-many
in a self-referential case.</p>
<p><em class="xref std std-ref">declarative_many_to_many</em> - Additional options when using
Declarative.</p>
<p><em class="xref std std-ref">association_pattern</em> - an alternative to <a href="#id105"><span class="problematic" id="id106">:paramref:`~.relationship.secondary`</span></a>
when composing association table relationships, allowing additional
attributes to be specified on the association table.</p>
<p class="last"><em class="xref std std-ref">composite_secondary_join</em> - a lesser-used pattern which in some
cases can enable complex <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> SQL conditions
to be used.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.2: </span><a href="#id107"><span class="problematic" id="id108">:paramref:`~.relationship.secondary`</span></a> works
more effectively when referring to a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> instance.</p>
</div>
</li>
<li><strong>active_history=False</strong> &#8211; When <tt class="docutils literal"><span class="pre">True</span></tt>, indicates that the &#8220;previous&#8221; value for a
many-to-one reference should be loaded when replaced, if
not already loaded. Normally, history tracking logic for
simple many-to-ones only needs to be aware of the &#8220;new&#8221;
value in order to perform a flush. This flag is available
for applications that make use of
<tt class="xref py py-func docutils literal"><span class="pre">attributes.get_history()</span></tt> which also need to know
the &#8220;previous&#8221; value of the attribute.</li>
<li><strong>backref</strong> &#8211; <p>indicates the string name of a property to be placed on the related
mapper&#8217;s class that will handle this relationship in the other
direction. The other property will be created automatically
when the mappers are configured.  Can also be passed as a
<tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> object to control the configuration of the
new relationship.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p><a href="#id109"><span class="problematic" id="id110">:paramref:`~.relationship.back_populates`</span></a> - alternative form
of backref specification.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> - allows control over <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
configuration when using <a href="#id111"><span class="problematic" id="id112">:paramref:`~.relationship.backref`</span></a>.</p>
</div>
</li>
<li><strong>back_populates</strong> &#8211; <p>Takes a string name and has the same meaning as <a href="#id113"><span class="problematic" id="id114">:paramref:`~.relationship.backref`</span></a>,
except the complementing property is <strong>not</strong> created automatically,
and instead must be configured explicitly on the other mapper.  The
complementing property should also indicate <a href="#id115"><span class="problematic" id="id116">:paramref:`~.relationship.back_populates`</span></a>
to this relationship to ensure proper functioning.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id117"><span class="problematic" id="id118">:paramref:`~.relationship.backref`</span></a> - alternative form
of backref specification.</p>
</div>
</li>
<li><strong>cascade</strong> &#8211; <p>a comma-separated list of cascade rules which determines how
Session operations should be &#8220;cascaded&#8221; from parent to child.
This defaults to <tt class="docutils literal"><span class="pre">False</span></tt>, which means the default cascade
should be used - this default cascade is <tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge&quot;</span></tt>.</p>
<p>The available cascades are <tt class="docutils literal"><span class="pre">save-update</span></tt>, <tt class="docutils literal"><span class="pre">merge</span></tt>,
<tt class="docutils literal"><span class="pre">expunge</span></tt>, <tt class="docutils literal"><span class="pre">delete</span></tt>, <tt class="docutils literal"><span class="pre">delete-orphan</span></tt>, and <tt class="docutils literal"><span class="pre">refresh-expire</span></tt>.
An additional option, <tt class="docutils literal"><span class="pre">all</span></tt> indicates shorthand for
<tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge,</span> <span class="pre">refresh-expire,</span>
<span class="pre">expunge,</span> <span class="pre">delete&quot;</span></tt>, and is often used as in <tt class="docutils literal"><span class="pre">&quot;all,</span> <span class="pre">delete-orphan&quot;</span></tt>
to indicate that related objects should follow along with the
parent object in all cases, and be deleted when de-associated.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">unitofwork_cascades</em> - Full detail on each of the available
cascade options.</p>
<p class="last"><em class="xref std std-ref">tutorial_delete_cascade</em> - Tutorial example describing
a delete cascade.</p>
</div>
</li>
<li><strong>cascade_backrefs=True</strong> &#8211; <p>a boolean value indicating if the <tt class="docutils literal"><span class="pre">save-update</span></tt> cascade should
operate along an assignment event intercepted by a backref.
When set to <tt class="docutils literal"><span class="pre">False</span></tt>, the attribute managed by this relationship
will not cascade an incoming transient object into the session of a
persistent parent, if the event is received via backref.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">backref_cascade</em> - Full discussion and examples on how
the <a href="#id119"><span class="problematic" id="id120">:paramref:`~.relationship.cascade_backrefs`</span></a> option is used.</p>
</div>
</li>
<li><strong>collection_class</strong> &#8211; <p>a class or callable that returns a new list-holding object. will
be used in place of a plain list for storing elements.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">custom_collections</em> - Introductory documentation and
examples.</p>
</div>
</li>
<li><strong>comparator_factory</strong> &#8211; <p>a class which extends <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty.Comparator</span></tt> which
provides custom SQL clause generation for comparison operations.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">PropComparator</span></tt> - some detail on redefining comparators
at this level.</p>
<p class="last"><em class="xref std std-ref">custom_comparators</em> - Brief intro to this feature.</p>
</div>
</li>
<li><strong>distinct_target_key=None</strong> &#8211; <p>Indicate if a &#8220;subquery&#8221; eager load should apply the DISTINCT
keyword to the innermost SELECT statement.  When left as <tt class="docutils literal"><span class="pre">None</span></tt>,
the DISTINCT keyword will be applied in those cases when the target
columns do not comprise the full primary key of the target table.
When set to <tt class="docutils literal"><span class="pre">True</span></tt>, the DISTINCT keyword is applied to the innermost
SELECT unconditionally.</p>
<p>It may be desirable to set this flag to False when the DISTINCT is
reducing performance of the innermost subquery beyond that of what
duplicate innermost rows may be causing.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.3: </span>- <a href="#id121"><span class="problematic" id="id122">:paramref:`~.relationship.distinct_target_key`</span></a>
allows the
subquery eager loader to apply a DISTINCT modifier to the
innermost SELECT.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span>- <a href="#id123"><span class="problematic" id="id124">:paramref:`~.relationship.distinct_target_key`</span></a>
now defaults to <tt class="docutils literal"><span class="pre">None</span></tt>, so that the feature enables itself automatically for
those cases where the innermost query targets a non-unique
key.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">loading_toplevel</em> - includes an introduction to subquery
eager loading.</p>
</div>
</li>
<li><strong>doc</strong> &#8211; docstring which will be applied to the resulting descriptor.</li>
<li><strong>extension</strong> &#8211; <p>an <tt class="xref py py-class docutils literal"><span class="pre">AttributeExtension</span></tt> instance, or list of extensions,
which will be prepended to the list of attribute listeners for
the resulting descriptor placed on the class.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.7: </span>Please see <tt class="xref py py-class docutils literal"><span class="pre">AttributeEvents</span></tt>.</p>
</div>
</li>
<li><strong>foreign_keys</strong> &#8211; <p>a list of columns which are to be used as &#8220;foreign key&#8221;
columns, or columns which refer to the value in a remote
column, within the context of this <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
object&#8217;s <a href="#id125"><span class="problematic" id="id126">:paramref:`~.relationship.primaryjoin`</span></a> condition.
That is, if the <a href="#id127"><span class="problematic" id="id128">:paramref:`~.relationship.primaryjoin`</span></a>
condition of this <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">a.id</span> <span class="pre">==</span>
<span class="pre">b.a_id</span></tt>, and the values in <tt class="docutils literal"><span class="pre">b.a_id</span></tt> are required to be
present in <tt class="docutils literal"><span class="pre">a.id</span></tt>, then the &#8220;foreign key&#8221; column of this
<a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">b.a_id</span></tt>.</p>
<p>In normal cases, the <a href="#id129"><span class="problematic" id="id130">:paramref:`~.relationship.foreign_keys`</span></a>
parameter is <strong>not required.</strong> <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> will
automatically determine which columns in the
<a href="#id131"><span class="problematic" id="id132">:paramref:`~.relationship.primaryjoin`</span></a> conditition are to be
considered &#8220;foreign key&#8221; columns based on those
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects that specify <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt>,
or are otherwise listed as referencing columns in a
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt> construct.
<a href="#id133"><span class="problematic" id="id134">:paramref:`~.relationship.foreign_keys`</span></a> is only needed when:</p>
<blockquote>
<div><ol class="arabic">
<li>There is more than one way to construct a join from the local
table to the remote table, as there are multiple foreign key
references present.  Setting <tt class="docutils literal"><span class="pre">foreign_keys</span></tt> will limit the
<a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> to consider just those columns specified
here as &#8220;foreign&#8221;.<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>A multiple-foreign key join ambiguity can be resolved by
setting the <a href="#id135"><span class="problematic" id="id136">:paramref:`~.relationship.foreign_keys`</span></a> parameter alone, without the
need to explicitly set <a href="#id137"><span class="problematic" id="id138">:paramref:`~.relationship.primaryjoin`</span></a> as well.</p>
</div>
</li>
<li>The <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> being mapped does not actually have
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt>
constructs present, often because the table
was reflected from a database that does not support foreign key
reflection (MySQL MyISAM).</li>
<li>The <a href="#id139"><span class="problematic" id="id140">:paramref:`~.relationship.primaryjoin`</span></a> argument is used to construct a non-standard
join condition, which makes use of columns or expressions that do
not normally refer to their &#8220;parent&#8221; column, such as a join condition
expressed by a complex comparison using a SQL function.</li>
</ol>
</div></blockquote>
<p>The <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct will raise informative
error messages that suggest the use of the
<a href="#id141"><span class="problematic" id="id142">:paramref:`~.relationship.foreign_keys`</span></a> parameter when
presented with an ambiguous condition.   In typical cases,
if <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> doesn&#8217;t raise any exceptions, the
<a href="#id143"><span class="problematic" id="id144">:paramref:`~.relationship.foreign_keys`</span></a> parameter is usually
not needed.</p>
<p><a href="#id145"><span class="problematic" id="id146">:paramref:`~.relationship.foreign_keys`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_foreign_keys</em></p>
<p><em class="xref std std-ref">relationship_custom_foreign</em></p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> - allows direct annotation of the &#8220;foreign&#8221; columns
within a <a href="#id147"><span class="problematic" id="id148">:paramref:`~.relationship.primaryjoin`</span></a> condition.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> annotation can also be applied
directly to the <a href="#id149"><span class="problematic" id="id150">:paramref:`~.relationship.primaryjoin`</span></a> expression, which is an alternate,
more specific system of describing which columns in a particular
<a href="#id151"><span class="problematic" id="id152">:paramref:`~.relationship.primaryjoin`</span></a> should be considered &#8220;foreign&#8221;.</p>
</div>
</li>
<li><strong>info</strong> &#8211; <p>Optional data dictionary which will be populated into the
<tt class="xref py py-attr docutils literal"><span class="pre">MapperProperty.info</span></tt> attribute of this object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</li>
<li><strong>innerjoin=False</strong> &#8211; <p>when <tt class="docutils literal"><span class="pre">True</span></tt>, joined eager loads will use an inner join to join
against related tables instead of an outer join.  The purpose
of this option is generally one of performance, as inner joins
generally perform better than outer joins.</p>
<p>This flag can be set to <tt class="docutils literal"><span class="pre">True</span></tt> when the relationship references an
object via many-to-one using local foreign keys that are not nullable,
or when the reference is one-to-one or a collection that is guaranteed
to have one or at least one entry.</p>
<p>If the joined-eager load is chained onto an existing LEFT OUTER JOIN,
<tt class="docutils literal"><span class="pre">innerjoin=True</span></tt> will be bypassed and the join will continue to
chain as LEFT OUTER JOIN so that the results don&#8217;t change.  As an alternative,
specify the value <tt class="docutils literal"><span class="pre">&quot;nested&quot;</span></tt>.  This will instead nest the join
on the right side, e.g. using the form &#8220;a LEFT OUTER JOIN (b JOIN c)&#8221;.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.4: </span>Added <tt class="docutils literal"><span class="pre">innerjoin=&quot;nested&quot;</span></tt> option to support
nesting of eager &#8220;inner&#8221; joins.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">what_kind_of_loading</em> - Discussion of some details of
various loader options.</p>
<p class="last"><a href="#id153"><span class="problematic" id="id154">:paramref:`.joinedload.innerjoin`</span></a> - loader option version</p>
</div>
</li>
<li><strong>join_depth</strong> &#8211; <p>when non-<tt class="docutils literal"><span class="pre">None</span></tt>, an integer value indicating how many levels
deep &#8220;eager&#8221; loaders should join on a self-referring or cyclical
relationship.  The number counts how many times the same Mapper
shall be present in the loading condition along a particular join
branch.  When left at its default of <tt class="docutils literal"><span class="pre">None</span></tt>, eager loaders
will stop chaining when they encounter a the same target mapper
which is already higher up in the chain.  This option applies
both to joined- and subquery- eager loaders.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">self_referential_eager_loading</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>lazy=&#8217;select&#8217;</strong> &#8211; <p>specifies
how the related items should be loaded.  Default value is
<tt class="docutils literal"><span class="pre">select</span></tt>.  Values include:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">select</span></tt> - items should be loaded lazily when the property is first
accessed, using a separate SELECT statement, or identity map
fetch for simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">immediate</span></tt> - items should be loaded as the parents are loaded,
using a separate SELECT statement, or identity map fetch for
simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">joined</span></tt> - items should be loaded &#8220;eagerly&#8221; in the same query as
that of the parent, using a JOIN or LEFT OUTER JOIN.  Whether
the join is &#8220;outer&#8221; or not is determined by the
<a href="#id155"><span class="problematic" id="id156">:paramref:`~.relationship.innerjoin`</span></a> parameter.</li>
<li><tt class="docutils literal"><span class="pre">subquery</span></tt> - items should be loaded &#8220;eagerly&#8221; as the parents are
loaded, using one additional SQL statement, which issues a JOIN to a
subquery of the original statement, for each collection requested.</li>
<li><tt class="docutils literal"><span class="pre">noload</span></tt> - no loading should occur at any time.  This is to
support &#8220;write-only&#8221; attributes, or attributes which are
populated in some manner specific to the application.</li>
<li><tt class="docutils literal"><span class="pre">dynamic</span></tt> - the attribute will return a pre-configured
<a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object for all read
operations, onto which further filtering operations can be
applied before iterating the results.  See
the section <em class="xref std std-ref">dynamic_relationship</em> for more details.</li>
<li>True - a synonym for &#8216;select&#8217;</li>
<li>False - a synonym for &#8216;joined&#8217;</li>
<li>None - a synonym for &#8216;noload&#8217;</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref doc docutils literal"><span class="pre">/orm/loading</span></tt> - Full documentation on relationship loader
configuration.</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - detail on the <tt class="docutils literal"><span class="pre">dynamic</span></tt> option.</p>
</div>
</li>
<li><strong>load_on_pending=False</strong> &#8211; <p>Indicates loading behavior for transient or pending parent objects.</p>
<p>When set to <tt class="docutils literal"><span class="pre">True</span></tt>, causes the lazy-loader to
issue a query for a parent object that is not persistent, meaning it has
never been flushed.  This may take effect for a pending object when
autoflush is disabled, or for a transient object that has been
&#8220;attached&#8221; to a <tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt> but is not part of its pending
collection.</p>
<p>The <a href="#id157"><span class="problematic" id="id158">:paramref:`~.relationship.load_on_pending`</span></a> flag does not improve behavior
when the ORM is used normally - object references should be constructed
at the object level, not at the foreign key level, so that they
are present in an ordinary way before a flush proceeds.  This flag
is not not intended for general use.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">Session.enable_relationship_loading()</span></tt> - this method establishes
&#8220;load on pending&#8221; behavior for the whole object, and also allows
loading on objects that remain transient or detached.</p>
</div>
</li>
<li><strong>order_by</strong> &#8211; <p>indicates the ordering that should be applied when loading these
items.  <a href="#id159"><span class="problematic" id="id160">:paramref:`~.relationship.order_by`</span></a> is expected to refer to one
of the <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects to which the target class is mapped, or
the attribute itself bound to the target class which refers
to the column.</p>
<p><a href="#id161"><span class="problematic" id="id162">:paramref:`~.relationship.order_by`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
</li>
<li><strong>passive_deletes=False</strong> &#8211; <p>Indicates loading behavior during delete operations.</p>
<p>A value of True indicates that unloaded child items should not
be loaded during a delete operation on the parent.  Normally,
when a parent item is deleted, all child items are loaded so
that they can either be marked as deleted, or have their
foreign key to the parent set to NULL.  Marking this flag as
True usually implies an ON DELETE &lt;CASCADE|SET NULL&gt; rule is in
place which will handle updating/deleting child rows on the
database side.</p>
<p>Additionally, setting the flag to the string value &#8216;all&#8217; will
disable the &#8220;nulling out&#8221; of the child foreign keys, when there
is no delete or delete-orphan cascade enabled.  This is
typically used when a triggering or error raise scenario is in
place on the database side.  Note that the foreign key
attributes on in-session child objects will not be changed
after a flush occurs so this is a very special use-case
setting.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">passive_deletes</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>passive_updates=True</strong> &#8211; <p>Indicates loading and INSERT/UPDATE/DELETE behavior when the
source of a foreign key value changes (i.e. an &#8220;on update&#8221;
cascade), which are typically the primary key columns of the
source row.</p>
<p>When True, it is assumed that ON UPDATE CASCADE is configured on
the foreign key in the database, and that the database will
handle propagation of an UPDATE from a source column to
dependent rows.  Note that with databases which enforce
referential integrity (i.e. PostgreSQL, MySQL with InnoDB tables),
ON UPDATE CASCADE is required for this operation.  The
relationship() will update the value of the attribute on related
items which are locally present in the session during a flush.</p>
<p>When False, it is assumed that the database does not enforce
referential integrity and will not be issuing its own CASCADE
operation for an update.  The relationship() will issue the
appropriate UPDATE statements to the database in response to the
change of a referenced key, and items locally present in the
session during a flush will also be refreshed.</p>
<p>This flag should probably be set to False if primary key changes
are expected and the database in use doesn&#8217;t support CASCADE
(i.e. SQLite, MySQL MyISAM tables).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">passive_updates</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id163"><span class="problematic" id="id164">:paramref:`.mapper.passive_updates`</span></a> - a similar flag which
takes effect for joined-table inheritance mappings.</p>
</div>
</li>
<li><strong>post_update</strong> &#8211; <p>this indicates that the relationship should be handled by a
second UPDATE statement after an INSERT or before a
DELETE. Currently, it also will issue an UPDATE after the
instance was UPDATEd as well, although this technically should
be improved. This flag is used to handle saving bi-directional
dependencies between two individual rows (i.e. each row
references the other), where it would otherwise be impossible to
INSERT or DELETE both rows fully since one row exists before the
other. Use this flag when a particular mapping arrangement will
incur two rows that are dependent on each other, such as a table
that has a one-to-many relationship to a set of child rows, and
also has a column that references a single child row within that
list (i.e. both tables contain a foreign key to each other). If
a flush operation returns an error that a &#8220;cyclical
dependency&#8221; was detected, this is a cue that you might want to
use <a href="#id165"><span class="problematic" id="id166">:paramref:`~.relationship.post_update`</span></a> to &#8220;break&#8221; the cycle.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">post_update</em> - Introductory documentation and examples.</p>
</div>
</li>
<li><strong>primaryjoin</strong> &#8211; <p>a SQL expression that will be used as the primary
join of this child object against the parent object, or in a
many-to-many relationship the join of the primary object to the
association table. By default, this value is computed based on the
foreign key relationships of the parent and child tables (or association
table).</p>
<p><a href="#id167"><span class="problematic" id="id168">:paramref:`~.relationship.primaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>remote_side</strong> &#8211; <p>used for self-referential relationships, indicates the column or
list of columns that form the &#8220;remote side&#8221; of the relationship.</p>
<p><a href="#id169"><span class="problematic" id="id170">:paramref:`.relationship.remote_side`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> annotation can also be applied
directly to the <tt class="docutils literal"><span class="pre">primaryjoin</span></tt> expression, which is an alternate,
more specific system of describing which columns in a particular
<tt class="docutils literal"><span class="pre">primaryjoin</span></tt> should be considered &#8220;remote&#8221;.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">self_referential</em> - in-depth explanation of how
<a href="#id171"><span class="problematic" id="id172">:paramref:`~.relationship.remote_side`</span></a>
is used to configure self-referential relationships.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> - an annotation function that accomplishes the same
purpose as <a href="#id173"><span class="problematic" id="id174">:paramref:`~.relationship.remote_side`</span></a>, typically
when a custom <a href="#id175"><span class="problematic" id="id176">:paramref:`~.relationship.primaryjoin`</span></a> condition
is used.</p>
</div>
</li>
<li><strong>query_class</strong> &#8211; <p>a <a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> subclass that will be used as the base of the
&#8220;appender query&#8221; returned by a &#8220;dynamic&#8221; relationship, that
is, a relationship that specifies <tt class="docutils literal"><span class="pre">lazy=&quot;dynamic&quot;</span></tt> or was
otherwise constructed using the <tt class="xref py py-func docutils literal"><span class="pre">orm.dynamic_loader()</span></tt>
function.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - Introduction to &#8220;dynamic&#8221; relationship
loaders.</p>
</div>
</li>
<li><strong>secondaryjoin</strong> &#8211; <p>a SQL expression that will be used as the join of
an association table to the child object. By default, this value is
computed based on the foreign key relationships of the association and
child tables.</p>
<p><a href="#id177"><span class="problematic" id="id178">:paramref:`~.relationship.secondaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>single_parent</strong> &#8211; <p>when True, installs a validator which will prevent objects
from being associated with more than one parent at a time.
This is used for many-to-one or many-to-many relationships that
should be treated either as one-to-one or one-to-many.  Its usage
is optional, except for <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> constructs which
are many-to-one or many-to-many and also
specify the <tt class="docutils literal"><span class="pre">delete-orphan</span></tt> cascade option.  The <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
construct itself will raise an error instructing when this option
is required.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">unitofwork_cascades</em> - includes detail on when the
<a href="#id179"><span class="problematic" id="id180">:paramref:`~.relationship.single_parent`</span></a> flag may be appropriate.</p>
</div>
</li>
<li><strong>uselist</strong> &#8211; <p>a boolean that indicates if this property should be loaded as a
list or a scalar. In most cases, this value is determined
automatically by <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> at mapper configuration
time, based on the type and direction
of the relationship - one to many forms a list, many to one
forms a scalar, many to many is a list. If a scalar is desired
where normally a list would be present, such as a bi-directional
one-to-one relationship, set <a href="#id181"><span class="problematic" id="id182">:paramref:`~.relationship.uselist`</span></a> to False.</p>
<p>The <a href="#id183"><span class="problematic" id="id184">:paramref:`~.relationship.uselist`</span></a> flag is also available on an
existing <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct as a read-only attribute, which
can be used to determine if this <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> deals with
collections or scalar attributes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">uselist</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationships_one_to_one</em> - Introduction to the &#8220;one to one&#8221;
relationship pattern, which is typically when the
<a href="#id185"><span class="problematic" id="id186">:paramref:`~.relationship.uselist`</span></a> flag is needed.</p>
</div>
</li>
<li><strong>viewonly=False</strong> &#8211; when set to True, the relationship is used only for loading objects,
and not for any persistence operation.  A <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
which specifies <a href="#id187"><span class="problematic" id="id188">:paramref:`~.relationship.viewonly`</span></a> can work
with a wider range of SQL operations within the <a href="#id189"><span class="problematic" id="id190">:paramref:`~.relationship.primaryjoin`</span></a>
condition, including operations that feature the use of
a variety of comparison operators as well as SQL functions such
as <tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt>.  The <a href="#id191"><span class="problematic" id="id192">:paramref:`~.relationship.viewonly`</span></a>
flag is also of general use when defining any kind of <a class="reference internal" href="#api.models.picture.relationship" title="api.models.picture.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
that doesn&#8217;t represent the full set of related objects, to prevent
modifications of the collection from resulting in persistence operations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-api.models.picture_comment">
<span id="api-models-picture-comment-module"></span><h2>api.models.picture_comment module<a class="headerlink" href="#module-api.models.picture_comment" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.models.picture_comment.PictureComment">
<em class="property">class </em><tt class="descclassname">api.models.picture_comment.</tt><tt class="descname">PictureComment</tt><big>(</big><em>picture_id</em>, <em>user_id</em>, <em>comment</em><big>)</big><a class="reference internal" href="_modules/api/models/picture_comment.html#PictureComment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.picture_comment.PictureComment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></tt>, <a class="reference internal" href="#api.models.basemodel.Serializer" title="api.models.basemodel.Serializer"><tt class="xref py py-class docutils literal"><span class="pre">api.models.basemodel.Serializer</span></tt></a></p>
<dl class="attribute">
<dt id="api.models.picture_comment.PictureComment.comment">
<tt class="descname">comment</tt><a class="headerlink" href="#api.models.picture_comment.PictureComment.comment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_comment.PictureComment.id">
<tt class="descname">id</tt><a class="headerlink" href="#api.models.picture_comment.PictureComment.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_comment.PictureComment.picture_id">
<tt class="descname">picture_id</tt><a class="headerlink" href="#api.models.picture_comment.PictureComment.picture_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_comment.PictureComment.timestamp">
<tt class="descname">timestamp</tt><a class="headerlink" href="#api.models.picture_comment.PictureComment.timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="api.models.picture_comment.PictureComment.to_serializable_dict">
<tt class="descname">to_serializable_dict</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/api/models/picture_comment.html#PictureComment.to_serializable_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.picture_comment.PictureComment.to_serializable_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_comment.PictureComment.user">
<tt class="descname">user</tt><a class="headerlink" href="#api.models.picture_comment.PictureComment.user" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_comment.PictureComment.user_id">
<tt class="descname">user_id</tt><a class="headerlink" href="#api.models.picture_comment.PictureComment.user_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="api.models.picture_comment.relationship">
<tt class="descclassname">api.models.picture_comment.</tt><tt class="descname">relationship</tt><big>(</big><em>argument</em>, <em>secondary=None</em>, <em>primaryjoin=None</em>, <em>secondaryjoin=None</em>, <em>foreign_keys=None</em>, <em>uselist=None</em>, <em>order_by=False</em>, <em>backref=None</em>, <em>back_populates=None</em>, <em>post_update=False</em>, <em>cascade=False</em>, <em>extension=None</em>, <em>viewonly=False</em>, <em>lazy=True</em>, <em>collection_class=None</em>, <em>passive_deletes=False</em>, <em>passive_updates=True</em>, <em>remote_side=None</em>, <em>enable_typechecks=True</em>, <em>join_depth=None</em>, <em>comparator_factory=None</em>, <em>single_parent=False</em>, <em>innerjoin=False</em>, <em>distinct_target_key=None</em>, <em>doc=None</em>, <em>active_history=False</em>, <em>cascade_backrefs=True</em>, <em>load_on_pending=False</em>, <em>strategy_class=None</em>, <em>_local_remote_pairs=None</em>, <em>query_class=None</em>, <em>info=None</em><big>)</big><a class="headerlink" href="#api.models.picture_comment.relationship" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a relationship between two mapped classes.</p>
<p>This corresponds to a parent-child or associative table relationship.  The
constructed class is an instance of <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty</span></tt>.</p>
<p>A typical <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>, used in a classical mapping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
  <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Child</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Some arguments accepted by <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> optionally accept a
callable function, which when called produces the desired value.
The callable is invoked by the parent <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> at &#8220;mapper
initialization&#8221; time, which happens only when mappers are first used, and
is assumed to be after all mappings have been constructed.  This can be
used to resolve order-of-declaration and other dependency issues, such as
if <tt class="docutils literal"><span class="pre">Child</span></tt> is declared below <tt class="docutils literal"><span class="pre">Parent</span></tt> in the same file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&quot;children&quot;</span><span class="p">:</span><span class="n">relationship</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="p">,</span>
                        <span class="n">order_by</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>When using the <em class="xref std std-ref">declarative_toplevel</em> extension, the Declarative
initializer allows string arguments to be passed to <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.
These string arguments are converted into callables that evaluate
the string as Python code, using the Declarative
class-registry as a namespace.  This allows the lookup of related
classes to be automatic via their string name, and removes the need to
import related classes at all into the local module space:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;parent&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Child&quot;</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&quot;Child.id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_config_toplevel</em> - Full introductory and reference
documentation for <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.</p>
<p class="last"><em class="xref std std-ref">orm_tutorial_relationship</em> - ORM tutorial introduction.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>argument</strong> &#8211; <p>a mapped class, or actual <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> instance, representing the
target of the relationship.</p>
<p><a href="#id193"><span class="problematic" id="id194">:paramref:`~.relationship.argument`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">declarative_configuring_relationships</em> - further detail
on relationship configuration when using Declarative.</p>
</div>
</li>
<li><strong>secondary</strong> &#8211; <p>for a many-to-many relationship, specifies the intermediary
table, and is typically an instance of <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.
In less common circumstances, the argument may also be specified
as an <tt class="xref py py-class docutils literal"><span class="pre">Alias</span></tt> construct, or even a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> construct.</p>
<p><a href="#id195"><span class="problematic" id="id196">:paramref:`~.relationship.secondary`</span></a> may
also be passed as a callable function which is evaluated at
mapper initialization time.  When using Declarative, it may also
be a string argument noting the name of a <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> that is
present in the <tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt> collection associated with the
parent-mapped <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
<p>The <a href="#id197"><span class="problematic" id="id198">:paramref:`~.relationship.secondary`</span></a> keyword argument is typically
applied in the case where the intermediary <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> is not
otherwise exprssed in any direct class mapping. If the &#8220;secondary&#8221; table
is also explicitly mapped elsewhere
(e.g. as in <em class="xref std std-ref">association_pattern</em>), one should consider applying
the <a href="#id199"><span class="problematic" id="id200">:paramref:`~.relationship.viewonly`</span></a> flag so that this <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
is not used for persistence operations which may conflict with those
of the association object pattern.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_many_to_many</em> - Reference example of &#8220;many to many&#8221;.</p>
<p><em class="xref std std-ref">orm_tutorial_many_to_many</em> - ORM tutorial introduction to
many-to-many relationships.</p>
<p><em class="xref std std-ref">self_referential_many_to_many</em> - Specifics on using many-to-many
in a self-referential case.</p>
<p><em class="xref std std-ref">declarative_many_to_many</em> - Additional options when using
Declarative.</p>
<p><em class="xref std std-ref">association_pattern</em> - an alternative to <a href="#id201"><span class="problematic" id="id202">:paramref:`~.relationship.secondary`</span></a>
when composing association table relationships, allowing additional
attributes to be specified on the association table.</p>
<p class="last"><em class="xref std std-ref">composite_secondary_join</em> - a lesser-used pattern which in some
cases can enable complex <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> SQL conditions
to be used.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.2: </span><a href="#id203"><span class="problematic" id="id204">:paramref:`~.relationship.secondary`</span></a> works
more effectively when referring to a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> instance.</p>
</div>
</li>
<li><strong>active_history=False</strong> &#8211; When <tt class="docutils literal"><span class="pre">True</span></tt>, indicates that the &#8220;previous&#8221; value for a
many-to-one reference should be loaded when replaced, if
not already loaded. Normally, history tracking logic for
simple many-to-ones only needs to be aware of the &#8220;new&#8221;
value in order to perform a flush. This flag is available
for applications that make use of
<tt class="xref py py-func docutils literal"><span class="pre">attributes.get_history()</span></tt> which also need to know
the &#8220;previous&#8221; value of the attribute.</li>
<li><strong>backref</strong> &#8211; <p>indicates the string name of a property to be placed on the related
mapper&#8217;s class that will handle this relationship in the other
direction. The other property will be created automatically
when the mappers are configured.  Can also be passed as a
<tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> object to control the configuration of the
new relationship.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p><a href="#id205"><span class="problematic" id="id206">:paramref:`~.relationship.back_populates`</span></a> - alternative form
of backref specification.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> - allows control over <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
configuration when using <a href="#id207"><span class="problematic" id="id208">:paramref:`~.relationship.backref`</span></a>.</p>
</div>
</li>
<li><strong>back_populates</strong> &#8211; <p>Takes a string name and has the same meaning as <a href="#id209"><span class="problematic" id="id210">:paramref:`~.relationship.backref`</span></a>,
except the complementing property is <strong>not</strong> created automatically,
and instead must be configured explicitly on the other mapper.  The
complementing property should also indicate <a href="#id211"><span class="problematic" id="id212">:paramref:`~.relationship.back_populates`</span></a>
to this relationship to ensure proper functioning.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id213"><span class="problematic" id="id214">:paramref:`~.relationship.backref`</span></a> - alternative form
of backref specification.</p>
</div>
</li>
<li><strong>cascade</strong> &#8211; <p>a comma-separated list of cascade rules which determines how
Session operations should be &#8220;cascaded&#8221; from parent to child.
This defaults to <tt class="docutils literal"><span class="pre">False</span></tt>, which means the default cascade
should be used - this default cascade is <tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge&quot;</span></tt>.</p>
<p>The available cascades are <tt class="docutils literal"><span class="pre">save-update</span></tt>, <tt class="docutils literal"><span class="pre">merge</span></tt>,
<tt class="docutils literal"><span class="pre">expunge</span></tt>, <tt class="docutils literal"><span class="pre">delete</span></tt>, <tt class="docutils literal"><span class="pre">delete-orphan</span></tt>, and <tt class="docutils literal"><span class="pre">refresh-expire</span></tt>.
An additional option, <tt class="docutils literal"><span class="pre">all</span></tt> indicates shorthand for
<tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge,</span> <span class="pre">refresh-expire,</span>
<span class="pre">expunge,</span> <span class="pre">delete&quot;</span></tt>, and is often used as in <tt class="docutils literal"><span class="pre">&quot;all,</span> <span class="pre">delete-orphan&quot;</span></tt>
to indicate that related objects should follow along with the
parent object in all cases, and be deleted when de-associated.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">unitofwork_cascades</em> - Full detail on each of the available
cascade options.</p>
<p class="last"><em class="xref std std-ref">tutorial_delete_cascade</em> - Tutorial example describing
a delete cascade.</p>
</div>
</li>
<li><strong>cascade_backrefs=True</strong> &#8211; <p>a boolean value indicating if the <tt class="docutils literal"><span class="pre">save-update</span></tt> cascade should
operate along an assignment event intercepted by a backref.
When set to <tt class="docutils literal"><span class="pre">False</span></tt>, the attribute managed by this relationship
will not cascade an incoming transient object into the session of a
persistent parent, if the event is received via backref.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">backref_cascade</em> - Full discussion and examples on how
the <a href="#id215"><span class="problematic" id="id216">:paramref:`~.relationship.cascade_backrefs`</span></a> option is used.</p>
</div>
</li>
<li><strong>collection_class</strong> &#8211; <p>a class or callable that returns a new list-holding object. will
be used in place of a plain list for storing elements.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">custom_collections</em> - Introductory documentation and
examples.</p>
</div>
</li>
<li><strong>comparator_factory</strong> &#8211; <p>a class which extends <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty.Comparator</span></tt> which
provides custom SQL clause generation for comparison operations.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">PropComparator</span></tt> - some detail on redefining comparators
at this level.</p>
<p class="last"><em class="xref std std-ref">custom_comparators</em> - Brief intro to this feature.</p>
</div>
</li>
<li><strong>distinct_target_key=None</strong> &#8211; <p>Indicate if a &#8220;subquery&#8221; eager load should apply the DISTINCT
keyword to the innermost SELECT statement.  When left as <tt class="docutils literal"><span class="pre">None</span></tt>,
the DISTINCT keyword will be applied in those cases when the target
columns do not comprise the full primary key of the target table.
When set to <tt class="docutils literal"><span class="pre">True</span></tt>, the DISTINCT keyword is applied to the innermost
SELECT unconditionally.</p>
<p>It may be desirable to set this flag to False when the DISTINCT is
reducing performance of the innermost subquery beyond that of what
duplicate innermost rows may be causing.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.3: </span>- <a href="#id217"><span class="problematic" id="id218">:paramref:`~.relationship.distinct_target_key`</span></a>
allows the
subquery eager loader to apply a DISTINCT modifier to the
innermost SELECT.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span>- <a href="#id219"><span class="problematic" id="id220">:paramref:`~.relationship.distinct_target_key`</span></a>
now defaults to <tt class="docutils literal"><span class="pre">None</span></tt>, so that the feature enables itself automatically for
those cases where the innermost query targets a non-unique
key.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">loading_toplevel</em> - includes an introduction to subquery
eager loading.</p>
</div>
</li>
<li><strong>doc</strong> &#8211; docstring which will be applied to the resulting descriptor.</li>
<li><strong>extension</strong> &#8211; <p>an <tt class="xref py py-class docutils literal"><span class="pre">AttributeExtension</span></tt> instance, or list of extensions,
which will be prepended to the list of attribute listeners for
the resulting descriptor placed on the class.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.7: </span>Please see <tt class="xref py py-class docutils literal"><span class="pre">AttributeEvents</span></tt>.</p>
</div>
</li>
<li><strong>foreign_keys</strong> &#8211; <p>a list of columns which are to be used as &#8220;foreign key&#8221;
columns, or columns which refer to the value in a remote
column, within the context of this <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
object&#8217;s <a href="#id221"><span class="problematic" id="id222">:paramref:`~.relationship.primaryjoin`</span></a> condition.
That is, if the <a href="#id223"><span class="problematic" id="id224">:paramref:`~.relationship.primaryjoin`</span></a>
condition of this <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">a.id</span> <span class="pre">==</span>
<span class="pre">b.a_id</span></tt>, and the values in <tt class="docutils literal"><span class="pre">b.a_id</span></tt> are required to be
present in <tt class="docutils literal"><span class="pre">a.id</span></tt>, then the &#8220;foreign key&#8221; column of this
<a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">b.a_id</span></tt>.</p>
<p>In normal cases, the <a href="#id225"><span class="problematic" id="id226">:paramref:`~.relationship.foreign_keys`</span></a>
parameter is <strong>not required.</strong> <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> will
automatically determine which columns in the
<a href="#id227"><span class="problematic" id="id228">:paramref:`~.relationship.primaryjoin`</span></a> conditition are to be
considered &#8220;foreign key&#8221; columns based on those
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects that specify <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt>,
or are otherwise listed as referencing columns in a
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt> construct.
<a href="#id229"><span class="problematic" id="id230">:paramref:`~.relationship.foreign_keys`</span></a> is only needed when:</p>
<blockquote>
<div><ol class="arabic">
<li>There is more than one way to construct a join from the local
table to the remote table, as there are multiple foreign key
references present.  Setting <tt class="docutils literal"><span class="pre">foreign_keys</span></tt> will limit the
<a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> to consider just those columns specified
here as &#8220;foreign&#8221;.<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>A multiple-foreign key join ambiguity can be resolved by
setting the <a href="#id231"><span class="problematic" id="id232">:paramref:`~.relationship.foreign_keys`</span></a> parameter alone, without the
need to explicitly set <a href="#id233"><span class="problematic" id="id234">:paramref:`~.relationship.primaryjoin`</span></a> as well.</p>
</div>
</li>
<li>The <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> being mapped does not actually have
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt>
constructs present, often because the table
was reflected from a database that does not support foreign key
reflection (MySQL MyISAM).</li>
<li>The <a href="#id235"><span class="problematic" id="id236">:paramref:`~.relationship.primaryjoin`</span></a> argument is used to construct a non-standard
join condition, which makes use of columns or expressions that do
not normally refer to their &#8220;parent&#8221; column, such as a join condition
expressed by a complex comparison using a SQL function.</li>
</ol>
</div></blockquote>
<p>The <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct will raise informative
error messages that suggest the use of the
<a href="#id237"><span class="problematic" id="id238">:paramref:`~.relationship.foreign_keys`</span></a> parameter when
presented with an ambiguous condition.   In typical cases,
if <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> doesn&#8217;t raise any exceptions, the
<a href="#id239"><span class="problematic" id="id240">:paramref:`~.relationship.foreign_keys`</span></a> parameter is usually
not needed.</p>
<p><a href="#id241"><span class="problematic" id="id242">:paramref:`~.relationship.foreign_keys`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_foreign_keys</em></p>
<p><em class="xref std std-ref">relationship_custom_foreign</em></p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> - allows direct annotation of the &#8220;foreign&#8221; columns
within a <a href="#id243"><span class="problematic" id="id244">:paramref:`~.relationship.primaryjoin`</span></a> condition.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> annotation can also be applied
directly to the <a href="#id245"><span class="problematic" id="id246">:paramref:`~.relationship.primaryjoin`</span></a> expression, which is an alternate,
more specific system of describing which columns in a particular
<a href="#id247"><span class="problematic" id="id248">:paramref:`~.relationship.primaryjoin`</span></a> should be considered &#8220;foreign&#8221;.</p>
</div>
</li>
<li><strong>info</strong> &#8211; <p>Optional data dictionary which will be populated into the
<tt class="xref py py-attr docutils literal"><span class="pre">MapperProperty.info</span></tt> attribute of this object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</li>
<li><strong>innerjoin=False</strong> &#8211; <p>when <tt class="docutils literal"><span class="pre">True</span></tt>, joined eager loads will use an inner join to join
against related tables instead of an outer join.  The purpose
of this option is generally one of performance, as inner joins
generally perform better than outer joins.</p>
<p>This flag can be set to <tt class="docutils literal"><span class="pre">True</span></tt> when the relationship references an
object via many-to-one using local foreign keys that are not nullable,
or when the reference is one-to-one or a collection that is guaranteed
to have one or at least one entry.</p>
<p>If the joined-eager load is chained onto an existing LEFT OUTER JOIN,
<tt class="docutils literal"><span class="pre">innerjoin=True</span></tt> will be bypassed and the join will continue to
chain as LEFT OUTER JOIN so that the results don&#8217;t change.  As an alternative,
specify the value <tt class="docutils literal"><span class="pre">&quot;nested&quot;</span></tt>.  This will instead nest the join
on the right side, e.g. using the form &#8220;a LEFT OUTER JOIN (b JOIN c)&#8221;.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.4: </span>Added <tt class="docutils literal"><span class="pre">innerjoin=&quot;nested&quot;</span></tt> option to support
nesting of eager &#8220;inner&#8221; joins.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">what_kind_of_loading</em> - Discussion of some details of
various loader options.</p>
<p class="last"><a href="#id249"><span class="problematic" id="id250">:paramref:`.joinedload.innerjoin`</span></a> - loader option version</p>
</div>
</li>
<li><strong>join_depth</strong> &#8211; <p>when non-<tt class="docutils literal"><span class="pre">None</span></tt>, an integer value indicating how many levels
deep &#8220;eager&#8221; loaders should join on a self-referring or cyclical
relationship.  The number counts how many times the same Mapper
shall be present in the loading condition along a particular join
branch.  When left at its default of <tt class="docutils literal"><span class="pre">None</span></tt>, eager loaders
will stop chaining when they encounter a the same target mapper
which is already higher up in the chain.  This option applies
both to joined- and subquery- eager loaders.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">self_referential_eager_loading</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>lazy=&#8217;select&#8217;</strong> &#8211; <p>specifies
how the related items should be loaded.  Default value is
<tt class="docutils literal"><span class="pre">select</span></tt>.  Values include:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">select</span></tt> - items should be loaded lazily when the property is first
accessed, using a separate SELECT statement, or identity map
fetch for simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">immediate</span></tt> - items should be loaded as the parents are loaded,
using a separate SELECT statement, or identity map fetch for
simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">joined</span></tt> - items should be loaded &#8220;eagerly&#8221; in the same query as
that of the parent, using a JOIN or LEFT OUTER JOIN.  Whether
the join is &#8220;outer&#8221; or not is determined by the
<a href="#id251"><span class="problematic" id="id252">:paramref:`~.relationship.innerjoin`</span></a> parameter.</li>
<li><tt class="docutils literal"><span class="pre">subquery</span></tt> - items should be loaded &#8220;eagerly&#8221; as the parents are
loaded, using one additional SQL statement, which issues a JOIN to a
subquery of the original statement, for each collection requested.</li>
<li><tt class="docutils literal"><span class="pre">noload</span></tt> - no loading should occur at any time.  This is to
support &#8220;write-only&#8221; attributes, or attributes which are
populated in some manner specific to the application.</li>
<li><tt class="docutils literal"><span class="pre">dynamic</span></tt> - the attribute will return a pre-configured
<a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object for all read
operations, onto which further filtering operations can be
applied before iterating the results.  See
the section <em class="xref std std-ref">dynamic_relationship</em> for more details.</li>
<li>True - a synonym for &#8216;select&#8217;</li>
<li>False - a synonym for &#8216;joined&#8217;</li>
<li>None - a synonym for &#8216;noload&#8217;</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref doc docutils literal"><span class="pre">/orm/loading</span></tt> - Full documentation on relationship loader
configuration.</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - detail on the <tt class="docutils literal"><span class="pre">dynamic</span></tt> option.</p>
</div>
</li>
<li><strong>load_on_pending=False</strong> &#8211; <p>Indicates loading behavior for transient or pending parent objects.</p>
<p>When set to <tt class="docutils literal"><span class="pre">True</span></tt>, causes the lazy-loader to
issue a query for a parent object that is not persistent, meaning it has
never been flushed.  This may take effect for a pending object when
autoflush is disabled, or for a transient object that has been
&#8220;attached&#8221; to a <tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt> but is not part of its pending
collection.</p>
<p>The <a href="#id253"><span class="problematic" id="id254">:paramref:`~.relationship.load_on_pending`</span></a> flag does not improve behavior
when the ORM is used normally - object references should be constructed
at the object level, not at the foreign key level, so that they
are present in an ordinary way before a flush proceeds.  This flag
is not not intended for general use.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">Session.enable_relationship_loading()</span></tt> - this method establishes
&#8220;load on pending&#8221; behavior for the whole object, and also allows
loading on objects that remain transient or detached.</p>
</div>
</li>
<li><strong>order_by</strong> &#8211; <p>indicates the ordering that should be applied when loading these
items.  <a href="#id255"><span class="problematic" id="id256">:paramref:`~.relationship.order_by`</span></a> is expected to refer to one
of the <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects to which the target class is mapped, or
the attribute itself bound to the target class which refers
to the column.</p>
<p><a href="#id257"><span class="problematic" id="id258">:paramref:`~.relationship.order_by`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
</li>
<li><strong>passive_deletes=False</strong> &#8211; <p>Indicates loading behavior during delete operations.</p>
<p>A value of True indicates that unloaded child items should not
be loaded during a delete operation on the parent.  Normally,
when a parent item is deleted, all child items are loaded so
that they can either be marked as deleted, or have their
foreign key to the parent set to NULL.  Marking this flag as
True usually implies an ON DELETE &lt;CASCADE|SET NULL&gt; rule is in
place which will handle updating/deleting child rows on the
database side.</p>
<p>Additionally, setting the flag to the string value &#8216;all&#8217; will
disable the &#8220;nulling out&#8221; of the child foreign keys, when there
is no delete or delete-orphan cascade enabled.  This is
typically used when a triggering or error raise scenario is in
place on the database side.  Note that the foreign key
attributes on in-session child objects will not be changed
after a flush occurs so this is a very special use-case
setting.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">passive_deletes</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>passive_updates=True</strong> &#8211; <p>Indicates loading and INSERT/UPDATE/DELETE behavior when the
source of a foreign key value changes (i.e. an &#8220;on update&#8221;
cascade), which are typically the primary key columns of the
source row.</p>
<p>When True, it is assumed that ON UPDATE CASCADE is configured on
the foreign key in the database, and that the database will
handle propagation of an UPDATE from a source column to
dependent rows.  Note that with databases which enforce
referential integrity (i.e. PostgreSQL, MySQL with InnoDB tables),
ON UPDATE CASCADE is required for this operation.  The
relationship() will update the value of the attribute on related
items which are locally present in the session during a flush.</p>
<p>When False, it is assumed that the database does not enforce
referential integrity and will not be issuing its own CASCADE
operation for an update.  The relationship() will issue the
appropriate UPDATE statements to the database in response to the
change of a referenced key, and items locally present in the
session during a flush will also be refreshed.</p>
<p>This flag should probably be set to False if primary key changes
are expected and the database in use doesn&#8217;t support CASCADE
(i.e. SQLite, MySQL MyISAM tables).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">passive_updates</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id259"><span class="problematic" id="id260">:paramref:`.mapper.passive_updates`</span></a> - a similar flag which
takes effect for joined-table inheritance mappings.</p>
</div>
</li>
<li><strong>post_update</strong> &#8211; <p>this indicates that the relationship should be handled by a
second UPDATE statement after an INSERT or before a
DELETE. Currently, it also will issue an UPDATE after the
instance was UPDATEd as well, although this technically should
be improved. This flag is used to handle saving bi-directional
dependencies between two individual rows (i.e. each row
references the other), where it would otherwise be impossible to
INSERT or DELETE both rows fully since one row exists before the
other. Use this flag when a particular mapping arrangement will
incur two rows that are dependent on each other, such as a table
that has a one-to-many relationship to a set of child rows, and
also has a column that references a single child row within that
list (i.e. both tables contain a foreign key to each other). If
a flush operation returns an error that a &#8220;cyclical
dependency&#8221; was detected, this is a cue that you might want to
use <a href="#id261"><span class="problematic" id="id262">:paramref:`~.relationship.post_update`</span></a> to &#8220;break&#8221; the cycle.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">post_update</em> - Introductory documentation and examples.</p>
</div>
</li>
<li><strong>primaryjoin</strong> &#8211; <p>a SQL expression that will be used as the primary
join of this child object against the parent object, or in a
many-to-many relationship the join of the primary object to the
association table. By default, this value is computed based on the
foreign key relationships of the parent and child tables (or association
table).</p>
<p><a href="#id263"><span class="problematic" id="id264">:paramref:`~.relationship.primaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>remote_side</strong> &#8211; <p>used for self-referential relationships, indicates the column or
list of columns that form the &#8220;remote side&#8221; of the relationship.</p>
<p><a href="#id265"><span class="problematic" id="id266">:paramref:`.relationship.remote_side`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> annotation can also be applied
directly to the <tt class="docutils literal"><span class="pre">primaryjoin</span></tt> expression, which is an alternate,
more specific system of describing which columns in a particular
<tt class="docutils literal"><span class="pre">primaryjoin</span></tt> should be considered &#8220;remote&#8221;.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">self_referential</em> - in-depth explanation of how
<a href="#id267"><span class="problematic" id="id268">:paramref:`~.relationship.remote_side`</span></a>
is used to configure self-referential relationships.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> - an annotation function that accomplishes the same
purpose as <a href="#id269"><span class="problematic" id="id270">:paramref:`~.relationship.remote_side`</span></a>, typically
when a custom <a href="#id271"><span class="problematic" id="id272">:paramref:`~.relationship.primaryjoin`</span></a> condition
is used.</p>
</div>
</li>
<li><strong>query_class</strong> &#8211; <p>a <a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> subclass that will be used as the base of the
&#8220;appender query&#8221; returned by a &#8220;dynamic&#8221; relationship, that
is, a relationship that specifies <tt class="docutils literal"><span class="pre">lazy=&quot;dynamic&quot;</span></tt> or was
otherwise constructed using the <tt class="xref py py-func docutils literal"><span class="pre">orm.dynamic_loader()</span></tt>
function.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - Introduction to &#8220;dynamic&#8221; relationship
loaders.</p>
</div>
</li>
<li><strong>secondaryjoin</strong> &#8211; <p>a SQL expression that will be used as the join of
an association table to the child object. By default, this value is
computed based on the foreign key relationships of the association and
child tables.</p>
<p><a href="#id273"><span class="problematic" id="id274">:paramref:`~.relationship.secondaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>single_parent</strong> &#8211; <p>when True, installs a validator which will prevent objects
from being associated with more than one parent at a time.
This is used for many-to-one or many-to-many relationships that
should be treated either as one-to-one or one-to-many.  Its usage
is optional, except for <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> constructs which
are many-to-one or many-to-many and also
specify the <tt class="docutils literal"><span class="pre">delete-orphan</span></tt> cascade option.  The <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
construct itself will raise an error instructing when this option
is required.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">unitofwork_cascades</em> - includes detail on when the
<a href="#id275"><span class="problematic" id="id276">:paramref:`~.relationship.single_parent`</span></a> flag may be appropriate.</p>
</div>
</li>
<li><strong>uselist</strong> &#8211; <p>a boolean that indicates if this property should be loaded as a
list or a scalar. In most cases, this value is determined
automatically by <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> at mapper configuration
time, based on the type and direction
of the relationship - one to many forms a list, many to one
forms a scalar, many to many is a list. If a scalar is desired
where normally a list would be present, such as a bi-directional
one-to-one relationship, set <a href="#id277"><span class="problematic" id="id278">:paramref:`~.relationship.uselist`</span></a> to False.</p>
<p>The <a href="#id279"><span class="problematic" id="id280">:paramref:`~.relationship.uselist`</span></a> flag is also available on an
existing <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct as a read-only attribute, which
can be used to determine if this <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> deals with
collections or scalar attributes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">uselist</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationships_one_to_one</em> - Introduction to the &#8220;one to one&#8221;
relationship pattern, which is typically when the
<a href="#id281"><span class="problematic" id="id282">:paramref:`~.relationship.uselist`</span></a> flag is needed.</p>
</div>
</li>
<li><strong>viewonly=False</strong> &#8211; when set to True, the relationship is used only for loading objects,
and not for any persistence operation.  A <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
which specifies <a href="#id283"><span class="problematic" id="id284">:paramref:`~.relationship.viewonly`</span></a> can work
with a wider range of SQL operations within the <a href="#id285"><span class="problematic" id="id286">:paramref:`~.relationship.primaryjoin`</span></a>
condition, including operations that feature the use of
a variety of comparison operators as well as SQL functions such
as <tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt>.  The <a href="#id287"><span class="problematic" id="id288">:paramref:`~.relationship.viewonly`</span></a>
flag is also of general use when defining any kind of <a class="reference internal" href="#api.models.picture_comment.relationship" title="api.models.picture_comment.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
that doesn&#8217;t represent the full set of related objects, to prevent
modifications of the collection from resulting in persistence operations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="api.models.picture_comment.text">
<tt class="descclassname">api.models.picture_comment.</tt><tt class="descname">text</tt><big>(</big><em>text</em>, <em>bind=None</em>, <em>bindparams=None</em>, <em>typemap=None</em>, <em>autocommit=None</em><big>)</big><a class="headerlink" href="#api.models.picture_comment.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <tt class="xref py py-class docutils literal"><span class="pre">TextClause</span></tt> clause, representing
a textual SQL string directly.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>fom sqlalchemy import text

t = text(&quot;SELECT * FROM users&quot;)
result = connection.execute(t)
</pre></div>
</div>
<p>The advantages <a class="reference internal" href="#api.models.picture_comment.text" title="api.models.picture_comment.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> provides over a plain string are
backend-neutral support for bind parameters, per-statement
execution options, as well as
bind parameter and result-column typing behavior, allowing
SQLAlchemy type constructs to play a role when executing
a statement that is specified literally.  The construct can also
be provided with a <tt class="docutils literal"><span class="pre">.c</span></tt> collection of column elements, allowing
it to be embedded in other SQL expression constructs as a subquery.</p>
<p>Bind parameters are specified by name, using the format <tt class="docutils literal"><span class="pre">:name</span></tt>.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>For SQL statements where a colon is required verbatim, as within
an inline string, use a backslash to escape:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE name=&#39;\:username&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">TextClause</span></tt> construct includes methods which can
provide information about the bound parameters as well as the column
values which would be returned from the textual statement, assuming
it&#8217;s an executable SELECT type of statement.  The <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt>
method is used to provide bound parameter detail, and
<tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt> method allows specification of
return columns including names and types:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">bindparams</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.picture_comment.text" title="api.models.picture_comment.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> construct is used internally in cases when
a literal string is specified for part of a larger query, such as
when a string is specified to the <tt class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></tt> method of
<tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt>.  In those cases, the same
bind parameter syntax is applied:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">&quot;id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="#api.models.picture_comment.text" title="api.models.picture_comment.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> explicitly usually implies the construction
of a full, standalone statement.   As such, SQLAlchemy refers
to it as an <tt class="xref py py-class docutils literal"><span class="pre">Executable</span></tt> object, and it supports
the <tt class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></tt> method.  For example,
a <a class="reference internal" href="#api.models.picture_comment.text" title="api.models.picture_comment.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> construct that should be subject to &#8220;autocommit&#8221;
can be set explicitly so using the <a href="#id289"><span class="problematic" id="id290">:paramref:`.Connection.execution_options.autocommit`</span></a>
option:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;EXEC my_procedural_thing()&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">execution_options</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that SQLAlchemy&#8217;s usual &#8220;autocommit&#8221; behavior applies to
<a class="reference internal" href="#api.models.picture_comment.text" title="api.models.picture_comment.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> constructs implicitly - that is, statements which begin
with a phrase such as <tt class="docutils literal"><span class="pre">INSERT</span></tt>, <tt class="docutils literal"><span class="pre">UPDATE</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>,
or a variety of other phrases specific to certain backends, will
be eligible for autocommit if no transaction is in progress.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text of the SQL statement to be created.  use <tt class="docutils literal"><span class="pre">:&lt;param&gt;</span></tt>
to specify bind parameters; they will be compiled to their
engine-specific format.</li>
<li><strong>autocommit</strong> &#8211; Deprecated.  Use .execution_options(autocommit=&lt;True|False&gt;)
to set the autocommit option.</li>
<li><strong>bind</strong> &#8211; an optional connection or engine to be used for this text query.</li>
<li><strong>bindparams</strong> &#8211; <p>Deprecated.  A list of <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> instances used to
provide information about parameters embedded in the statement.
This argument now invokes the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt>
method on the construct before returning it.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">,</span>
          <span class="n">bindparams</span><span class="o">=</span><span class="p">[</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">)])</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">)</span><span class="o">.</span>\
          <span class="n">bindparams</span><span class="p">(</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">))</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt> method
supersedes the <tt class="docutils literal"><span class="pre">bindparams</span></tt> argument to <a class="reference internal" href="#api.models.picture_comment.text" title="api.models.picture_comment.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a>.</p>
</div>
</li>
<li><strong>typemap</strong> &#8211; <p>Deprecated.  A dictionary mapping the names of columns
represented in the columns clause of a <tt class="docutils literal"><span class="pre">SELECT</span></tt> statement
to type objects,
which will be used to perform post-processing on columns within
the result set.  This parameter now invokes the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt>
method, which returns a <tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt> construct that gains
a <tt class="docutils literal"><span class="pre">.c</span></tt> collection and can be embedded in other expressions.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">,</span>
              <span class="n">typemap</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">Integer</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">},</span>
          <span class="p">)</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>
</pre></div>
</div>
<p>Or alternatively:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.sql</span> <span class="kn">import</span> <span class="n">column</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">)</span>
                  <span class="p">)</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt> method
supersedes the <tt class="docutils literal"><span class="pre">typemap</span></tt> argument to <a class="reference internal" href="#api.models.picture_comment.text" title="api.models.picture_comment.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a>.</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-api.models.picture_like">
<span id="api-models-picture-like-module"></span><h2>api.models.picture_like module<a class="headerlink" href="#module-api.models.picture_like" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.models.picture_like.PictureLike">
<em class="property">class </em><tt class="descclassname">api.models.picture_like.</tt><tt class="descname">PictureLike</tt><big>(</big><em>picture_id</em>, <em>user_id</em><big>)</big><a class="reference internal" href="_modules/api/models/picture_like.html#PictureLike"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.picture_like.PictureLike" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></tt>, <a class="reference internal" href="#api.models.basemodel.Serializer" title="api.models.basemodel.Serializer"><tt class="xref py py-class docutils literal"><span class="pre">api.models.basemodel.Serializer</span></tt></a></p>
<dl class="attribute">
<dt id="api.models.picture_like.PictureLike.id">
<tt class="descname">id</tt><a class="headerlink" href="#api.models.picture_like.PictureLike.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_like.PictureLike.picture_id">
<tt class="descname">picture_id</tt><a class="headerlink" href="#api.models.picture_like.PictureLike.picture_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_like.PictureLike.user">
<tt class="descname">user</tt><a class="headerlink" href="#api.models.picture_like.PictureLike.user" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.picture_like.PictureLike.user_id">
<tt class="descname">user_id</tt><a class="headerlink" href="#api.models.picture_like.PictureLike.user_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="api.models.picture_like.relationship">
<tt class="descclassname">api.models.picture_like.</tt><tt class="descname">relationship</tt><big>(</big><em>argument</em>, <em>secondary=None</em>, <em>primaryjoin=None</em>, <em>secondaryjoin=None</em>, <em>foreign_keys=None</em>, <em>uselist=None</em>, <em>order_by=False</em>, <em>backref=None</em>, <em>back_populates=None</em>, <em>post_update=False</em>, <em>cascade=False</em>, <em>extension=None</em>, <em>viewonly=False</em>, <em>lazy=True</em>, <em>collection_class=None</em>, <em>passive_deletes=False</em>, <em>passive_updates=True</em>, <em>remote_side=None</em>, <em>enable_typechecks=True</em>, <em>join_depth=None</em>, <em>comparator_factory=None</em>, <em>single_parent=False</em>, <em>innerjoin=False</em>, <em>distinct_target_key=None</em>, <em>doc=None</em>, <em>active_history=False</em>, <em>cascade_backrefs=True</em>, <em>load_on_pending=False</em>, <em>strategy_class=None</em>, <em>_local_remote_pairs=None</em>, <em>query_class=None</em>, <em>info=None</em><big>)</big><a class="headerlink" href="#api.models.picture_like.relationship" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a relationship between two mapped classes.</p>
<p>This corresponds to a parent-child or associative table relationship.  The
constructed class is an instance of <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty</span></tt>.</p>
<p>A typical <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>, used in a classical mapping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
  <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Child</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Some arguments accepted by <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> optionally accept a
callable function, which when called produces the desired value.
The callable is invoked by the parent <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> at &#8220;mapper
initialization&#8221; time, which happens only when mappers are first used, and
is assumed to be after all mappings have been constructed.  This can be
used to resolve order-of-declaration and other dependency issues, such as
if <tt class="docutils literal"><span class="pre">Child</span></tt> is declared below <tt class="docutils literal"><span class="pre">Parent</span></tt> in the same file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&quot;children&quot;</span><span class="p">:</span><span class="n">relationship</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="p">,</span>
                        <span class="n">order_by</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>When using the <em class="xref std std-ref">declarative_toplevel</em> extension, the Declarative
initializer allows string arguments to be passed to <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.
These string arguments are converted into callables that evaluate
the string as Python code, using the Declarative
class-registry as a namespace.  This allows the lookup of related
classes to be automatic via their string name, and removes the need to
import related classes at all into the local module space:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;parent&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Child&quot;</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&quot;Child.id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_config_toplevel</em> - Full introductory and reference
documentation for <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.</p>
<p class="last"><em class="xref std std-ref">orm_tutorial_relationship</em> - ORM tutorial introduction.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>argument</strong> &#8211; <p>a mapped class, or actual <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> instance, representing the
target of the relationship.</p>
<p><a href="#id291"><span class="problematic" id="id292">:paramref:`~.relationship.argument`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">declarative_configuring_relationships</em> - further detail
on relationship configuration when using Declarative.</p>
</div>
</li>
<li><strong>secondary</strong> &#8211; <p>for a many-to-many relationship, specifies the intermediary
table, and is typically an instance of <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.
In less common circumstances, the argument may also be specified
as an <tt class="xref py py-class docutils literal"><span class="pre">Alias</span></tt> construct, or even a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> construct.</p>
<p><a href="#id293"><span class="problematic" id="id294">:paramref:`~.relationship.secondary`</span></a> may
also be passed as a callable function which is evaluated at
mapper initialization time.  When using Declarative, it may also
be a string argument noting the name of a <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> that is
present in the <tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt> collection associated with the
parent-mapped <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
<p>The <a href="#id295"><span class="problematic" id="id296">:paramref:`~.relationship.secondary`</span></a> keyword argument is typically
applied in the case where the intermediary <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> is not
otherwise exprssed in any direct class mapping. If the &#8220;secondary&#8221; table
is also explicitly mapped elsewhere
(e.g. as in <em class="xref std std-ref">association_pattern</em>), one should consider applying
the <a href="#id297"><span class="problematic" id="id298">:paramref:`~.relationship.viewonly`</span></a> flag so that this <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
is not used for persistence operations which may conflict with those
of the association object pattern.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_many_to_many</em> - Reference example of &#8220;many to many&#8221;.</p>
<p><em class="xref std std-ref">orm_tutorial_many_to_many</em> - ORM tutorial introduction to
many-to-many relationships.</p>
<p><em class="xref std std-ref">self_referential_many_to_many</em> - Specifics on using many-to-many
in a self-referential case.</p>
<p><em class="xref std std-ref">declarative_many_to_many</em> - Additional options when using
Declarative.</p>
<p><em class="xref std std-ref">association_pattern</em> - an alternative to <a href="#id299"><span class="problematic" id="id300">:paramref:`~.relationship.secondary`</span></a>
when composing association table relationships, allowing additional
attributes to be specified on the association table.</p>
<p class="last"><em class="xref std std-ref">composite_secondary_join</em> - a lesser-used pattern which in some
cases can enable complex <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> SQL conditions
to be used.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.2: </span><a href="#id301"><span class="problematic" id="id302">:paramref:`~.relationship.secondary`</span></a> works
more effectively when referring to a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> instance.</p>
</div>
</li>
<li><strong>active_history=False</strong> &#8211; When <tt class="docutils literal"><span class="pre">True</span></tt>, indicates that the &#8220;previous&#8221; value for a
many-to-one reference should be loaded when replaced, if
not already loaded. Normally, history tracking logic for
simple many-to-ones only needs to be aware of the &#8220;new&#8221;
value in order to perform a flush. This flag is available
for applications that make use of
<tt class="xref py py-func docutils literal"><span class="pre">attributes.get_history()</span></tt> which also need to know
the &#8220;previous&#8221; value of the attribute.</li>
<li><strong>backref</strong> &#8211; <p>indicates the string name of a property to be placed on the related
mapper&#8217;s class that will handle this relationship in the other
direction. The other property will be created automatically
when the mappers are configured.  Can also be passed as a
<tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> object to control the configuration of the
new relationship.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p><a href="#id303"><span class="problematic" id="id304">:paramref:`~.relationship.back_populates`</span></a> - alternative form
of backref specification.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> - allows control over <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
configuration when using <a href="#id305"><span class="problematic" id="id306">:paramref:`~.relationship.backref`</span></a>.</p>
</div>
</li>
<li><strong>back_populates</strong> &#8211; <p>Takes a string name and has the same meaning as <a href="#id307"><span class="problematic" id="id308">:paramref:`~.relationship.backref`</span></a>,
except the complementing property is <strong>not</strong> created automatically,
and instead must be configured explicitly on the other mapper.  The
complementing property should also indicate <a href="#id309"><span class="problematic" id="id310">:paramref:`~.relationship.back_populates`</span></a>
to this relationship to ensure proper functioning.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id311"><span class="problematic" id="id312">:paramref:`~.relationship.backref`</span></a> - alternative form
of backref specification.</p>
</div>
</li>
<li><strong>cascade</strong> &#8211; <p>a comma-separated list of cascade rules which determines how
Session operations should be &#8220;cascaded&#8221; from parent to child.
This defaults to <tt class="docutils literal"><span class="pre">False</span></tt>, which means the default cascade
should be used - this default cascade is <tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge&quot;</span></tt>.</p>
<p>The available cascades are <tt class="docutils literal"><span class="pre">save-update</span></tt>, <tt class="docutils literal"><span class="pre">merge</span></tt>,
<tt class="docutils literal"><span class="pre">expunge</span></tt>, <tt class="docutils literal"><span class="pre">delete</span></tt>, <tt class="docutils literal"><span class="pre">delete-orphan</span></tt>, and <tt class="docutils literal"><span class="pre">refresh-expire</span></tt>.
An additional option, <tt class="docutils literal"><span class="pre">all</span></tt> indicates shorthand for
<tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge,</span> <span class="pre">refresh-expire,</span>
<span class="pre">expunge,</span> <span class="pre">delete&quot;</span></tt>, and is often used as in <tt class="docutils literal"><span class="pre">&quot;all,</span> <span class="pre">delete-orphan&quot;</span></tt>
to indicate that related objects should follow along with the
parent object in all cases, and be deleted when de-associated.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">unitofwork_cascades</em> - Full detail on each of the available
cascade options.</p>
<p class="last"><em class="xref std std-ref">tutorial_delete_cascade</em> - Tutorial example describing
a delete cascade.</p>
</div>
</li>
<li><strong>cascade_backrefs=True</strong> &#8211; <p>a boolean value indicating if the <tt class="docutils literal"><span class="pre">save-update</span></tt> cascade should
operate along an assignment event intercepted by a backref.
When set to <tt class="docutils literal"><span class="pre">False</span></tt>, the attribute managed by this relationship
will not cascade an incoming transient object into the session of a
persistent parent, if the event is received via backref.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">backref_cascade</em> - Full discussion and examples on how
the <a href="#id313"><span class="problematic" id="id314">:paramref:`~.relationship.cascade_backrefs`</span></a> option is used.</p>
</div>
</li>
<li><strong>collection_class</strong> &#8211; <p>a class or callable that returns a new list-holding object. will
be used in place of a plain list for storing elements.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">custom_collections</em> - Introductory documentation and
examples.</p>
</div>
</li>
<li><strong>comparator_factory</strong> &#8211; <p>a class which extends <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty.Comparator</span></tt> which
provides custom SQL clause generation for comparison operations.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">PropComparator</span></tt> - some detail on redefining comparators
at this level.</p>
<p class="last"><em class="xref std std-ref">custom_comparators</em> - Brief intro to this feature.</p>
</div>
</li>
<li><strong>distinct_target_key=None</strong> &#8211; <p>Indicate if a &#8220;subquery&#8221; eager load should apply the DISTINCT
keyword to the innermost SELECT statement.  When left as <tt class="docutils literal"><span class="pre">None</span></tt>,
the DISTINCT keyword will be applied in those cases when the target
columns do not comprise the full primary key of the target table.
When set to <tt class="docutils literal"><span class="pre">True</span></tt>, the DISTINCT keyword is applied to the innermost
SELECT unconditionally.</p>
<p>It may be desirable to set this flag to False when the DISTINCT is
reducing performance of the innermost subquery beyond that of what
duplicate innermost rows may be causing.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.3: </span>- <a href="#id315"><span class="problematic" id="id316">:paramref:`~.relationship.distinct_target_key`</span></a>
allows the
subquery eager loader to apply a DISTINCT modifier to the
innermost SELECT.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span>- <a href="#id317"><span class="problematic" id="id318">:paramref:`~.relationship.distinct_target_key`</span></a>
now defaults to <tt class="docutils literal"><span class="pre">None</span></tt>, so that the feature enables itself automatically for
those cases where the innermost query targets a non-unique
key.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">loading_toplevel</em> - includes an introduction to subquery
eager loading.</p>
</div>
</li>
<li><strong>doc</strong> &#8211; docstring which will be applied to the resulting descriptor.</li>
<li><strong>extension</strong> &#8211; <p>an <tt class="xref py py-class docutils literal"><span class="pre">AttributeExtension</span></tt> instance, or list of extensions,
which will be prepended to the list of attribute listeners for
the resulting descriptor placed on the class.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.7: </span>Please see <tt class="xref py py-class docutils literal"><span class="pre">AttributeEvents</span></tt>.</p>
</div>
</li>
<li><strong>foreign_keys</strong> &#8211; <p>a list of columns which are to be used as &#8220;foreign key&#8221;
columns, or columns which refer to the value in a remote
column, within the context of this <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
object&#8217;s <a href="#id319"><span class="problematic" id="id320">:paramref:`~.relationship.primaryjoin`</span></a> condition.
That is, if the <a href="#id321"><span class="problematic" id="id322">:paramref:`~.relationship.primaryjoin`</span></a>
condition of this <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">a.id</span> <span class="pre">==</span>
<span class="pre">b.a_id</span></tt>, and the values in <tt class="docutils literal"><span class="pre">b.a_id</span></tt> are required to be
present in <tt class="docutils literal"><span class="pre">a.id</span></tt>, then the &#8220;foreign key&#8221; column of this
<a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">b.a_id</span></tt>.</p>
<p>In normal cases, the <a href="#id323"><span class="problematic" id="id324">:paramref:`~.relationship.foreign_keys`</span></a>
parameter is <strong>not required.</strong> <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> will
automatically determine which columns in the
<a href="#id325"><span class="problematic" id="id326">:paramref:`~.relationship.primaryjoin`</span></a> conditition are to be
considered &#8220;foreign key&#8221; columns based on those
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects that specify <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt>,
or are otherwise listed as referencing columns in a
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt> construct.
<a href="#id327"><span class="problematic" id="id328">:paramref:`~.relationship.foreign_keys`</span></a> is only needed when:</p>
<blockquote>
<div><ol class="arabic">
<li>There is more than one way to construct a join from the local
table to the remote table, as there are multiple foreign key
references present.  Setting <tt class="docutils literal"><span class="pre">foreign_keys</span></tt> will limit the
<a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> to consider just those columns specified
here as &#8220;foreign&#8221;.<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>A multiple-foreign key join ambiguity can be resolved by
setting the <a href="#id329"><span class="problematic" id="id330">:paramref:`~.relationship.foreign_keys`</span></a> parameter alone, without the
need to explicitly set <a href="#id331"><span class="problematic" id="id332">:paramref:`~.relationship.primaryjoin`</span></a> as well.</p>
</div>
</li>
<li>The <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> being mapped does not actually have
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt>
constructs present, often because the table
was reflected from a database that does not support foreign key
reflection (MySQL MyISAM).</li>
<li>The <a href="#id333"><span class="problematic" id="id334">:paramref:`~.relationship.primaryjoin`</span></a> argument is used to construct a non-standard
join condition, which makes use of columns or expressions that do
not normally refer to their &#8220;parent&#8221; column, such as a join condition
expressed by a complex comparison using a SQL function.</li>
</ol>
</div></blockquote>
<p>The <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct will raise informative
error messages that suggest the use of the
<a href="#id335"><span class="problematic" id="id336">:paramref:`~.relationship.foreign_keys`</span></a> parameter when
presented with an ambiguous condition.   In typical cases,
if <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> doesn&#8217;t raise any exceptions, the
<a href="#id337"><span class="problematic" id="id338">:paramref:`~.relationship.foreign_keys`</span></a> parameter is usually
not needed.</p>
<p><a href="#id339"><span class="problematic" id="id340">:paramref:`~.relationship.foreign_keys`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_foreign_keys</em></p>
<p><em class="xref std std-ref">relationship_custom_foreign</em></p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> - allows direct annotation of the &#8220;foreign&#8221; columns
within a <a href="#id341"><span class="problematic" id="id342">:paramref:`~.relationship.primaryjoin`</span></a> condition.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> annotation can also be applied
directly to the <a href="#id343"><span class="problematic" id="id344">:paramref:`~.relationship.primaryjoin`</span></a> expression, which is an alternate,
more specific system of describing which columns in a particular
<a href="#id345"><span class="problematic" id="id346">:paramref:`~.relationship.primaryjoin`</span></a> should be considered &#8220;foreign&#8221;.</p>
</div>
</li>
<li><strong>info</strong> &#8211; <p>Optional data dictionary which will be populated into the
<tt class="xref py py-attr docutils literal"><span class="pre">MapperProperty.info</span></tt> attribute of this object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</li>
<li><strong>innerjoin=False</strong> &#8211; <p>when <tt class="docutils literal"><span class="pre">True</span></tt>, joined eager loads will use an inner join to join
against related tables instead of an outer join.  The purpose
of this option is generally one of performance, as inner joins
generally perform better than outer joins.</p>
<p>This flag can be set to <tt class="docutils literal"><span class="pre">True</span></tt> when the relationship references an
object via many-to-one using local foreign keys that are not nullable,
or when the reference is one-to-one or a collection that is guaranteed
to have one or at least one entry.</p>
<p>If the joined-eager load is chained onto an existing LEFT OUTER JOIN,
<tt class="docutils literal"><span class="pre">innerjoin=True</span></tt> will be bypassed and the join will continue to
chain as LEFT OUTER JOIN so that the results don&#8217;t change.  As an alternative,
specify the value <tt class="docutils literal"><span class="pre">&quot;nested&quot;</span></tt>.  This will instead nest the join
on the right side, e.g. using the form &#8220;a LEFT OUTER JOIN (b JOIN c)&#8221;.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.4: </span>Added <tt class="docutils literal"><span class="pre">innerjoin=&quot;nested&quot;</span></tt> option to support
nesting of eager &#8220;inner&#8221; joins.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">what_kind_of_loading</em> - Discussion of some details of
various loader options.</p>
<p class="last"><a href="#id347"><span class="problematic" id="id348">:paramref:`.joinedload.innerjoin`</span></a> - loader option version</p>
</div>
</li>
<li><strong>join_depth</strong> &#8211; <p>when non-<tt class="docutils literal"><span class="pre">None</span></tt>, an integer value indicating how many levels
deep &#8220;eager&#8221; loaders should join on a self-referring or cyclical
relationship.  The number counts how many times the same Mapper
shall be present in the loading condition along a particular join
branch.  When left at its default of <tt class="docutils literal"><span class="pre">None</span></tt>, eager loaders
will stop chaining when they encounter a the same target mapper
which is already higher up in the chain.  This option applies
both to joined- and subquery- eager loaders.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">self_referential_eager_loading</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>lazy=&#8217;select&#8217;</strong> &#8211; <p>specifies
how the related items should be loaded.  Default value is
<tt class="docutils literal"><span class="pre">select</span></tt>.  Values include:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">select</span></tt> - items should be loaded lazily when the property is first
accessed, using a separate SELECT statement, or identity map
fetch for simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">immediate</span></tt> - items should be loaded as the parents are loaded,
using a separate SELECT statement, or identity map fetch for
simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">joined</span></tt> - items should be loaded &#8220;eagerly&#8221; in the same query as
that of the parent, using a JOIN or LEFT OUTER JOIN.  Whether
the join is &#8220;outer&#8221; or not is determined by the
<a href="#id349"><span class="problematic" id="id350">:paramref:`~.relationship.innerjoin`</span></a> parameter.</li>
<li><tt class="docutils literal"><span class="pre">subquery</span></tt> - items should be loaded &#8220;eagerly&#8221; as the parents are
loaded, using one additional SQL statement, which issues a JOIN to a
subquery of the original statement, for each collection requested.</li>
<li><tt class="docutils literal"><span class="pre">noload</span></tt> - no loading should occur at any time.  This is to
support &#8220;write-only&#8221; attributes, or attributes which are
populated in some manner specific to the application.</li>
<li><tt class="docutils literal"><span class="pre">dynamic</span></tt> - the attribute will return a pre-configured
<a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object for all read
operations, onto which further filtering operations can be
applied before iterating the results.  See
the section <em class="xref std std-ref">dynamic_relationship</em> for more details.</li>
<li>True - a synonym for &#8216;select&#8217;</li>
<li>False - a synonym for &#8216;joined&#8217;</li>
<li>None - a synonym for &#8216;noload&#8217;</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref doc docutils literal"><span class="pre">/orm/loading</span></tt> - Full documentation on relationship loader
configuration.</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - detail on the <tt class="docutils literal"><span class="pre">dynamic</span></tt> option.</p>
</div>
</li>
<li><strong>load_on_pending=False</strong> &#8211; <p>Indicates loading behavior for transient or pending parent objects.</p>
<p>When set to <tt class="docutils literal"><span class="pre">True</span></tt>, causes the lazy-loader to
issue a query for a parent object that is not persistent, meaning it has
never been flushed.  This may take effect for a pending object when
autoflush is disabled, or for a transient object that has been
&#8220;attached&#8221; to a <tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt> but is not part of its pending
collection.</p>
<p>The <a href="#id351"><span class="problematic" id="id352">:paramref:`~.relationship.load_on_pending`</span></a> flag does not improve behavior
when the ORM is used normally - object references should be constructed
at the object level, not at the foreign key level, so that they
are present in an ordinary way before a flush proceeds.  This flag
is not not intended for general use.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">Session.enable_relationship_loading()</span></tt> - this method establishes
&#8220;load on pending&#8221; behavior for the whole object, and also allows
loading on objects that remain transient or detached.</p>
</div>
</li>
<li><strong>order_by</strong> &#8211; <p>indicates the ordering that should be applied when loading these
items.  <a href="#id353"><span class="problematic" id="id354">:paramref:`~.relationship.order_by`</span></a> is expected to refer to one
of the <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects to which the target class is mapped, or
the attribute itself bound to the target class which refers
to the column.</p>
<p><a href="#id355"><span class="problematic" id="id356">:paramref:`~.relationship.order_by`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
</li>
<li><strong>passive_deletes=False</strong> &#8211; <p>Indicates loading behavior during delete operations.</p>
<p>A value of True indicates that unloaded child items should not
be loaded during a delete operation on the parent.  Normally,
when a parent item is deleted, all child items are loaded so
that they can either be marked as deleted, or have their
foreign key to the parent set to NULL.  Marking this flag as
True usually implies an ON DELETE &lt;CASCADE|SET NULL&gt; rule is in
place which will handle updating/deleting child rows on the
database side.</p>
<p>Additionally, setting the flag to the string value &#8216;all&#8217; will
disable the &#8220;nulling out&#8221; of the child foreign keys, when there
is no delete or delete-orphan cascade enabled.  This is
typically used when a triggering or error raise scenario is in
place on the database side.  Note that the foreign key
attributes on in-session child objects will not be changed
after a flush occurs so this is a very special use-case
setting.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">passive_deletes</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>passive_updates=True</strong> &#8211; <p>Indicates loading and INSERT/UPDATE/DELETE behavior when the
source of a foreign key value changes (i.e. an &#8220;on update&#8221;
cascade), which are typically the primary key columns of the
source row.</p>
<p>When True, it is assumed that ON UPDATE CASCADE is configured on
the foreign key in the database, and that the database will
handle propagation of an UPDATE from a source column to
dependent rows.  Note that with databases which enforce
referential integrity (i.e. PostgreSQL, MySQL with InnoDB tables),
ON UPDATE CASCADE is required for this operation.  The
relationship() will update the value of the attribute on related
items which are locally present in the session during a flush.</p>
<p>When False, it is assumed that the database does not enforce
referential integrity and will not be issuing its own CASCADE
operation for an update.  The relationship() will issue the
appropriate UPDATE statements to the database in response to the
change of a referenced key, and items locally present in the
session during a flush will also be refreshed.</p>
<p>This flag should probably be set to False if primary key changes
are expected and the database in use doesn&#8217;t support CASCADE
(i.e. SQLite, MySQL MyISAM tables).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">passive_updates</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id357"><span class="problematic" id="id358">:paramref:`.mapper.passive_updates`</span></a> - a similar flag which
takes effect for joined-table inheritance mappings.</p>
</div>
</li>
<li><strong>post_update</strong> &#8211; <p>this indicates that the relationship should be handled by a
second UPDATE statement after an INSERT or before a
DELETE. Currently, it also will issue an UPDATE after the
instance was UPDATEd as well, although this technically should
be improved. This flag is used to handle saving bi-directional
dependencies between two individual rows (i.e. each row
references the other), where it would otherwise be impossible to
INSERT or DELETE both rows fully since one row exists before the
other. Use this flag when a particular mapping arrangement will
incur two rows that are dependent on each other, such as a table
that has a one-to-many relationship to a set of child rows, and
also has a column that references a single child row within that
list (i.e. both tables contain a foreign key to each other). If
a flush operation returns an error that a &#8220;cyclical
dependency&#8221; was detected, this is a cue that you might want to
use <a href="#id359"><span class="problematic" id="id360">:paramref:`~.relationship.post_update`</span></a> to &#8220;break&#8221; the cycle.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">post_update</em> - Introductory documentation and examples.</p>
</div>
</li>
<li><strong>primaryjoin</strong> &#8211; <p>a SQL expression that will be used as the primary
join of this child object against the parent object, or in a
many-to-many relationship the join of the primary object to the
association table. By default, this value is computed based on the
foreign key relationships of the parent and child tables (or association
table).</p>
<p><a href="#id361"><span class="problematic" id="id362">:paramref:`~.relationship.primaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>remote_side</strong> &#8211; <p>used for self-referential relationships, indicates the column or
list of columns that form the &#8220;remote side&#8221; of the relationship.</p>
<p><a href="#id363"><span class="problematic" id="id364">:paramref:`.relationship.remote_side`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> annotation can also be applied
directly to the <tt class="docutils literal"><span class="pre">primaryjoin</span></tt> expression, which is an alternate,
more specific system of describing which columns in a particular
<tt class="docutils literal"><span class="pre">primaryjoin</span></tt> should be considered &#8220;remote&#8221;.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">self_referential</em> - in-depth explanation of how
<a href="#id365"><span class="problematic" id="id366">:paramref:`~.relationship.remote_side`</span></a>
is used to configure self-referential relationships.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> - an annotation function that accomplishes the same
purpose as <a href="#id367"><span class="problematic" id="id368">:paramref:`~.relationship.remote_side`</span></a>, typically
when a custom <a href="#id369"><span class="problematic" id="id370">:paramref:`~.relationship.primaryjoin`</span></a> condition
is used.</p>
</div>
</li>
<li><strong>query_class</strong> &#8211; <p>a <a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> subclass that will be used as the base of the
&#8220;appender query&#8221; returned by a &#8220;dynamic&#8221; relationship, that
is, a relationship that specifies <tt class="docutils literal"><span class="pre">lazy=&quot;dynamic&quot;</span></tt> or was
otherwise constructed using the <tt class="xref py py-func docutils literal"><span class="pre">orm.dynamic_loader()</span></tt>
function.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - Introduction to &#8220;dynamic&#8221; relationship
loaders.</p>
</div>
</li>
<li><strong>secondaryjoin</strong> &#8211; <p>a SQL expression that will be used as the join of
an association table to the child object. By default, this value is
computed based on the foreign key relationships of the association and
child tables.</p>
<p><a href="#id371"><span class="problematic" id="id372">:paramref:`~.relationship.secondaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>single_parent</strong> &#8211; <p>when True, installs a validator which will prevent objects
from being associated with more than one parent at a time.
This is used for many-to-one or many-to-many relationships that
should be treated either as one-to-one or one-to-many.  Its usage
is optional, except for <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> constructs which
are many-to-one or many-to-many and also
specify the <tt class="docutils literal"><span class="pre">delete-orphan</span></tt> cascade option.  The <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
construct itself will raise an error instructing when this option
is required.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">unitofwork_cascades</em> - includes detail on when the
<a href="#id373"><span class="problematic" id="id374">:paramref:`~.relationship.single_parent`</span></a> flag may be appropriate.</p>
</div>
</li>
<li><strong>uselist</strong> &#8211; <p>a boolean that indicates if this property should be loaded as a
list or a scalar. In most cases, this value is determined
automatically by <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> at mapper configuration
time, based on the type and direction
of the relationship - one to many forms a list, many to one
forms a scalar, many to many is a list. If a scalar is desired
where normally a list would be present, such as a bi-directional
one-to-one relationship, set <a href="#id375"><span class="problematic" id="id376">:paramref:`~.relationship.uselist`</span></a> to False.</p>
<p>The <a href="#id377"><span class="problematic" id="id378">:paramref:`~.relationship.uselist`</span></a> flag is also available on an
existing <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct as a read-only attribute, which
can be used to determine if this <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> deals with
collections or scalar attributes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">uselist</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationships_one_to_one</em> - Introduction to the &#8220;one to one&#8221;
relationship pattern, which is typically when the
<a href="#id379"><span class="problematic" id="id380">:paramref:`~.relationship.uselist`</span></a> flag is needed.</p>
</div>
</li>
<li><strong>viewonly=False</strong> &#8211; when set to True, the relationship is used only for loading objects,
and not for any persistence operation.  A <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
which specifies <a href="#id381"><span class="problematic" id="id382">:paramref:`~.relationship.viewonly`</span></a> can work
with a wider range of SQL operations within the <a href="#id383"><span class="problematic" id="id384">:paramref:`~.relationship.primaryjoin`</span></a>
condition, including operations that feature the use of
a variety of comparison operators as well as SQL functions such
as <tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt>.  The <a href="#id385"><span class="problematic" id="id386">:paramref:`~.relationship.viewonly`</span></a>
flag is also of general use when defining any kind of <a class="reference internal" href="#api.models.picture_like.relationship" title="api.models.picture_like.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
that doesn&#8217;t represent the full set of related objects, to prevent
modifications of the collection from resulting in persistence operations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-api.models.query">
<span id="api-models-query-module"></span><h2>api.models.query module<a class="headerlink" href="#module-api.models.query" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.models.query.Query">
<em class="property">class </em><tt class="descclassname">api.models.query.</tt><tt class="descname">Query</tt><big>(</big><em>string</em><big>)</big><a class="reference internal" href="_modules/api/models/query.html#Query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.query.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></tt>, <a class="reference internal" href="#api.models.basemodel.Serializer" title="api.models.basemodel.Serializer"><tt class="xref py py-class docutils literal"><span class="pre">api.models.basemodel.Serializer</span></tt></a></p>
<dl class="attribute">
<dt id="api.models.query.Query.string">
<tt class="descname">string</tt><a class="headerlink" href="#api.models.query.Query.string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.query.Query.timestamp">
<tt class="descname">timestamp</tt><a class="headerlink" href="#api.models.query.Query.timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="api.models.query.and_">
<tt class="descclassname">api.models.query.</tt><tt class="descname">and_</tt><big>(</big><em>*clauses</em><big>)</big><a class="headerlink" href="#api.models.query.and_" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a conjunction of expressions joined by <tt class="docutils literal"><span class="pre">AND</span></tt>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">and_</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">and_</span><span class="p">(</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.and_" title="api.models.query.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a> conjunction is also available using the
Python <tt class="docutils literal"><span class="pre">&amp;</span></tt> operator (though note that compound expressions
need to be parenthesized in order to function with Python
operator precedence behavior):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.and_" title="api.models.query.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a> operation is also implicit in some cases;
the <tt class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></tt> method for example can be invoked multiple
times against a statement, which will have the effect of each
clause being combined using <a class="reference internal" href="#api.models.query.and_" title="api.models.query.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#api.models.query.or_" title="api.models.query.or_"><tt class="xref py py-func docutils literal"><span class="pre">or_()</span></tt></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.asc">
<tt class="descclassname">api.models.query.</tt><tt class="descname">asc</tt><big>(</big><em>column</em><big>)</big><a class="headerlink" href="#api.models.query.asc" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an ascending <tt class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></tt> clause element.</p>
<p>e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">asc</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">asc</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>will produce SQL as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user ORDER BY name ASC
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.asc" title="api.models.query.asc"><tt class="xref py py-func docutils literal"><span class="pre">asc()</span></tt></a> function is a standalone version of the
<tt class="xref py py-meth docutils literal"><span class="pre">ColumnElement.asc()</span></tt> method available on all SQL expressions,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">asc</span><span class="p">())</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></tt> (e.g. scalar SQL expression)
with which to apply the <a class="reference internal" href="#api.models.query.asc" title="api.models.query.asc"><tt class="xref py py-func docutils literal"><span class="pre">asc()</span></tt></a> operation.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#api.models.query.desc" title="api.models.query.desc"><tt class="xref py py-func docutils literal"><span class="pre">desc()</span></tt></a></p>
<p><tt class="xref py py-func docutils literal"><span class="pre">nullsfirst()</span></tt></p>
<p><tt class="xref py py-func docutils literal"><span class="pre">nullslast()</span></tt></p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.bindparam">
<tt class="descclassname">api.models.query.</tt><tt class="descname">bindparam</tt><big>(</big><em>key</em>, <em>value=symbol('NO_ARG')</em>, <em>type_=None</em>, <em>unique=False</em>, <em>required=symbol('NO_ARG')</em>, <em>quote=None</em>, <em>callable_=None</em>, <em>isoutparam=False</em>, <em>_compared_to_operator=None</em>, <em>_compared_to_type=None</em><big>)</big><a class="headerlink" href="#api.models.query.bindparam" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a &#8220;bound expression&#8221;.</p>
<p>The return value is an instance of <tt class="xref py py-class docutils literal"><span class="pre">BindParameter</span></tt>; this
is a <tt class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></tt> subclass which represents a so-called
&#8220;placeholder&#8221; value in a SQL expression, the value of which is supplied
at the point at which the statement in executed against a database
connection.</p>
<p>In SQLAlchemy, the <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> construct has
the ability to carry along the actual value that will be ultimately
used at expression time.  In this way, it serves not just as
a &#8220;placeholder&#8221; for eventual population, but also as a means of
representing so-called &#8220;unsafe&#8221; values which should not be rendered
directly in a SQL statement, but rather should be passed along
to the <em class="xref std std-term">DBAPI</em> as values which need to be correctly escaped
and potentially handled for type-safety.</p>
<p>When using <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> explicitly, the use case is typically
one of traditional deferment of parameters; the <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a>
construct accepts a name which can then be referred to at execution
time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">bindparam</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The above statement, when rendered, will produce SQL similar to:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user WHERE name = :username
</pre></div>
</div>
<p>In order to populate the value of <tt class="docutils literal"><span class="pre">:username</span></tt> above, the value
would typically be applied at execution time to a method
like <tt class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s">&#39;wendy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Explicit use of <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> is also common when producing
UPDATE or DELETE statements that are to be invoked multiple times,
where the WHERE criterion of the statement is to change on each
invocation, such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span>\
                <span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">))</span><span class="o">.</span>\
                <span class="n">values</span><span class="p">(</span><span class="n">fullname</span><span class="o">=</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;fullname&#39;</span><span class="p">))</span>

<span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&quot;username&quot;</span><span class="p">:</span> <span class="s">&quot;wendy&quot;</span><span class="p">,</span> <span class="s">&quot;fullname&quot;</span><span class="p">:</span> <span class="s">&quot;Wendy Smith&quot;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&quot;username&quot;</span><span class="p">:</span> <span class="s">&quot;jack&quot;</span><span class="p">,</span> <span class="s">&quot;fullname&quot;</span><span class="p">:</span> <span class="s">&quot;Jack Jones&quot;</span><span class="p">},</span>
            <span class="p">])</span>
</pre></div>
</div>
<p>SQLAlchemy&#8217;s Core expression system makes wide use of <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a>
in an implicit sense.   It is typical that Python literal values passed to
virtually all SQL expression functions are coerced into fixed
<a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> constructs.  For example, given a comparison operation
such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">expr</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;Wendy&#39;</span>
</pre></div>
</div>
<p>The above expression will produce a <tt class="xref py py-class docutils literal"><span class="pre">BinaryExpression</span></tt>
construct, where the left side is the <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> object
representing the <tt class="docutils literal"><span class="pre">name</span></tt> column, and the right side is a <tt class="xref py py-class docutils literal"><span class="pre">BindParameter</span></tt>
representing the literal value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">right</span><span class="p">))</span>
<span class="n">BindParameter</span><span class="p">(</span><span class="s">&#39;%(4327771088 name)s&#39;</span><span class="p">,</span> <span class="s">&#39;Wendy&#39;</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">String</span><span class="p">())</span>
</pre></div>
</div>
<p>The expression above will render SQL such as:</p>
<div class="highlight-python"><div class="highlight"><pre>user.name = :name_1
</pre></div>
</div>
<p>Where the <tt class="docutils literal"><span class="pre">:name_1</span></tt> parameter name is an anonymous name.  The
actual string <tt class="docutils literal"><span class="pre">Wendy</span></tt> is not in the rendered string, but is carried
along where it is later used within statement execution.  If we
invoke a statement like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;Wendy&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
</pre></div>
</div>
<p>We would see SQL logging output as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT &quot;user&quot;.id, &quot;user&quot;.name
FROM &quot;user&quot;
WHERE &quot;user&quot;.name = %(name_1)s
{&#39;name_1&#39;: &#39;Wendy&#39;}
</pre></div>
</div>
<p>Above, we see that <tt class="docutils literal"><span class="pre">Wendy</span></tt> is passed as a parameter to the database,
while the placeholder <tt class="docutils literal"><span class="pre">:name_1</span></tt> is rendered in the appropriate form
for the target database, in this case the Postgresql database.</p>
<p>Similarly, <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> is invoked automatically
when working with <em class="xref std std-term">CRUD</em> statements as far as the &#8220;VALUES&#8221;
portion is concerned.   The <a class="reference internal" href="#api.models.query.insert" title="api.models.query.insert"><tt class="xref py py-func docutils literal"><span class="pre">insert()</span></tt></a> construct produces an
<tt class="docutils literal"><span class="pre">INSERT</span></tt> expression which will, at statement execution time, generate
bound placeholders based on the arguments passed, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Wendy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above will produce SQL output as:</p>
<div class="highlight-python"><div class="highlight"><pre>INSERT INTO &quot;user&quot; (name) VALUES (%(name)s)
{&#39;name&#39;: &#39;Wendy&#39;}
</pre></div>
</div>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">Insert</span></tt> construct, at compilation/execution time,
rendered a single <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> mirroring the column
name <tt class="docutils literal"><span class="pre">name</span></tt> as a result of the single <tt class="docutils literal"><span class="pre">name</span></tt> parameter
we passed to the <tt class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></tt> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; the key (e.g. the name) for this bind param.
Will be used in the generated
SQL statement for dialects that use named parameters.  This
value may be modified when part of a compilation operation,
if other <tt class="xref py py-class docutils literal"><span class="pre">BindParameter</span></tt> objects exist with the same
key, or if its length is too long and truncation is
required.</li>
<li><strong>value</strong> &#8211; Initial value for this bind param.  Will be used at statement
execution time as the value for this parameter passed to the
DBAPI, if no other value is indicated to the statement execution
method for this particular parameter name.  Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><strong>callable_</strong> &#8211; A callable function that takes the place of &#8220;value&#8221;.  The function
will be called at statement execution time to determine the
ultimate value.   Used for scenarios where the actual bind
value cannot be determined at the point at which the clause
construct is created, but embedded bind values are still desirable.</li>
<li><strong>type_</strong> &#8211; <p>A <tt class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></tt> class or instance representing an optional
datatype for this <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a>.  If not passed, a type
may be determined automatically for the bind, based on the given
value; for example, trivial Python types such as <tt class="docutils literal"><span class="pre">str</span></tt>,
<tt class="docutils literal"><span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">bool</span></tt>
may result in the <tt class="xref py py-class docutils literal"><span class="pre">String</span></tt>, <tt class="xref py py-class docutils literal"><span class="pre">Integer</span></tt> or
<tt class="xref py py-class docutils literal"><span class="pre">Boolean</span></tt> types being autoamtically selected.</p>
<p>The type of a <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> is significant especially in that
the type will apply pre-processing to the value before it is
passed to the database.  For example, a <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> which
refers to a datetime value, and is specified as holding the
<tt class="xref py py-class docutils literal"><span class="pre">DateTime</span></tt> type, may apply conversion needed to the
value (such as stringification on SQLite) before passing the value
to the database.</p>
</li>
<li><strong>unique</strong> &#8211; if True, the key name of this <tt class="xref py py-class docutils literal"><span class="pre">BindParameter</span></tt> will be
modified if another <tt class="xref py py-class docutils literal"><span class="pre">BindParameter</span></tt> of the same name
already has been located within the containing
expression.  This flag is used generally by the internals
when producing so-called &#8220;anonymous&#8221; bound expressions, it
isn&#8217;t generally applicable to explicitly-named <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a>
constructs.</li>
<li><strong>required</strong> &#8211; <p>If <tt class="docutils literal"><span class="pre">True</span></tt>, a value is required at execution time.  If not passed,
it defaults to <tt class="docutils literal"><span class="pre">True</span></tt> if neither <a href="#id387"><span class="problematic" id="id388">:paramref:`.bindparam.value`</span></a>
or <a href="#id389"><span class="problematic" id="id390">:paramref:`.bindparam.callable`</span></a> were passed.  If either of these
parameters are present, then <a href="#id391"><span class="problematic" id="id392">:paramref:`.bindparam.required`</span></a> defaults
to <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>If the <tt class="docutils literal"><span class="pre">required</span></tt> flag is not specified,
it will be set automatically to <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> depending
on whether or not the <tt class="docutils literal"><span class="pre">value</span></tt> or <tt class="docutils literal"><span class="pre">callable</span></tt> parameters
were specified.</p>
</div>
</li>
<li><strong>quote</strong> &#8211; True if this parameter name requires quoting and is not
currently known as a SQLAlchemy reserved word; this currently
only applies to the Oracle backend, where bound names must
sometimes be quoted.</li>
<li><strong>isoutparam</strong> &#8211; if True, the parameter should be treated like a stored procedure
&#8220;OUT&#8221; parameter.  This applies to backends such as Oracle which
support OUT parameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">coretutorial_bind_param</em></p>
<p><em class="xref std std-ref">coretutorial_insert_expressions</em></p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">outparam()</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.case">
<tt class="descclassname">api.models.query.</tt><tt class="descname">case</tt><big>(</big><em>whens</em>, <em>value=None</em>, <em>else_=None</em><big>)</big><a class="headerlink" href="#api.models.query.case" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <tt class="docutils literal"><span class="pre">CASE</span></tt> expression.</p>
<p>The <tt class="docutils literal"><span class="pre">CASE</span></tt> construct in SQL is a conditional object that
acts somewhat analogously to an &#8220;if/then&#8221; construct in other
languages.  It returns an instance of <tt class="xref py py-class docutils literal"><span class="pre">Case</span></tt>.</p>
<p><a class="reference internal" href="#api.models.query.case" title="api.models.query.case"><tt class="xref py py-func docutils literal"><span class="pre">case()</span></tt></a> in its usual form is passed a list of &#8220;when&#8221;
constructs, that is, a list of conditions and results as tuples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">case</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span>
                <span class="n">case</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span> <span class="s">&#39;W&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">)</span>
                    <span class="p">],</span>
                    <span class="n">else_</span><span class="o">=</span><span class="s">&#39;E&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The above statement will produce SQL resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user
WHERE CASE
    WHEN (name = :name_1) THEN :param_1
    WHEN (name = :name_2) THEN :param_2
    ELSE :param_3
END
</pre></div>
</div>
<p>When simple equality expressions of several values against a single
parent column are needed, <a class="reference internal" href="#api.models.query.case" title="api.models.query.case"><tt class="xref py py-func docutils literal"><span class="pre">case()</span></tt></a> also has a &#8220;shorthand&#8221; format
used via the
<a href="#id393"><span class="problematic" id="id394">:paramref:`.case.value`</span></a> parameter, which is passed a column
expression to be compared.  In this form, the <a href="#id395"><span class="problematic" id="id396">:paramref:`.case.whens`</span></a>
parameter is passed as a dictionary containing expressions to be compared
against keyed to result expressions.  The statement below is equivalent
to the preceding statement:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span>
                <span class="n">case</span><span class="p">(</span>
                    <span class="p">{</span><span class="s">&quot;wendy&quot;</span><span class="p">:</span> <span class="s">&quot;W&quot;</span><span class="p">,</span> <span class="s">&quot;jack&quot;</span><span class="p">:</span> <span class="s">&quot;J&quot;</span><span class="p">},</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">else_</span><span class="o">=</span><span class="s">&#39;E&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The values which are accepted as result values in
<a href="#id397"><span class="problematic" id="id398">:paramref:`.case.whens`</span></a> as well as with <a href="#id399"><span class="problematic" id="id400">:paramref:`.case.else_`</span></a> are
coerced from Python literals into <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> constructs.
SQL expressions, e.g. <tt class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></tt> constructs, are accepted
as well.  To coerce a literal string expression into a constant
expression rendered inline, use the <tt class="xref py py-func docutils literal"><span class="pre">literal_column()</span></tt> construct,
as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">case</span><span class="p">,</span> <span class="n">literal_column</span>

<span class="n">case</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span>
            <span class="n">orderline</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">,</span>
            <span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;greaterthan100&#39;&quot;</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">orderline</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;greaterthan10&#39;&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">],</span>
    <span class="n">else_</span><span class="o">=</span><span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;lessthan10&#39;&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The above will render the given constants without using bound
parameters for the result values (but still for the comparison
values), as in:</p>
<div class="highlight-python"><div class="highlight"><pre>CASE
    WHEN (orderline.qty &gt; :qty_1) THEN &#39;greaterthan100&#39;
    WHEN (orderline.qty &gt; :qty_2) THEN &#39;greaterthan10&#39;
    ELSE &#39;lessthan10&#39;
END
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>whens</strong> &#8211; <p>The criteria to be compared against, <a href="#id401"><span class="problematic" id="id402">:paramref:`.case.whens`</span></a>
accepts two different forms, based on whether or not <a href="#id403"><span class="problematic" id="id404">:paramref:`.case.value`</span></a>
is used.</p>
<p>In the first form, it accepts a list of 2-tuples; each 2-tuple consists
of <tt class="docutils literal"><span class="pre">(&lt;sql</span> <span class="pre">expression&gt;,</span> <span class="pre">&lt;value&gt;)</span></tt>, where the SQL expression is a
boolean expression and &#8220;value&#8221; is a resulting value, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">case</span><span class="p">([</span>
    <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span> <span class="s">&#39;W&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
<p>In the second form, it accepts a Python dictionary of comparison values
mapped to a resulting value; this form requires <a href="#id405"><span class="problematic" id="id406">:paramref:`.case.value`</span></a>
to be present, and values will be compared using the <tt class="docutils literal"><span class="pre">==</span></tt> operator,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">case</span><span class="p">(</span>
    <span class="p">{</span><span class="s">&quot;wendy&quot;</span><span class="p">:</span> <span class="s">&quot;W&quot;</span><span class="p">,</span> <span class="s">&quot;jack&quot;</span><span class="p">:</span> <span class="s">&quot;J&quot;</span><span class="p">},</span>
    <span class="n">value</span><span class="o">=</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><strong>value</strong> &#8211; An optional SQL expression which will be used as a
fixed &#8220;comparison point&#8221; for candidate values within a dictionary
passed to <a href="#id407"><span class="problematic" id="id408">:paramref:`.case.whens`</span></a>.</li>
<li><strong>else_</strong> &#8211; An optional SQL expression which will be the evaluated
result of the <tt class="docutils literal"><span class="pre">CASE</span></tt> construct if all expressions within
<a href="#id409"><span class="problematic" id="id410">:paramref:`.case.whens`</span></a> evaluate to false.  When omitted, most
databases will produce a result of NULL if none of the &#8220;when&#8221;
expressions evaulate to true.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="api.models.query.cast">
<tt class="descclassname">api.models.query.</tt><tt class="descname">cast</tt><big>(</big><em>expression</em>, <em>type_</em><big>)</big><a class="headerlink" href="#api.models.query.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <tt class="docutils literal"><span class="pre">CAST</span></tt> expression.</p>
<p><a class="reference internal" href="#api.models.query.cast" title="api.models.query.cast"><tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt></a> returns an instance of <tt class="xref py py-class docutils literal"><span class="pre">Cast</span></tt>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">Numeric</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span>
            <span class="n">cast</span><span class="p">(</span><span class="n">product_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">unit_price</span><span class="p">,</span> <span class="n">Numeric</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="p">])</span>
</pre></div>
</div>
<p>The above statement will produce SQL resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT CAST(unit_price AS NUMERIC(10, 4)) FROM product
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.cast" title="api.models.query.cast"><tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt></a> function performs two distinct functions when
used.  The first is that it renders the <tt class="docutils literal"><span class="pre">CAST</span></tt> expression within
the resulting SQL string.  The second is that it associates the given
type (e.g. <tt class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></tt> class or instance) with the column
expression on the Python side, which means the expression will take
on the expression operator behavior associated with that type,
as well as the bound-value handling and result-row-handling behavior
of the type.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span><a class="reference internal" href="#api.models.query.cast" title="api.models.query.cast"><tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt></a> now applies the given type
to the expression such that it takes effect on the bound-value,
e.g. the Python-to-database direction, in addition to the
result handling, e.g. database-to-Python, direction.</p>
</div>
<p>An alternative to <a class="reference internal" href="#api.models.query.cast" title="api.models.query.cast"><tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt></a> is the <tt class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></tt> function.
This function performs the second task of associating an expression
with a specific type, but does not render the <tt class="docutils literal"><span class="pre">CAST</span></tt> expression
in SQL.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expression</strong> &#8211; A SQL expression, such as a <tt class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></tt>
expression or a Python string which will be coerced into a bound
literal value.</li>
<li><strong>type</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></tt> class or instance indicating
the type to which the <tt class="docutils literal"><span class="pre">CAST</span></tt> should apply.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></tt> - Python-side type coercion without emitting
CAST.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.delete">
<tt class="descclassname">api.models.query.</tt><tt class="descname">delete</tt><big>(</big><em>table</em>, <em>whereclause=None</em>, <em>bind=None</em>, <em>returning=None</em>, <em>prefixes=None</em>, <em>**dialect_kw</em><big>)</big><a class="headerlink" href="#api.models.query.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct <tt class="xref py py-class docutils literal"><span class="pre">Delete</span></tt> object.</p>
<p>Similar functionality is available via the
<tt class="xref py py-meth docutils literal"><span class="pre">delete()</span></tt> method on
<tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; The table to be updated.</li>
<li><strong>whereclause</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> describing the <tt class="docutils literal"><span class="pre">WHERE</span></tt>
condition of the <tt class="docutils literal"><span class="pre">UPDATE</span></tt> statement. Note that the
<tt class="xref py py-meth docutils literal"><span class="pre">where()</span></tt> generative method may be used instead.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">deletes</em> - SQL Expression Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.desc">
<tt class="descclassname">api.models.query.</tt><tt class="descname">desc</tt><big>(</big><em>column</em><big>)</big><a class="headerlink" href="#api.models.query.desc" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a descending <tt class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></tt> clause element.</p>
<p>e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">desc</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>will produce SQL as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user ORDER BY name DESC
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.desc" title="api.models.query.desc"><tt class="xref py py-func docutils literal"><span class="pre">desc()</span></tt></a> function is a standalone version of the
<tt class="xref py py-meth docutils literal"><span class="pre">ColumnElement.desc()</span></tt> method available on all SQL expressions,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></tt> (e.g. scalar SQL expression)
with which to apply the <a class="reference internal" href="#api.models.query.desc" title="api.models.query.desc"><tt class="xref py py-func docutils literal"><span class="pre">desc()</span></tt></a> operation.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#api.models.query.asc" title="api.models.query.asc"><tt class="xref py py-func docutils literal"><span class="pre">asc()</span></tt></a></p>
<p><tt class="xref py py-func docutils literal"><span class="pre">nullsfirst()</span></tt></p>
<p><tt class="xref py py-func docutils literal"><span class="pre">nullslast()</span></tt></p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.distinct">
<tt class="descclassname">api.models.query.</tt><tt class="descname">distinct</tt><big>(</big><em>expr</em><big>)</big><a class="headerlink" href="#api.models.query.distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an column-expression-level unary <tt class="docutils literal"><span class="pre">DISTINCT</span></tt> clause.</p>
<p>This applies the <tt class="docutils literal"><span class="pre">DISTINCT</span></tt> keyword to an individual column
expression, and is typically contained within an aggregate function,
as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">distinct</span><span class="p">,</span> <span class="n">func</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))])</span>
</pre></div>
</div>
<p>The above would produce an expression resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT COUNT(DISTINCT name) FROM user
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.distinct" title="api.models.query.distinct"><tt class="xref py py-func docutils literal"><span class="pre">distinct()</span></tt></a> function is also available as a column-level
method, e.g. <tt class="xref py py-meth docutils literal"><span class="pre">ColumnElement.distinct()</span></tt>, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">distinct</span><span class="p">())])</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.distinct" title="api.models.query.distinct"><tt class="xref py py-func docutils literal"><span class="pre">distinct()</span></tt></a> operator is different from the
<tt class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></tt> method of <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt>,
which produces a <tt class="docutils literal"><span class="pre">SELECT</span></tt> statement
with <tt class="docutils literal"><span class="pre">DISTINCT</span></tt> applied to the result set as a whole,
e.g. a <tt class="docutils literal"><span class="pre">SELECT</span> <span class="pre">DISTINCT</span></tt> expression.  See that method for further
information.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref py py-meth docutils literal"><span class="pre">ColumnElement.distinct()</span></tt></p>
<p><tt class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></tt></p>
<p class="last"><tt class="xref py py-data docutils literal"><span class="pre">func</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.except_">
<tt class="descclassname">api.models.query.</tt><tt class="descname">except_</tt><big>(</big><em>*selects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.except_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <tt class="docutils literal"><span class="pre">EXCEPT</span></tt> of multiple selectables.</p>
<p>The returned object is an instance of
<tt class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></tt>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="api.models.query.except_all">
<tt class="descclassname">api.models.query.</tt><tt class="descname">except_all</tt><big>(</big><em>*selects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.except_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <tt class="docutils literal"><span class="pre">EXCEPT</span> <span class="pre">ALL</span></tt> of multiple selectables.</p>
<p>The returned object is an instance of
<tt class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></tt>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="api.models.query.exists">
<tt class="descclassname">api.models.query.</tt><tt class="descname">exists</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <tt class="xref py py-class docutils literal"><span class="pre">Exists</span></tt> against an existing
<tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> object.</p>
<p>Calling styles are of the following forms:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># use on an existing select()</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="c"># construct a select() at once</span>
<span class="n">exists</span><span class="p">([</span><span class="s">&#39;*&#39;</span><span class="p">],</span> <span class="o">**</span><span class="n">select_arguments</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span>

<span class="c"># columns argument is optional, generates &quot;EXISTS (SELECT *)&quot;</span>
<span class="c"># by default.</span>
<span class="n">exists</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.extract">
<tt class="descclassname">api.models.query.</tt><tt class="descname">extract</tt><big>(</big><em>field</em>, <em>expr</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <tt class="xref py py-class docutils literal"><span class="pre">Extract</span></tt> construct.</p>
<p>This is typically available as <a class="reference internal" href="#api.models.query.extract" title="api.models.query.extract"><tt class="xref py py-func docutils literal"><span class="pre">extract()</span></tt></a>
as well as <tt class="docutils literal"><span class="pre">func.extract</span></tt> from the
<tt class="xref py py-data docutils literal"><span class="pre">func</span></tt> namespace.</p>
</dd></dl>

<dl class="function">
<dt id="api.models.query.false">
<tt class="descclassname">api.models.query.</tt><tt class="descname">false</tt><big>(</big><big>)</big><a class="headerlink" href="#api.models.query.false" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <tt class="xref py py-class docutils literal"><span class="pre">False_</span></tt> construct.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">false</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">false</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<p>A backend which does not support true/false constants will render as
an expression against 1 or 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">false</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE 0 = 1</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.true" title="api.models.query.true"><tt class="xref py py-func docutils literal"><span class="pre">true()</span></tt></a> and <a class="reference internal" href="#api.models.query.false" title="api.models.query.false"><tt class="xref py py-func docutils literal"><span class="pre">false()</span></tt></a> constants also feature
&#8220;short circuit&#8221; operation within an <a class="reference internal" href="#api.models.query.and_" title="api.models.query.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a> or <a class="reference internal" href="#api.models.query.or_" title="api.models.query.or_"><tt class="xref py py-func docutils literal"><span class="pre">or_()</span></tt></a>
conjunction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">or_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">true</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE true</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><a class="reference internal" href="#api.models.query.true" title="api.models.query.true"><tt class="xref py py-func docutils literal"><span class="pre">true()</span></tt></a> and <a class="reference internal" href="#api.models.query.false" title="api.models.query.false"><tt class="xref py py-func docutils literal"><span class="pre">false()</span></tt></a> feature
better integrated behavior within conjunctions and on dialects
that don&#8217;t support true/false constants.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#api.models.query.true" title="api.models.query.true"><tt class="xref py py-func docutils literal"><span class="pre">true()</span></tt></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.insert">
<tt class="descclassname">api.models.query.</tt><tt class="descname">insert</tt><big>(</big><em>table</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><big>)</big><a class="headerlink" href="#api.models.query.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an <tt class="xref py py-class docutils literal"><span class="pre">Insert</span></tt> object.</p>
<p>Similar functionality is available via the
<tt class="xref py py-meth docutils literal"><span class="pre">insert()</span></tt> method on
<tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">TableClause</span></tt> which is the subject of the insert.</li>
<li><strong>values</strong> &#8211; collection of values to be inserted; see
<tt class="xref py py-meth docutils literal"><span class="pre">Insert.values()</span></tt> for a description of allowed formats here.
Can be omitted entirely; a <tt class="xref py py-class docutils literal"><span class="pre">Insert</span></tt> construct will also
dynamically render the VALUES clause at execution time based on
the parameters passed to <tt class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></tt>.</li>
<li><strong>inline</strong> &#8211; if True, SQL defaults will be compiled &#8216;inline&#8217; into the
statement and not pre-executed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If both <cite>values</cite> and compile-time bind parameters are present, the
compile-time bind parameters override the information specified
within <cite>values</cite> on a per-key basis.</p>
<p>The keys within <cite>values</cite> can be either <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects or their string identifiers. Each key may reference one of:</p>
<ul class="simple">
<li>a literal data value (i.e. string, number, etc.);</li>
<li>a Column object;</li>
<li>a SELECT statement.</li>
</ul>
<p>If a <tt class="docutils literal"><span class="pre">SELECT</span></tt> statement is specified which references this
<tt class="docutils literal"><span class="pre">INSERT</span></tt> statement&#8217;s table, the statement will be correlated
against the <tt class="docutils literal"><span class="pre">INSERT</span></tt> statement.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">coretutorial_insert_expressions</em> - SQL Expression Tutorial</p>
<p class="last"><em class="xref std std-ref">inserts_and_updates</em> - SQL Expression Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.intersect">
<tt class="descclassname">api.models.query.</tt><tt class="descname">intersect</tt><big>(</big><em>*selects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <tt class="docutils literal"><span class="pre">INTERSECT</span></tt> of multiple selectables.</p>
<p>The returned object is an instance of
<tt class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></tt>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="api.models.query.intersect_all">
<tt class="descclassname">api.models.query.</tt><tt class="descname">intersect_all</tt><big>(</big><em>*selects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.intersect_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <tt class="docutils literal"><span class="pre">INTERSECT</span> <span class="pre">ALL</span></tt> of multiple selectables.</p>
<p>The returned object is an instance of
<tt class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></tt>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="api.models.query.join">
<tt class="descclassname">api.models.query.</tt><tt class="descname">join</tt><big>(</big><em>left</em>, <em>right</em>, <em>onclause=None</em>, <em>isouter=False</em><big>)</big><a class="headerlink" href="#api.models.query.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> object, given two <tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt>
expressions.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">j</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">user_table</span><span class="p">,</span> <span class="n">address_table</span><span class="p">,</span> <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">address_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">user_table</span><span class="p">])</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<p>would emit SQL along the lines of:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT user.id, user.name FROM user
JOIN address ON user.id = address.user_id
</pre></div>
</div>
<p>Similar functionality is available given any <tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt> object
(e.g. such as a <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>) using the <tt class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></tt>
method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left</strong> &#8211; The left side of the join.</li>
<li><strong>right</strong> &#8211; the right side of the join; this is any <tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt>
object such as a <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> object, and may also be a selectable-compatible
object such as an ORM-mapped class.</li>
<li><strong>onclause</strong> &#8211; a SQL expression representing the ON clause of the
join.  If left at <tt class="docutils literal"><span class="pre">None</span></tt>, <tt class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></tt> will attempt to
join the two tables based on a foreign key relationship.</li>
<li><strong>isouter</strong> &#8211; if True, render a LEFT OUTER JOIN, instead of JOIN.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></tt> - method form, based on a given left side</p>
<p class="last"><tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> - the type of object produced</p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.null">
<tt class="descclassname">api.models.query.</tt><tt class="descname">null</tt><big>(</big><big>)</big><a class="headerlink" href="#api.models.query.null" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <tt class="xref py py-class docutils literal"><span class="pre">Null</span></tt> construct.</p>
</dd></dl>

<dl class="function">
<dt id="api.models.query.or_">
<tt class="descclassname">api.models.query.</tt><tt class="descname">or_</tt><big>(</big><em>*clauses</em><big>)</big><a class="headerlink" href="#api.models.query.or_" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a conjunction of expressions joined by <tt class="docutils literal"><span class="pre">OR</span></tt>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">or_</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">or_</span><span class="p">(</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.or_" title="api.models.query.or_"><tt class="xref py py-func docutils literal"><span class="pre">or_()</span></tt></a> conjunction is also available using the
Python <tt class="docutils literal"><span class="pre">|</span></tt> operator (though note that compound expressions
need to be parenthesized in order to function with Python
operator precedence behavior):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span> <span class="o">|</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#api.models.query.and_" title="api.models.query.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.outerjoin">
<tt class="descclassname">api.models.query.</tt><tt class="descname">outerjoin</tt><big>(</big><em>left</em>, <em>right</em>, <em>onclause=None</em><big>)</big><a class="headerlink" href="#api.models.query.outerjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <tt class="docutils literal"><span class="pre">OUTER</span> <span class="pre">JOIN</span></tt> clause element.</p>
<p>The returned object is an instance of <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt>.</p>
<p>Similar functionality is also available via the
<tt class="xref py py-meth docutils literal"><span class="pre">outerjoin()</span></tt> method on any
<tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left</strong> &#8211; The left side of the join.</li>
<li><strong>right</strong> &#8211; The right side of the join.</li>
<li><strong>onclause</strong> &#8211; Optional criterion for the <tt class="docutils literal"><span class="pre">ON</span></tt> clause, is
derived from foreign key relationships established between
left and right otherwise.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>To chain joins together, use the <tt class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></tt> or
<tt class="xref py py-meth docutils literal"><span class="pre">FromClause.outerjoin()</span></tt> methods on the resulting
<tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> object.</p>
</dd></dl>

<dl class="function">
<dt id="api.models.query.over">
<tt class="descclassname">api.models.query.</tt><tt class="descname">over</tt><big>(</big><em>func</em>, <em>partition_by=None</em>, <em>order_by=None</em><big>)</big><a class="headerlink" href="#api.models.query.over" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an <tt class="xref py py-class docutils literal"><span class="pre">Over</span></tt> object against a function.</p>
<p>Used against aggregate or so-called &#8220;window&#8221; functions,
for database backends that support window functions.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">over</span>
<span class="n">over</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">row_number</span><span class="p">(),</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Would produce &#8220;ROW_NUMBER() OVER(ORDER BY x)&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> &#8211; a <tt class="xref py py-class docutils literal"><span class="pre">FunctionElement</span></tt> construct, typically
generated by <tt class="xref py py-data docutils literal"><span class="pre">func</span></tt>.</li>
<li><strong>partition_by</strong> &#8211; a column element or string, or a list
of such, that will be used as the PARTITION BY clause
of the OVER construct.</li>
<li><strong>order_by</strong> &#8211; a column element or string, or a list
of such, that will be used as the ORDER BY clause
of the OVER construct.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function is also available from the <tt class="xref py py-data docutils literal"><span class="pre">func</span></tt>
construct itself via the <tt class="xref py py-meth docutils literal"><span class="pre">FunctionElement.over()</span></tt> method.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.select">
<tt class="descclassname">api.models.query.</tt><tt class="descname">select</tt><big>(</big><em>columns=None</em>, <em>whereclause=None</em>, <em>from_obj=None</em>, <em>distinct=False</em>, <em>having=None</em>, <em>correlate=True</em>, <em>prefixes=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt>.</p>
<p>Similar functionality is also available via the <tt class="xref py py-meth docutils literal"><span class="pre">FromClause.select()</span></tt>
method on any <tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt>.</p>
<p>All arguments which accept <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> arguments also accept
string arguments, which will be converted as appropriate into
either <a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> or <tt class="xref py py-func docutils literal"><span class="pre">literal_column()</span></tt> constructs.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">coretutorial_selecting</em> - Core Tutorial description of
<a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>columns</strong> &#8211; <p>A list of <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> objects, typically
<tt class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></tt> objects or subclasses, which will form the
columns clause of the resulting statement. For all members which are
instances of <tt class="xref py py-class docutils literal"><span class="pre">Selectable</span></tt>, the individual <tt class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></tt>
members of the <tt class="xref py py-class docutils literal"><span class="pre">Selectable</span></tt> will be added individually to the
columns clause. For example, specifying a
<tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> instance will result in all the
contained <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects within to be added
to the columns clause.</p>
<p>This argument is not present on the form of <a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>
available on <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
</li>
<li><strong>whereclause</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> expression which will be used to form the
<tt class="docutils literal"><span class="pre">WHERE</span></tt> clause.</li>
<li><strong>from_obj</strong> &#8211; A list of <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> objects which will be added to the
<tt class="docutils literal"><span class="pre">FROM</span></tt> clause of the resulting statement. Note that &#8220;from&#8221; objects are
automatically located within the columns and whereclause ClauseElements.
Use this parameter to explicitly specify &#8220;from&#8221; objects which are not
automatically locatable. This could include
<tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> objects that aren&#8217;t otherwise present,
or <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> objects whose presence will supersede that of the
<tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> objects already located in the other
clauses.</li>
<li><strong>autocommit</strong> &#8211; Deprecated.  Use .execution_options(autocommit=&lt;True|False&gt;)
to set the autocommit option.</li>
<li><strong>bind=None</strong> &#8211; an <tt class="xref py py-class docutils literal"><span class="pre">Engine</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">Connection</span></tt> instance
to which the
resulting <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> object will be bound.  The <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt>
object will otherwise automatically bind to whatever
<tt class="xref py py-class docutils literal"><span class="pre">Connectable</span></tt> instances can be located within its contained
<tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> members.</li>
<li><strong>correlate=True</strong> &#8211; indicates that this <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> object should have its
contained <tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt> elements &#8220;correlated&#8221; to an enclosing
<tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> object.  This means that any <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt>
instance within the &#8220;froms&#8221; collection of this <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt>
which is also present in the &#8220;froms&#8221; collection of an
enclosing select will not be rendered in the <tt class="docutils literal"><span class="pre">FROM</span></tt> clause
of this select statement.</li>
<li><strong>distinct=False</strong> &#8211; <p>when <tt class="docutils literal"><span class="pre">True</span></tt>, applies a <tt class="docutils literal"><span class="pre">DISTINCT</span></tt> qualifier to the columns
clause of the resulting statement.</p>
<p>The boolean argument may also be a column expression or list
of column expressions - this is a special calling form which
is understood by the Postgresql dialect to render the
<tt class="docutils literal"><span class="pre">DISTINCT</span> <span class="pre">ON</span> <span class="pre">(&lt;columns&gt;)</span></tt> syntax.</p>
<p><tt class="docutils literal"><span class="pre">distinct</span></tt> is also available via the <tt class="xref py py-meth docutils literal"><span class="pre">distinct()</span></tt>
generative method.</p>
</li>
<li><strong>for_update=False</strong> &#8211; <blockquote>
<div>when <tt class="docutils literal"><span class="pre">True</span></tt>, applies <tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></tt> to the end of the
resulting statement.<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>- use <tt class="xref py py-meth docutils literal"><span class="pre">GenerativeSelect.with_for_update()</span></tt>
to specify the structure of the <tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></tt> clause.</p>
</div>
<p><tt class="docutils literal"><span class="pre">for_update</span></tt> accepts various string values interpreted by
specific backends, including:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">&quot;read&quot;</span></tt> - on MySQL, translates to <tt class="docutils literal"><span class="pre">LOCK</span> <span class="pre">IN</span> <span class="pre">SHARE</span> <span class="pre">MODE</span></tt>;
on Postgresql, translates to <tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">SHARE</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">&quot;nowait&quot;</span></tt> - on Postgresql and Oracle, translates to
<tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">NOWAIT</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">&quot;read_nowait&quot;</span></tt> - on Postgresql, translates to
<tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">SHARE</span> <span class="pre">NOWAIT</span></tt>.</li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">GenerativeSelect.with_for_update()</span></tt> - improved API for
specifying the <tt class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></tt> clause.</p>
</div>
</li>
<li><strong>group_by</strong> &#8211; a list of <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> objects which will comprise the
<tt class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></tt> clause of the resulting select.</li>
<li><strong>having</strong> &#8211; a <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> that will comprise the <tt class="docutils literal"><span class="pre">HAVING</span></tt> clause
of the resulting select when <tt class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></tt> is used.</li>
<li><strong>limit=None</strong> &#8211; a numerical value which usually compiles to a <tt class="docutils literal"><span class="pre">LIMIT</span></tt>
expression in the resulting select.  Databases that don&#8217;t
support <tt class="docutils literal"><span class="pre">LIMIT</span></tt> will attempt to provide similar
functionality.</li>
<li><strong>offset=None</strong> &#8211; a numeric value which usually compiles to an <tt class="docutils literal"><span class="pre">OFFSET</span></tt>
expression in the resulting select.  Databases that don&#8217;t
support <tt class="docutils literal"><span class="pre">OFFSET</span></tt> will attempt to provide similar
functionality.</li>
<li><strong>order_by</strong> &#8211; a scalar or list of <tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt> objects which will
comprise the <tt class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></tt> clause of the resulting select.</li>
<li><strong>use_labels=False</strong> &#8211; <p>when <tt class="docutils literal"><span class="pre">True</span></tt>, the statement will be generated using labels
for each column in the columns clause, which qualify each
column with its parent table&#8217;s (or aliases) name so that name
conflicts between columns in different tables don&#8217;t occur.
The format of the label is &lt;tablename&gt;_&lt;column&gt;.  The &#8220;c&#8221;
collection of the resulting <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> object will use these
names as well for targeting column members.</p>
<p>use_labels is also available via the <tt class="xref py py-meth docutils literal"><span class="pre">apply_labels()</span></tt>
generative method.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="api.models.query.text">
<tt class="descclassname">api.models.query.</tt><tt class="descname">text</tt><big>(</big><em>text</em>, <em>bind=None</em>, <em>bindparams=None</em>, <em>typemap=None</em>, <em>autocommit=None</em><big>)</big><a class="headerlink" href="#api.models.query.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <tt class="xref py py-class docutils literal"><span class="pre">TextClause</span></tt> clause, representing
a textual SQL string directly.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>fom sqlalchemy import text

t = text(&quot;SELECT * FROM users&quot;)
result = connection.execute(t)
</pre></div>
</div>
<p>The advantages <a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> provides over a plain string are
backend-neutral support for bind parameters, per-statement
execution options, as well as
bind parameter and result-column typing behavior, allowing
SQLAlchemy type constructs to play a role when executing
a statement that is specified literally.  The construct can also
be provided with a <tt class="docutils literal"><span class="pre">.c</span></tt> collection of column elements, allowing
it to be embedded in other SQL expression constructs as a subquery.</p>
<p>Bind parameters are specified by name, using the format <tt class="docutils literal"><span class="pre">:name</span></tt>.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>For SQL statements where a colon is required verbatim, as within
an inline string, use a backslash to escape:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE name=&#39;\:username&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">TextClause</span></tt> construct includes methods which can
provide information about the bound parameters as well as the column
values which would be returned from the textual statement, assuming
it&#8217;s an executable SELECT type of statement.  The <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt>
method is used to provide bound parameter detail, and
<tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt> method allows specification of
return columns including names and types:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">bindparams</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> construct is used internally in cases when
a literal string is specified for part of a larger query, such as
when a string is specified to the <tt class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></tt> method of
<tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt>.  In those cases, the same
bind parameter syntax is applied:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">&quot;id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> explicitly usually implies the construction
of a full, standalone statement.   As such, SQLAlchemy refers
to it as an <tt class="xref py py-class docutils literal"><span class="pre">Executable</span></tt> object, and it supports
the <tt class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></tt> method.  For example,
a <a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> construct that should be subject to &#8220;autocommit&#8221;
can be set explicitly so using the <a href="#id411"><span class="problematic" id="id412">:paramref:`.Connection.execution_options.autocommit`</span></a>
option:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;EXEC my_procedural_thing()&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">execution_options</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that SQLAlchemy&#8217;s usual &#8220;autocommit&#8221; behavior applies to
<a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> constructs implicitly - that is, statements which begin
with a phrase such as <tt class="docutils literal"><span class="pre">INSERT</span></tt>, <tt class="docutils literal"><span class="pre">UPDATE</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>,
or a variety of other phrases specific to certain backends, will
be eligible for autocommit if no transaction is in progress.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text of the SQL statement to be created.  use <tt class="docutils literal"><span class="pre">:&lt;param&gt;</span></tt>
to specify bind parameters; they will be compiled to their
engine-specific format.</li>
<li><strong>autocommit</strong> &#8211; Deprecated.  Use .execution_options(autocommit=&lt;True|False&gt;)
to set the autocommit option.</li>
<li><strong>bind</strong> &#8211; an optional connection or engine to be used for this text query.</li>
<li><strong>bindparams</strong> &#8211; <p>Deprecated.  A list of <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> instances used to
provide information about parameters embedded in the statement.
This argument now invokes the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt>
method on the construct before returning it.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">,</span>
          <span class="n">bindparams</span><span class="o">=</span><span class="p">[</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">)])</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">)</span><span class="o">.</span>\
          <span class="n">bindparams</span><span class="p">(</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">))</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt> method
supersedes the <tt class="docutils literal"><span class="pre">bindparams</span></tt> argument to <a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a>.</p>
</div>
</li>
<li><strong>typemap</strong> &#8211; <p>Deprecated.  A dictionary mapping the names of columns
represented in the columns clause of a <tt class="docutils literal"><span class="pre">SELECT</span></tt> statement
to type objects,
which will be used to perform post-processing on columns within
the result set.  This parameter now invokes the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt>
method, which returns a <tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt> construct that gains
a <tt class="docutils literal"><span class="pre">.c</span></tt> collection and can be embedded in other expressions.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">,</span>
              <span class="n">typemap</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">Integer</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">},</span>
          <span class="p">)</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>
</pre></div>
</div>
<p>Or alternatively:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.sql</span> <span class="kn">import</span> <span class="n">column</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">)</span>
                  <span class="p">)</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt> method
supersedes the <tt class="docutils literal"><span class="pre">typemap</span></tt> argument to <a class="reference internal" href="#api.models.query.text" title="api.models.query.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a>.</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="api.models.query.true">
<tt class="descclassname">api.models.query.</tt><tt class="descname">true</tt><big>(</big><big>)</big><a class="headerlink" href="#api.models.query.true" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <tt class="xref py py-class docutils literal"><span class="pre">True_</span></tt> construct.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">true</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">true</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE true</span>
</pre></div>
</div>
<p>A backend which does not support true/false constants will render as
an expression against 1 or 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">true</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE 1 = 1</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.query.true" title="api.models.query.true"><tt class="xref py py-func docutils literal"><span class="pre">true()</span></tt></a> and <a class="reference internal" href="#api.models.query.false" title="api.models.query.false"><tt class="xref py py-func docutils literal"><span class="pre">false()</span></tt></a> constants also feature
&#8220;short circuit&#8221; operation within an <a class="reference internal" href="#api.models.query.and_" title="api.models.query.and_"><tt class="xref py py-func docutils literal"><span class="pre">and_()</span></tt></a> or <a class="reference internal" href="#api.models.query.or_" title="api.models.query.or_"><tt class="xref py py-func docutils literal"><span class="pre">or_()</span></tt></a>
conjunction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">or_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">true</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE true</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><a class="reference internal" href="#api.models.query.true" title="api.models.query.true"><tt class="xref py py-func docutils literal"><span class="pre">true()</span></tt></a> and <a class="reference internal" href="#api.models.query.false" title="api.models.query.false"><tt class="xref py py-func docutils literal"><span class="pre">false()</span></tt></a> feature
better integrated behavior within conjunctions and on dialects
that don&#8217;t support true/false constants.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#api.models.query.false" title="api.models.query.false"><tt class="xref py py-func docutils literal"><span class="pre">false()</span></tt></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.tuple_">
<tt class="descclassname">api.models.query.</tt><tt class="descname">tuple_</tt><big>(</big><em>*clauses</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#api.models.query.tuple_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <tt class="xref py py-class docutils literal"><span class="pre">Tuple</span></tt>.</p>
<p>Main usage is to produce a composite IN construct:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">tuple_</span>

<span class="n">tuple_</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="p">)</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span>
    <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The composite IN construct is not supported by all backends,
and is currently known to work on Postgresql and MySQL,
but not SQLite.   Unsupported backends will raise
a subclass of <tt class="xref py py-class docutils literal"><span class="pre">DBAPIError</span></tt> when such
an expression is invoked.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="api.models.query.union">
<tt class="descclassname">api.models.query.</tt><tt class="descname">union</tt><big>(</big><em>*selects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <tt class="docutils literal"><span class="pre">UNION</span></tt> of multiple selectables.</p>
<p>The returned object is an instance of
<tt class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></tt>.</p>
<p>A similar <a class="reference internal" href="#api.models.query.union" title="api.models.query.union"><tt class="xref py py-func docutils literal"><span class="pre">union()</span></tt></a> method is available on all
<tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt> subclasses.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="api.models.query.union_all">
<tt class="descclassname">api.models.query.</tt><tt class="descname">union_all</tt><big>(</big><em>*selects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#api.models.query.union_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <tt class="docutils literal"><span class="pre">UNION</span> <span class="pre">ALL</span></tt> of multiple selectables.</p>
<p>The returned object is an instance of
<tt class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></tt>.</p>
<p>A similar <a class="reference internal" href="#api.models.query.union_all" title="api.models.query.union_all"><tt class="xref py py-func docutils literal"><span class="pre">union_all()</span></tt></a> method is available on all
<tt class="xref py py-class docutils literal"><span class="pre">FromClause</span></tt> subclasses.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="api.models.query.update">
<tt class="descclassname">api.models.query.</tt><tt class="descname">update</tt><big>(</big><em>table</em>, <em>whereclause=None</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><big>)</big><a class="headerlink" href="#api.models.query.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an <tt class="xref py py-class docutils literal"><span class="pre">Update</span></tt> object.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">update</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">users</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;user #5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Similar functionality is available via the
<tt class="xref py py-meth docutils literal"><span class="pre">update()</span></tt> method on
<tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span>\
            <span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;user #5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> object representing the database
table to be updated.</li>
<li><strong>whereclause</strong> &#8211; <p>Optional SQL expression describing the <tt class="docutils literal"><span class="pre">WHERE</span></tt>
condition of the <tt class="docutils literal"><span class="pre">UPDATE</span></tt> statement.   Modern applications
may prefer to use the generative <tt class="xref py py-meth docutils literal"><span class="pre">where()</span></tt>
method to specify the <tt class="docutils literal"><span class="pre">WHERE</span></tt> clause.</p>
<p>The WHERE clause can refer to multiple tables.
For databases which support this, an <tt class="docutils literal"><span class="pre">UPDATE</span> <span class="pre">FROM</span></tt> clause will
be generated, or on MySQL, a multi-table update.  The statement
will fail on databases that don&#8217;t have support for multi-table
update statements.  A SQL-standard method of referring to
additional tables in the WHERE clause is to use a correlated
subquery:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ed&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
        <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="n">select</span><span class="p">([</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">email_address</span><span class="p">])</span><span class="o">.</span>\
                    <span class="n">where</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="o">==</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span>\
                    <span class="n">as_scalar</span><span class="p">()</span>
        <span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7.4: </span>The WHERE clause can refer to multiple tables.</p>
</div>
</li>
<li><strong>values</strong> &#8211; <p>Optional dictionary which specifies the <tt class="docutils literal"><span class="pre">SET</span></tt> conditions of the
<tt class="docutils literal"><span class="pre">UPDATE</span></tt>.  If left as <tt class="docutils literal"><span class="pre">None</span></tt>, the <tt class="docutils literal"><span class="pre">SET</span></tt>
conditions are determined from those parameters passed to the
statement during the execution and/or compilation of the
statement.   When compiled standalone without any parameters,
the <tt class="docutils literal"><span class="pre">SET</span></tt> clause generates for all columns.</p>
<p>Modern applications may prefer to use the generative
<tt class="xref py py-meth docutils literal"><span class="pre">Update.values()</span></tt> method to set the values of the
UPDATE statement.</p>
</li>
<li><strong>inline</strong> &#8211; if True, SQL defaults present on <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects via
the <tt class="docutils literal"><span class="pre">default</span></tt> keyword will be compiled &#8216;inline&#8217; into the statement
and not pre-executed.  This means that their values will not
be available in the dictionary returned from
<tt class="xref py py-meth docutils literal"><span class="pre">ResultProxy.last_updated_params()</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If both <tt class="docutils literal"><span class="pre">values</span></tt> and compile-time bind parameters are present, the
compile-time bind parameters override the information specified
within <tt class="docutils literal"><span class="pre">values</span></tt> on a per-key basis.</p>
<p>The keys within <tt class="docutils literal"><span class="pre">values</span></tt> can be either <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects or their string identifiers (specifically the &#8220;key&#8221; of the
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>, normally but not necessarily equivalent to
its &#8220;name&#8221;).  Normally, the
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects used here are expected to be
part of the target <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> that is the table
to be updated.  However when using MySQL, a multiple-table
UPDATE statement can refer to columns from any of
the tables referred to in the WHERE clause.</p>
<p>The values referred to in <tt class="docutils literal"><span class="pre">values</span></tt> are typically:</p>
<ul class="simple">
<li>a literal data value (i.e. string, number, etc.)</li>
<li>a SQL expression, such as a related <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>,
a scalar-returning <a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> construct,
etc.</li>
</ul>
<p>When combining <a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> constructs within the values
clause of an <a class="reference internal" href="#api.models.query.update" title="api.models.query.update"><tt class="xref py py-func docutils literal"><span class="pre">update()</span></tt></a> construct,
the subquery represented by the <a class="reference internal" href="#api.models.query.select" title="api.models.query.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a> should be
<em>correlated</em> to the parent table, that is, providing criterion
which links the table inside the subquery to the outer table
being updated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">select</span><span class="p">([</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">email_address</span><span class="p">])</span><span class="o">.</span>\
                <span class="n">where</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="o">==</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span>\
                <span class="n">as_scalar</span><span class="p">()</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">inserts_and_updates</em> - SQL Expression
Language Tutorial</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-api.models.user">
<span id="api-models-user-module"></span><h2>api.models.user module<a class="headerlink" href="#module-api.models.user" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.models.user.User">
<em class="property">class </em><tt class="descclassname">api.models.user.</tt><tt class="descname">User</tt><big>(</big><em>name</em>, <em>username</em>, <em>email</em>, <em>pw_hash</em>, <em>pw_salt</em><big>)</big><a class="reference internal" href="_modules/api/models/user.html#User"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.user.User" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></tt>, <a class="reference internal" href="#api.models.basemodel.Serializer" title="api.models.basemodel.Serializer"><tt class="xref py py-class docutils literal"><span class="pre">api.models.basemodel.Serializer</span></tt></a></p>
<dl class="attribute">
<dt id="api.models.user.User.about">
<tt class="descname">about</tt><a class="headerlink" href="#api.models.user.User.about" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.activation">
<tt class="descname">activation</tt><a class="headerlink" href="#api.models.user.User.activation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.albums">
<tt class="descname">albums</tt><a class="headerlink" href="#api.models.user.User.albums" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.bg">
<tt class="descname">bg</tt><a class="headerlink" href="#api.models.user.User.bg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.bg_id">
<tt class="descname">bg_id</tt><a class="headerlink" href="#api.models.user.User.bg_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.bgx">
<tt class="descname">bgx</tt><a class="headerlink" href="#api.models.user.User.bgx" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.bgy">
<tt class="descname">bgy</tt><a class="headerlink" href="#api.models.user.User.bgy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.birthday">
<tt class="descname">birthday</tt><a class="headerlink" href="#api.models.user.User.birthday" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.city">
<tt class="descname">city</tt><a class="headerlink" href="#api.models.user.User.city" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.country">
<tt class="descname">country</tt><a class="headerlink" href="#api.models.user.User.country" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.email">
<tt class="descname">email</tt><a class="headerlink" href="#api.models.user.User.email" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.facebook">
<tt class="descname">facebook</tt><a class="headerlink" href="#api.models.user.User.facebook" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.getlist_privacy_level">
<tt class="descname">getlist_privacy_level</tt><a class="headerlink" href="#api.models.user.User.getlist_privacy_level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.gplus">
<tt class="descname">gplus</tt><a class="headerlink" href="#api.models.user.User.gplus" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.headerbgx">
<tt class="descname">headerbgx</tt><a class="headerlink" href="#api.models.user.User.headerbgx" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.headerbgy">
<tt class="descname">headerbgy</tt><a class="headerlink" href="#api.models.user.User.headerbgy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.hometown">
<tt class="descname">hometown</tt><a class="headerlink" href="#api.models.user.User.hometown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.id">
<tt class="descname">id</tt><a class="headerlink" href="#api.models.user.User.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.is_pin_loader">
<tt class="descname">is_pin_loader</tt><a class="headerlink" href="#api.models.user.User.is_pin_loader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.linkedin">
<tt class="descname">linkedin</tt><a class="headerlink" href="#api.models.user.User.linkedin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.locale">
<tt class="descname">locale</tt><a class="headerlink" href="#api.models.user.User.locale" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.login_source">
<tt class="descname">login_source</tt><a class="headerlink" href="#api.models.user.User.login_source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.logintoken">
<tt class="descname">logintoken</tt><a class="headerlink" href="#api.models.user.User.logintoken" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.name">
<tt class="descname">name</tt><a class="headerlink" href="#api.models.user.User.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.pic_id">
<tt class="descname">pic_id</tt><a class="headerlink" href="#api.models.user.User.pic_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.pic_obj">
<tt class="descname">pic_obj</tt><a class="headerlink" href="#api.models.user.User.pic_obj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.private">
<tt class="descname">private</tt><a class="headerlink" href="#api.models.user.User.private" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.pw_hash">
<tt class="descname">pw_hash</tt><a class="headerlink" href="#api.models.user.User.pw_hash" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.pw_salt">
<tt class="descname">pw_salt</tt><a class="headerlink" href="#api.models.user.User.pw_salt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.seriesid">
<tt class="descname">seriesid</tt><a class="headerlink" href="#api.models.user.User.seriesid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.show_views">
<tt class="descname">show_views</tt><a class="headerlink" href="#api.models.user.User.show_views" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.timestamp">
<tt class="descname">timestamp</tt><a class="headerlink" href="#api.models.user.User.timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="api.models.user.User.to_serializable_dict">
<tt class="descname">to_serializable_dict</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/api/models/user.html#User.to_serializable_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.models.user.User.to_serializable_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.twitter">
<tt class="descname">twitter</tt><a class="headerlink" href="#api.models.user.User.twitter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.username">
<tt class="descname">username</tt><a class="headerlink" href="#api.models.user.User.username" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.views">
<tt class="descname">views</tt><a class="headerlink" href="#api.models.user.User.views" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.website">
<tt class="descname">website</tt><a class="headerlink" href="#api.models.user.User.website" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.models.user.User.zip">
<tt class="descname">zip</tt><a class="headerlink" href="#api.models.user.User.zip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="api.models.user.relationship">
<tt class="descclassname">api.models.user.</tt><tt class="descname">relationship</tt><big>(</big><em>argument</em>, <em>secondary=None</em>, <em>primaryjoin=None</em>, <em>secondaryjoin=None</em>, <em>foreign_keys=None</em>, <em>uselist=None</em>, <em>order_by=False</em>, <em>backref=None</em>, <em>back_populates=None</em>, <em>post_update=False</em>, <em>cascade=False</em>, <em>extension=None</em>, <em>viewonly=False</em>, <em>lazy=True</em>, <em>collection_class=None</em>, <em>passive_deletes=False</em>, <em>passive_updates=True</em>, <em>remote_side=None</em>, <em>enable_typechecks=True</em>, <em>join_depth=None</em>, <em>comparator_factory=None</em>, <em>single_parent=False</em>, <em>innerjoin=False</em>, <em>distinct_target_key=None</em>, <em>doc=None</em>, <em>active_history=False</em>, <em>cascade_backrefs=True</em>, <em>load_on_pending=False</em>, <em>strategy_class=None</em>, <em>_local_remote_pairs=None</em>, <em>query_class=None</em>, <em>info=None</em><big>)</big><a class="headerlink" href="#api.models.user.relationship" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a relationship between two mapped classes.</p>
<p>This corresponds to a parent-child or associative table relationship.  The
constructed class is an instance of <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty</span></tt>.</p>
<p>A typical <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>, used in a classical mapping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
  <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Child</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Some arguments accepted by <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> optionally accept a
callable function, which when called produces the desired value.
The callable is invoked by the parent <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> at &#8220;mapper
initialization&#8221; time, which happens only when mappers are first used, and
is assumed to be after all mappings have been constructed.  This can be
used to resolve order-of-declaration and other dependency issues, such as
if <tt class="docutils literal"><span class="pre">Child</span></tt> is declared below <tt class="docutils literal"><span class="pre">Parent</span></tt> in the same file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&quot;children&quot;</span><span class="p">:</span><span class="n">relationship</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="p">,</span>
                        <span class="n">order_by</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>When using the <em class="xref std std-ref">declarative_toplevel</em> extension, the Declarative
initializer allows string arguments to be passed to <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.
These string arguments are converted into callables that evaluate
the string as Python code, using the Declarative
class-registry as a namespace.  This allows the lookup of related
classes to be automatic via their string name, and removes the need to
import related classes at all into the local module space:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;parent&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">&quot;Child&quot;</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&quot;Child.id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_config_toplevel</em> - Full introductory and reference
documentation for <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>.</p>
<p class="last"><em class="xref std std-ref">orm_tutorial_relationship</em> - ORM tutorial introduction.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>argument</strong> &#8211; <p>a mapped class, or actual <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> instance, representing the
target of the relationship.</p>
<p><a href="#id413"><span class="problematic" id="id414">:paramref:`~.relationship.argument`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">declarative_configuring_relationships</em> - further detail
on relationship configuration when using Declarative.</p>
</div>
</li>
<li><strong>secondary</strong> &#8211; <p>for a many-to-many relationship, specifies the intermediary
table, and is typically an instance of <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.
In less common circumstances, the argument may also be specified
as an <tt class="xref py py-class docutils literal"><span class="pre">Alias</span></tt> construct, or even a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> construct.</p>
<p><a href="#id415"><span class="problematic" id="id416">:paramref:`~.relationship.secondary`</span></a> may
also be passed as a callable function which is evaluated at
mapper initialization time.  When using Declarative, it may also
be a string argument noting the name of a <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> that is
present in the <tt class="xref py py-class docutils literal"><span class="pre">MetaData</span></tt> collection associated with the
parent-mapped <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>.</p>
<p>The <a href="#id417"><span class="problematic" id="id418">:paramref:`~.relationship.secondary`</span></a> keyword argument is typically
applied in the case where the intermediary <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> is not
otherwise exprssed in any direct class mapping. If the &#8220;secondary&#8221; table
is also explicitly mapped elsewhere
(e.g. as in <em class="xref std std-ref">association_pattern</em>), one should consider applying
the <a href="#id419"><span class="problematic" id="id420">:paramref:`~.relationship.viewonly`</span></a> flag so that this <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
is not used for persistence operations which may conflict with those
of the association object pattern.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_many_to_many</em> - Reference example of &#8220;many to many&#8221;.</p>
<p><em class="xref std std-ref">orm_tutorial_many_to_many</em> - ORM tutorial introduction to
many-to-many relationships.</p>
<p><em class="xref std std-ref">self_referential_many_to_many</em> - Specifics on using many-to-many
in a self-referential case.</p>
<p><em class="xref std std-ref">declarative_many_to_many</em> - Additional options when using
Declarative.</p>
<p><em class="xref std std-ref">association_pattern</em> - an alternative to <a href="#id421"><span class="problematic" id="id422">:paramref:`~.relationship.secondary`</span></a>
when composing association table relationships, allowing additional
attributes to be specified on the association table.</p>
<p class="last"><em class="xref std std-ref">composite_secondary_join</em> - a lesser-used pattern which in some
cases can enable complex <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> SQL conditions
to be used.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.2: </span><a href="#id423"><span class="problematic" id="id424">:paramref:`~.relationship.secondary`</span></a> works
more effectively when referring to a <tt class="xref py py-class docutils literal"><span class="pre">Join</span></tt> instance.</p>
</div>
</li>
<li><strong>active_history=False</strong> &#8211; When <tt class="docutils literal"><span class="pre">True</span></tt>, indicates that the &#8220;previous&#8221; value for a
many-to-one reference should be loaded when replaced, if
not already loaded. Normally, history tracking logic for
simple many-to-ones only needs to be aware of the &#8220;new&#8221;
value in order to perform a flush. This flag is available
for applications that make use of
<tt class="xref py py-func docutils literal"><span class="pre">attributes.get_history()</span></tt> which also need to know
the &#8220;previous&#8221; value of the attribute.</li>
<li><strong>backref</strong> &#8211; <p>indicates the string name of a property to be placed on the related
mapper&#8217;s class that will handle this relationship in the other
direction. The other property will be created automatically
when the mappers are configured.  Can also be passed as a
<tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> object to control the configuration of the
new relationship.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p><a href="#id425"><span class="problematic" id="id426">:paramref:`~.relationship.back_populates`</span></a> - alternative form
of backref specification.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">backref()</span></tt> - allows control over <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
configuration when using <a href="#id427"><span class="problematic" id="id428">:paramref:`~.relationship.backref`</span></a>.</p>
</div>
</li>
<li><strong>back_populates</strong> &#8211; <p>Takes a string name and has the same meaning as <a href="#id429"><span class="problematic" id="id430">:paramref:`~.relationship.backref`</span></a>,
except the complementing property is <strong>not</strong> created automatically,
and instead must be configured explicitly on the other mapper.  The
complementing property should also indicate <a href="#id431"><span class="problematic" id="id432">:paramref:`~.relationship.back_populates`</span></a>
to this relationship to ensure proper functioning.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationships_backref</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id433"><span class="problematic" id="id434">:paramref:`~.relationship.backref`</span></a> - alternative form
of backref specification.</p>
</div>
</li>
<li><strong>cascade</strong> &#8211; <p>a comma-separated list of cascade rules which determines how
Session operations should be &#8220;cascaded&#8221; from parent to child.
This defaults to <tt class="docutils literal"><span class="pre">False</span></tt>, which means the default cascade
should be used - this default cascade is <tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge&quot;</span></tt>.</p>
<p>The available cascades are <tt class="docutils literal"><span class="pre">save-update</span></tt>, <tt class="docutils literal"><span class="pre">merge</span></tt>,
<tt class="docutils literal"><span class="pre">expunge</span></tt>, <tt class="docutils literal"><span class="pre">delete</span></tt>, <tt class="docutils literal"><span class="pre">delete-orphan</span></tt>, and <tt class="docutils literal"><span class="pre">refresh-expire</span></tt>.
An additional option, <tt class="docutils literal"><span class="pre">all</span></tt> indicates shorthand for
<tt class="docutils literal"><span class="pre">&quot;save-update,</span> <span class="pre">merge,</span> <span class="pre">refresh-expire,</span>
<span class="pre">expunge,</span> <span class="pre">delete&quot;</span></tt>, and is often used as in <tt class="docutils literal"><span class="pre">&quot;all,</span> <span class="pre">delete-orphan&quot;</span></tt>
to indicate that related objects should follow along with the
parent object in all cases, and be deleted when de-associated.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">unitofwork_cascades</em> - Full detail on each of the available
cascade options.</p>
<p class="last"><em class="xref std std-ref">tutorial_delete_cascade</em> - Tutorial example describing
a delete cascade.</p>
</div>
</li>
<li><strong>cascade_backrefs=True</strong> &#8211; <p>a boolean value indicating if the <tt class="docutils literal"><span class="pre">save-update</span></tt> cascade should
operate along an assignment event intercepted by a backref.
When set to <tt class="docutils literal"><span class="pre">False</span></tt>, the attribute managed by this relationship
will not cascade an incoming transient object into the session of a
persistent parent, if the event is received via backref.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">backref_cascade</em> - Full discussion and examples on how
the <a href="#id435"><span class="problematic" id="id436">:paramref:`~.relationship.cascade_backrefs`</span></a> option is used.</p>
</div>
</li>
<li><strong>collection_class</strong> &#8211; <p>a class or callable that returns a new list-holding object. will
be used in place of a plain list for storing elements.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">custom_collections</em> - Introductory documentation and
examples.</p>
</div>
</li>
<li><strong>comparator_factory</strong> &#8211; <p>a class which extends <tt class="xref py py-class docutils literal"><span class="pre">RelationshipProperty.Comparator</span></tt> which
provides custom SQL clause generation for comparison operations.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">PropComparator</span></tt> - some detail on redefining comparators
at this level.</p>
<p class="last"><em class="xref std std-ref">custom_comparators</em> - Brief intro to this feature.</p>
</div>
</li>
<li><strong>distinct_target_key=None</strong> &#8211; <p>Indicate if a &#8220;subquery&#8221; eager load should apply the DISTINCT
keyword to the innermost SELECT statement.  When left as <tt class="docutils literal"><span class="pre">None</span></tt>,
the DISTINCT keyword will be applied in those cases when the target
columns do not comprise the full primary key of the target table.
When set to <tt class="docutils literal"><span class="pre">True</span></tt>, the DISTINCT keyword is applied to the innermost
SELECT unconditionally.</p>
<p>It may be desirable to set this flag to False when the DISTINCT is
reducing performance of the innermost subquery beyond that of what
duplicate innermost rows may be causing.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.3: </span>- <a href="#id437"><span class="problematic" id="id438">:paramref:`~.relationship.distinct_target_key`</span></a>
allows the
subquery eager loader to apply a DISTINCT modifier to the
innermost SELECT.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span>- <a href="#id439"><span class="problematic" id="id440">:paramref:`~.relationship.distinct_target_key`</span></a>
now defaults to <tt class="docutils literal"><span class="pre">None</span></tt>, so that the feature enables itself automatically for
those cases where the innermost query targets a non-unique
key.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">loading_toplevel</em> - includes an introduction to subquery
eager loading.</p>
</div>
</li>
<li><strong>doc</strong> &#8211; docstring which will be applied to the resulting descriptor.</li>
<li><strong>extension</strong> &#8211; <p>an <tt class="xref py py-class docutils literal"><span class="pre">AttributeExtension</span></tt> instance, or list of extensions,
which will be prepended to the list of attribute listeners for
the resulting descriptor placed on the class.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.7: </span>Please see <tt class="xref py py-class docutils literal"><span class="pre">AttributeEvents</span></tt>.</p>
</div>
</li>
<li><strong>foreign_keys</strong> &#8211; <p>a list of columns which are to be used as &#8220;foreign key&#8221;
columns, or columns which refer to the value in a remote
column, within the context of this <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
object&#8217;s <a href="#id441"><span class="problematic" id="id442">:paramref:`~.relationship.primaryjoin`</span></a> condition.
That is, if the <a href="#id443"><span class="problematic" id="id444">:paramref:`~.relationship.primaryjoin`</span></a>
condition of this <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">a.id</span> <span class="pre">==</span>
<span class="pre">b.a_id</span></tt>, and the values in <tt class="docutils literal"><span class="pre">b.a_id</span></tt> are required to be
present in <tt class="docutils literal"><span class="pre">a.id</span></tt>, then the &#8220;foreign key&#8221; column of this
<a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> is <tt class="docutils literal"><span class="pre">b.a_id</span></tt>.</p>
<p>In normal cases, the <a href="#id445"><span class="problematic" id="id446">:paramref:`~.relationship.foreign_keys`</span></a>
parameter is <strong>not required.</strong> <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> will
automatically determine which columns in the
<a href="#id447"><span class="problematic" id="id448">:paramref:`~.relationship.primaryjoin`</span></a> conditition are to be
considered &#8220;foreign key&#8221; columns based on those
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects that specify <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt>,
or are otherwise listed as referencing columns in a
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt> construct.
<a href="#id449"><span class="problematic" id="id450">:paramref:`~.relationship.foreign_keys`</span></a> is only needed when:</p>
<blockquote>
<div><ol class="arabic">
<li>There is more than one way to construct a join from the local
table to the remote table, as there are multiple foreign key
references present.  Setting <tt class="docutils literal"><span class="pre">foreign_keys</span></tt> will limit the
<a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> to consider just those columns specified
here as &#8220;foreign&#8221;.<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>A multiple-foreign key join ambiguity can be resolved by
setting the <a href="#id451"><span class="problematic" id="id452">:paramref:`~.relationship.foreign_keys`</span></a> parameter alone, without the
need to explicitly set <a href="#id453"><span class="problematic" id="id454">:paramref:`~.relationship.primaryjoin`</span></a> as well.</p>
</div>
</li>
<li>The <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt> being mapped does not actually have
<tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></tt>
constructs present, often because the table
was reflected from a database that does not support foreign key
reflection (MySQL MyISAM).</li>
<li>The <a href="#id455"><span class="problematic" id="id456">:paramref:`~.relationship.primaryjoin`</span></a> argument is used to construct a non-standard
join condition, which makes use of columns or expressions that do
not normally refer to their &#8220;parent&#8221; column, such as a join condition
expressed by a complex comparison using a SQL function.</li>
</ol>
</div></blockquote>
<p>The <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct will raise informative
error messages that suggest the use of the
<a href="#id457"><span class="problematic" id="id458">:paramref:`~.relationship.foreign_keys`</span></a> parameter when
presented with an ambiguous condition.   In typical cases,
if <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> doesn&#8217;t raise any exceptions, the
<a href="#id459"><span class="problematic" id="id460">:paramref:`~.relationship.foreign_keys`</span></a> parameter is usually
not needed.</p>
<p><a href="#id461"><span class="problematic" id="id462">:paramref:`~.relationship.foreign_keys`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">relationship_foreign_keys</em></p>
<p><em class="xref std std-ref">relationship_custom_foreign</em></p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> - allows direct annotation of the &#8220;foreign&#8221; columns
within a <a href="#id463"><span class="problematic" id="id464">:paramref:`~.relationship.primaryjoin`</span></a> condition.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">foreign()</span></tt> annotation can also be applied
directly to the <a href="#id465"><span class="problematic" id="id466">:paramref:`~.relationship.primaryjoin`</span></a> expression, which is an alternate,
more specific system of describing which columns in a particular
<a href="#id467"><span class="problematic" id="id468">:paramref:`~.relationship.primaryjoin`</span></a> should be considered &#8220;foreign&#8221;.</p>
</div>
</li>
<li><strong>info</strong> &#8211; <p>Optional data dictionary which will be populated into the
<tt class="xref py py-attr docutils literal"><span class="pre">MapperProperty.info</span></tt> attribute of this object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</li>
<li><strong>innerjoin=False</strong> &#8211; <p>when <tt class="docutils literal"><span class="pre">True</span></tt>, joined eager loads will use an inner join to join
against related tables instead of an outer join.  The purpose
of this option is generally one of performance, as inner joins
generally perform better than outer joins.</p>
<p>This flag can be set to <tt class="docutils literal"><span class="pre">True</span></tt> when the relationship references an
object via many-to-one using local foreign keys that are not nullable,
or when the reference is one-to-one or a collection that is guaranteed
to have one or at least one entry.</p>
<p>If the joined-eager load is chained onto an existing LEFT OUTER JOIN,
<tt class="docutils literal"><span class="pre">innerjoin=True</span></tt> will be bypassed and the join will continue to
chain as LEFT OUTER JOIN so that the results don&#8217;t change.  As an alternative,
specify the value <tt class="docutils literal"><span class="pre">&quot;nested&quot;</span></tt>.  This will instead nest the join
on the right side, e.g. using the form &#8220;a LEFT OUTER JOIN (b JOIN c)&#8221;.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.4: </span>Added <tt class="docutils literal"><span class="pre">innerjoin=&quot;nested&quot;</span></tt> option to support
nesting of eager &#8220;inner&#8221; joins.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">what_kind_of_loading</em> - Discussion of some details of
various loader options.</p>
<p class="last"><a href="#id469"><span class="problematic" id="id470">:paramref:`.joinedload.innerjoin`</span></a> - loader option version</p>
</div>
</li>
<li><strong>join_depth</strong> &#8211; <p>when non-<tt class="docutils literal"><span class="pre">None</span></tt>, an integer value indicating how many levels
deep &#8220;eager&#8221; loaders should join on a self-referring or cyclical
relationship.  The number counts how many times the same Mapper
shall be present in the loading condition along a particular join
branch.  When left at its default of <tt class="docutils literal"><span class="pre">None</span></tt>, eager loaders
will stop chaining when they encounter a the same target mapper
which is already higher up in the chain.  This option applies
both to joined- and subquery- eager loaders.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">self_referential_eager_loading</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>lazy=&#8217;select&#8217;</strong> &#8211; <p>specifies
how the related items should be loaded.  Default value is
<tt class="docutils literal"><span class="pre">select</span></tt>.  Values include:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">select</span></tt> - items should be loaded lazily when the property is first
accessed, using a separate SELECT statement, or identity map
fetch for simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">immediate</span></tt> - items should be loaded as the parents are loaded,
using a separate SELECT statement, or identity map fetch for
simple many-to-one references.</li>
<li><tt class="docutils literal"><span class="pre">joined</span></tt> - items should be loaded &#8220;eagerly&#8221; in the same query as
that of the parent, using a JOIN or LEFT OUTER JOIN.  Whether
the join is &#8220;outer&#8221; or not is determined by the
<a href="#id471"><span class="problematic" id="id472">:paramref:`~.relationship.innerjoin`</span></a> parameter.</li>
<li><tt class="docutils literal"><span class="pre">subquery</span></tt> - items should be loaded &#8220;eagerly&#8221; as the parents are
loaded, using one additional SQL statement, which issues a JOIN to a
subquery of the original statement, for each collection requested.</li>
<li><tt class="docutils literal"><span class="pre">noload</span></tt> - no loading should occur at any time.  This is to
support &#8220;write-only&#8221; attributes, or attributes which are
populated in some manner specific to the application.</li>
<li><tt class="docutils literal"><span class="pre">dynamic</span></tt> - the attribute will return a pre-configured
<a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object for all read
operations, onto which further filtering operations can be
applied before iterating the results.  See
the section <em class="xref std std-ref">dynamic_relationship</em> for more details.</li>
<li>True - a synonym for &#8216;select&#8217;</li>
<li>False - a synonym for &#8216;joined&#8217;</li>
<li>None - a synonym for &#8216;noload&#8217;</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><tt class="xref doc docutils literal"><span class="pre">/orm/loading</span></tt> - Full documentation on relationship loader
configuration.</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - detail on the <tt class="docutils literal"><span class="pre">dynamic</span></tt> option.</p>
</div>
</li>
<li><strong>load_on_pending=False</strong> &#8211; <p>Indicates loading behavior for transient or pending parent objects.</p>
<p>When set to <tt class="docutils literal"><span class="pre">True</span></tt>, causes the lazy-loader to
issue a query for a parent object that is not persistent, meaning it has
never been flushed.  This may take effect for a pending object when
autoflush is disabled, or for a transient object that has been
&#8220;attached&#8221; to a <tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt> but is not part of its pending
collection.</p>
<p>The <a href="#id473"><span class="problematic" id="id474">:paramref:`~.relationship.load_on_pending`</span></a> flag does not improve behavior
when the ORM is used normally - object references should be constructed
at the object level, not at the foreign key level, so that they
are present in an ordinary way before a flush proceeds.  This flag
is not not intended for general use.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">Session.enable_relationship_loading()</span></tt> - this method establishes
&#8220;load on pending&#8221; behavior for the whole object, and also allows
loading on objects that remain transient or detached.</p>
</div>
</li>
<li><strong>order_by</strong> &#8211; <p>indicates the ordering that should be applied when loading these
items.  <a href="#id475"><span class="problematic" id="id476">:paramref:`~.relationship.order_by`</span></a> is expected to refer to one
of the <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects to which the target class is mapped, or
the attribute itself bound to the target class which refers
to the column.</p>
<p><a href="#id477"><span class="problematic" id="id478">:paramref:`~.relationship.order_by`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
</li>
<li><strong>passive_deletes=False</strong> &#8211; <p>Indicates loading behavior during delete operations.</p>
<p>A value of True indicates that unloaded child items should not
be loaded during a delete operation on the parent.  Normally,
when a parent item is deleted, all child items are loaded so
that they can either be marked as deleted, or have their
foreign key to the parent set to NULL.  Marking this flag as
True usually implies an ON DELETE &lt;CASCADE|SET NULL&gt; rule is in
place which will handle updating/deleting child rows on the
database side.</p>
<p>Additionally, setting the flag to the string value &#8216;all&#8217; will
disable the &#8220;nulling out&#8221; of the child foreign keys, when there
is no delete or delete-orphan cascade enabled.  This is
typically used when a triggering or error raise scenario is in
place on the database side.  Note that the foreign key
attributes on in-session child objects will not be changed
after a flush occurs so this is a very special use-case
setting.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">passive_deletes</em> - Introductory documentation
and examples.</p>
</div>
</li>
<li><strong>passive_updates=True</strong> &#8211; <p>Indicates loading and INSERT/UPDATE/DELETE behavior when the
source of a foreign key value changes (i.e. an &#8220;on update&#8221;
cascade), which are typically the primary key columns of the
source row.</p>
<p>When True, it is assumed that ON UPDATE CASCADE is configured on
the foreign key in the database, and that the database will
handle propagation of an UPDATE from a source column to
dependent rows.  Note that with databases which enforce
referential integrity (i.e. PostgreSQL, MySQL with InnoDB tables),
ON UPDATE CASCADE is required for this operation.  The
relationship() will update the value of the attribute on related
items which are locally present in the session during a flush.</p>
<p>When False, it is assumed that the database does not enforce
referential integrity and will not be issuing its own CASCADE
operation for an update.  The relationship() will issue the
appropriate UPDATE statements to the database in response to the
change of a referenced key, and items locally present in the
session during a flush will also be refreshed.</p>
<p>This flag should probably be set to False if primary key changes
are expected and the database in use doesn&#8217;t support CASCADE
(i.e. SQLite, MySQL MyISAM tables).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">passive_updates</em> - Introductory documentation and
examples.</p>
<p class="last"><a href="#id479"><span class="problematic" id="id480">:paramref:`.mapper.passive_updates`</span></a> - a similar flag which
takes effect for joined-table inheritance mappings.</p>
</div>
</li>
<li><strong>post_update</strong> &#8211; <p>this indicates that the relationship should be handled by a
second UPDATE statement after an INSERT or before a
DELETE. Currently, it also will issue an UPDATE after the
instance was UPDATEd as well, although this technically should
be improved. This flag is used to handle saving bi-directional
dependencies between two individual rows (i.e. each row
references the other), where it would otherwise be impossible to
INSERT or DELETE both rows fully since one row exists before the
other. Use this flag when a particular mapping arrangement will
incur two rows that are dependent on each other, such as a table
that has a one-to-many relationship to a set of child rows, and
also has a column that references a single child row within that
list (i.e. both tables contain a foreign key to each other). If
a flush operation returns an error that a &#8220;cyclical
dependency&#8221; was detected, this is a cue that you might want to
use <a href="#id481"><span class="problematic" id="id482">:paramref:`~.relationship.post_update`</span></a> to &#8220;break&#8221; the cycle.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">post_update</em> - Introductory documentation and examples.</p>
</div>
</li>
<li><strong>primaryjoin</strong> &#8211; <p>a SQL expression that will be used as the primary
join of this child object against the parent object, or in a
many-to-many relationship the join of the primary object to the
association table. By default, this value is computed based on the
foreign key relationships of the parent and child tables (or association
table).</p>
<p><a href="#id483"><span class="problematic" id="id484">:paramref:`~.relationship.primaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>remote_side</strong> &#8211; <p>used for self-referential relationships, indicates the column or
list of columns that form the &#8220;remote side&#8221; of the relationship.</p>
<p><a href="#id485"><span class="problematic" id="id486">:paramref:`.relationship.remote_side`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>The <tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> annotation can also be applied
directly to the <tt class="docutils literal"><span class="pre">primaryjoin</span></tt> expression, which is an alternate,
more specific system of describing which columns in a particular
<tt class="docutils literal"><span class="pre">primaryjoin</span></tt> should be considered &#8220;remote&#8221;.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><em class="xref std std-ref">self_referential</em> - in-depth explanation of how
<a href="#id487"><span class="problematic" id="id488">:paramref:`~.relationship.remote_side`</span></a>
is used to configure self-referential relationships.</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">remote()</span></tt> - an annotation function that accomplishes the same
purpose as <a href="#id489"><span class="problematic" id="id490">:paramref:`~.relationship.remote_side`</span></a>, typically
when a custom <a href="#id491"><span class="problematic" id="id492">:paramref:`~.relationship.primaryjoin`</span></a> condition
is used.</p>
</div>
</li>
<li><strong>query_class</strong> &#8211; <p>a <a class="reference internal" href="#api.models.query.Query" title="api.models.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> subclass that will be used as the base of the
&#8220;appender query&#8221; returned by a &#8220;dynamic&#8221; relationship, that
is, a relationship that specifies <tt class="docutils literal"><span class="pre">lazy=&quot;dynamic&quot;</span></tt> or was
otherwise constructed using the <tt class="xref py py-func docutils literal"><span class="pre">orm.dynamic_loader()</span></tt>
function.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">dynamic_relationship</em> - Introduction to &#8220;dynamic&#8221; relationship
loaders.</p>
</div>
</li>
<li><strong>secondaryjoin</strong> &#8211; <p>a SQL expression that will be used as the join of
an association table to the child object. By default, this value is
computed based on the foreign key relationships of the association and
child tables.</p>
<p><a href="#id493"><span class="problematic" id="id494">:paramref:`~.relationship.secondaryjoin`</span></a> may also be passed as a callable function
which is evaluated at mapper initialization time, and may be passed as a
Python-evaluable string when using Declarative.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationship_primaryjoin</em></p>
</div>
</li>
<li><strong>single_parent</strong> &#8211; <p>when True, installs a validator which will prevent objects
from being associated with more than one parent at a time.
This is used for many-to-one or many-to-many relationships that
should be treated either as one-to-one or one-to-many.  Its usage
is optional, except for <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> constructs which
are many-to-one or many-to-many and also
specify the <tt class="docutils literal"><span class="pre">delete-orphan</span></tt> cascade option.  The <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
construct itself will raise an error instructing when this option
is required.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">unitofwork_cascades</em> - includes detail on when the
<a href="#id495"><span class="problematic" id="id496">:paramref:`~.relationship.single_parent`</span></a> flag may be appropriate.</p>
</div>
</li>
<li><strong>uselist</strong> &#8211; <p>a boolean that indicates if this property should be loaded as a
list or a scalar. In most cases, this value is determined
automatically by <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> at mapper configuration
time, based on the type and direction
of the relationship - one to many forms a list, many to one
forms a scalar, many to many is a list. If a scalar is desired
where normally a list would be present, such as a bi-directional
one-to-one relationship, set <a href="#id497"><span class="problematic" id="id498">:paramref:`~.relationship.uselist`</span></a> to False.</p>
<p>The <a href="#id499"><span class="problematic" id="id500">:paramref:`~.relationship.uselist`</span></a> flag is also available on an
existing <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> construct as a read-only attribute, which
can be used to determine if this <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a> deals with
collections or scalar attributes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">uselist</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><em class="xref std std-ref">relationships_one_to_one</em> - Introduction to the &#8220;one to one&#8221;
relationship pattern, which is typically when the
<a href="#id501"><span class="problematic" id="id502">:paramref:`~.relationship.uselist`</span></a> flag is needed.</p>
</div>
</li>
<li><strong>viewonly=False</strong> &#8211; when set to True, the relationship is used only for loading objects,
and not for any persistence operation.  A <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
which specifies <a href="#id503"><span class="problematic" id="id504">:paramref:`~.relationship.viewonly`</span></a> can work
with a wider range of SQL operations within the <a href="#id505"><span class="problematic" id="id506">:paramref:`~.relationship.primaryjoin`</span></a>
condition, including operations that feature the use of
a variety of comparison operators as well as SQL functions such
as <tt class="xref py py-func docutils literal"><span class="pre">cast()</span></tt>.  The <a href="#id507"><span class="problematic" id="id508">:paramref:`~.relationship.viewonly`</span></a>
flag is also of general use when defining any kind of <a class="reference internal" href="#api.models.user.relationship" title="api.models.user.relationship"><tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt></a>
that doesn&#8217;t represent the full set of related objects, to prevent
modifications of the collection from resulting in persistence operations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="api.models.user.text">
<tt class="descclassname">api.models.user.</tt><tt class="descname">text</tt><big>(</big><em>text</em>, <em>bind=None</em>, <em>bindparams=None</em>, <em>typemap=None</em>, <em>autocommit=None</em><big>)</big><a class="headerlink" href="#api.models.user.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <tt class="xref py py-class docutils literal"><span class="pre">TextClause</span></tt> clause, representing
a textual SQL string directly.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>fom sqlalchemy import text

t = text(&quot;SELECT * FROM users&quot;)
result = connection.execute(t)
</pre></div>
</div>
<p>The advantages <a class="reference internal" href="#api.models.user.text" title="api.models.user.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> provides over a plain string are
backend-neutral support for bind parameters, per-statement
execution options, as well as
bind parameter and result-column typing behavior, allowing
SQLAlchemy type constructs to play a role when executing
a statement that is specified literally.  The construct can also
be provided with a <tt class="docutils literal"><span class="pre">.c</span></tt> collection of column elements, allowing
it to be embedded in other SQL expression constructs as a subquery.</p>
<p>Bind parameters are specified by name, using the format <tt class="docutils literal"><span class="pre">:name</span></tt>.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>For SQL statements where a colon is required verbatim, as within
an inline string, use a backslash to escape:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE name=&#39;\:username&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">TextClause</span></tt> construct includes methods which can
provide information about the bound parameters as well as the column
values which would be returned from the textual statement, assuming
it&#8217;s an executable SELECT type of statement.  The <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt>
method is used to provide bound parameter detail, and
<tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt> method allows specification of
return columns including names and types:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">bindparams</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#api.models.user.text" title="api.models.user.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> construct is used internally in cases when
a literal string is specified for part of a larger query, such as
when a string is specified to the <tt class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></tt> method of
<tt class="xref py py-class docutils literal"><span class="pre">Select</span></tt>.  In those cases, the same
bind parameter syntax is applied:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">&quot;id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="#api.models.user.text" title="api.models.user.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> explicitly usually implies the construction
of a full, standalone statement.   As such, SQLAlchemy refers
to it as an <tt class="xref py py-class docutils literal"><span class="pre">Executable</span></tt> object, and it supports
the <tt class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></tt> method.  For example,
a <a class="reference internal" href="#api.models.user.text" title="api.models.user.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> construct that should be subject to &#8220;autocommit&#8221;
can be set explicitly so using the <a href="#id509"><span class="problematic" id="id510">:paramref:`.Connection.execution_options.autocommit`</span></a>
option:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;EXEC my_procedural_thing()&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">execution_options</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that SQLAlchemy&#8217;s usual &#8220;autocommit&#8221; behavior applies to
<a class="reference internal" href="#api.models.user.text" title="api.models.user.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a> constructs implicitly - that is, statements which begin
with a phrase such as <tt class="docutils literal"><span class="pre">INSERT</span></tt>, <tt class="docutils literal"><span class="pre">UPDATE</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>,
or a variety of other phrases specific to certain backends, will
be eligible for autocommit if no transaction is in progress.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text of the SQL statement to be created.  use <tt class="docutils literal"><span class="pre">:&lt;param&gt;</span></tt>
to specify bind parameters; they will be compiled to their
engine-specific format.</li>
<li><strong>autocommit</strong> &#8211; Deprecated.  Use .execution_options(autocommit=&lt;True|False&gt;)
to set the autocommit option.</li>
<li><strong>bind</strong> &#8211; an optional connection or engine to be used for this text query.</li>
<li><strong>bindparams</strong> &#8211; <p>Deprecated.  A list of <a class="reference internal" href="#api.models.query.bindparam" title="api.models.query.bindparam"><tt class="xref py py-func docutils literal"><span class="pre">bindparam()</span></tt></a> instances used to
provide information about parameters embedded in the statement.
This argument now invokes the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt>
method on the construct before returning it.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">,</span>
          <span class="n">bindparams</span><span class="o">=</span><span class="p">[</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">)])</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">)</span><span class="o">.</span>\
          <span class="n">bindparams</span><span class="p">(</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">))</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></tt> method
supersedes the <tt class="docutils literal"><span class="pre">bindparams</span></tt> argument to <a class="reference internal" href="#api.models.user.text" title="api.models.user.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a>.</p>
</div>
</li>
<li><strong>typemap</strong> &#8211; <p>Deprecated.  A dictionary mapping the names of columns
represented in the columns clause of a <tt class="docutils literal"><span class="pre">SELECT</span></tt> statement
to type objects,
which will be used to perform post-processing on columns within
the result set.  This parameter now invokes the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt>
method, which returns a <tt class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></tt> construct that gains
a <tt class="docutils literal"><span class="pre">.c</span></tt> collection and can be embedded in other expressions.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">,</span>
              <span class="n">typemap</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">Integer</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">},</span>
          <span class="p">)</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>
</pre></div>
</div>
<p>Or alternatively:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.sql</span> <span class="kn">import</span> <span class="n">column</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">)</span>
                  <span class="p">)</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <tt class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></tt> method
supersedes the <tt class="docutils literal"><span class="pre">typemap</span></tt> argument to <a class="reference internal" href="#api.models.user.text" title="api.models.user.text"><tt class="xref py py-func docutils literal"><span class="pre">text()</span></tt></a>.</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-api.models">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-api.models" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">api.models package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-api.models.album">api.models.album module</a></li>
<li><a class="reference internal" href="#module-api.models.basemodel">api.models.basemodel module</a></li>
<li><a class="reference internal" href="#module-api.models.picture">api.models.picture module</a></li>
<li><a class="reference internal" href="#module-api.models.picture_comment">api.models.picture_comment module</a></li>
<li><a class="reference internal" href="#module-api.models.picture_like">api.models.picture_like module</a></li>
<li><a class="reference internal" href="#module-api.models.query">api.models.query module</a></li>
<li><a class="reference internal" href="#module-api.models.user">api.models.user module</a></li>
<li><a class="reference internal" href="#module-api.models">Module contents</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/api.models.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">mypinnings 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, mygetlist.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>